-- ====================================================================
-- IMPROVED HOUSING DASHBOARD SEED DATA
-- Populates all tables to support frontend data requirements
-- ====================================================================

USE housing_dashboard;

-- ====================================================================
-- 1. REFERENCE DATA
-- ====================================================================

-- Clear existing data
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE key_metrics;
TRUNCATE TABLE housing_distribution; 
TRUNCATE TABLE price_per_sqft;
TRUNCATE TABLE price_trends;
TRUNCATE TABLE sales_data;
TRUNCATE TABLE inventory_data;
TRUNCATE TABLE market_velocity;
TRUNCATE TABLE new_vs_resale;
TRUNCATE TABLE property_sales;
TRUNCATE TABLE active_listings;
TRUNCATE TABLE rental_data;
TRUNCATE TABLE airbnb_listings;
TRUNCATE TABLE market_status;
TRUNCATE TABLE housing_types;
TRUNCATE TABLE regions;
SET FOREIGN_KEY_CHECKS = 1;

-- Insert regions
INSERT INTO regions (id, name, code, parent_region_id, population, area_km2) VALUES
(1, 'Peel Region', 'PEEL', NULL, 1381739, 1242.0),
(2, 'Mississauga', 'MISS', 1, 717961, 292.74),
(3, 'Brampton', 'BRAM', 1, 593638, 266.34),
(4, 'Caledon', 'CALE', 1, 66502, 688.02);

-- Insert housing types
INSERT INTO housing_types (id, name, code, description, typical_size_sqft_min, typical_size_sqft_max) VALUES
(1, 'All Types', 'ALL', 'All housing types combined', 0, 10000),
(2, 'Detached', 'DET', 'Single detached houses', 1500, 5000),
(3, 'Semi-Detached', 'SEMI', 'Semi-detached houses', 1000, 2500),
(4, 'Townhouse', 'TOWN', 'Townhouses and row houses', 900, 2000),
(5, 'Condo', 'COND', 'Condominiums and apartments', 400, 1500);

-- Insert market status
INSERT INTO market_status (id, name, code, description) VALUES
(1, 'Active', 'ACT', 'Currently active listings'),
(2, 'Sold', 'SLD', 'Successfully sold properties'),
(3, 'Expired', 'EXP', 'Expired listings'),
(4, 'Pending', 'PND', 'Sale pending completion');

-- ====================================================================
-- 2. KEY METRICS DATA (Dashboard Primary Data)
-- ====================================================================

-- Key metrics for all regions and housing types
INSERT INTO key_metrics (region_id, housing_type_id, data_date, avg_price, price_change_pct, total_sales, sales_change_pct, avg_days_on_market, days_change_pct, inventory_count, inventory_change_pct) VALUES
-- Peel Region
(1, 1, '2025-06-01', 1245000, 5.2, 1400, 3.7, 18, -2.5, 3500, -8.3),
(1, 2, '2025-06-01', 1710000, 4.8, 470, 2.5, 22, -1.8, 1200, -7.5),
(1, 3, '2025-06-01', 1080000, 5.5, 350, 3.2, 19, -2.2, 900, -8.0),
(1, 4, '2025-06-01', 980000, 5.8, 290, 4.1, 16, -3.0, 800, -8.8),
(1, 5, '2025-06-01', 715000, 6.2, 290, 5.5, 14, -3.5, 600, -9.5),

-- Mississauga
(2, 1, '2025-06-01', 1295000, 4.8, 700, 2.9, 16, -3.1, 1800, -7.5),
(2, 2, '2025-06-01', 1760000, 4.5, 210, 2.0, 20, -2.0, 500, -6.8),
(2, 3, '2025-06-01', 1130000, 5.0, 175, 2.8, 17, -2.8, 450, -7.2),
(2, 4, '2025-06-01', 1030000, 5.3, 145, 3.5, 15, -3.3, 400, -8.0),
(2, 5, '2025-06-01', 765000, 5.8, 170, 4.2, 12, -4.0, 450, -8.5),

-- Brampton
(3, 1, '2025-06-01', 1195000, 5.5, 580, 4.2, 20, -1.8, 1400, -9.1),
(3, 2, '2025-06-01', 1595000, 5.2, 210, 3.5, 24, -1.2, 500, -8.5),
(3, 3, '2025-06-01', 1030000, 5.8, 150, 4.0, 21, -1.5, 400, -9.0),
(3, 4, '2025-06-01', 930000, 6.0, 130, 4.8, 18, -2.2, 350, -9.5),
(3, 5, '2025-06-01', 665000, 6.5, 90, 5.5, 15, -2.8, 150, -10.0),

-- Caledon
(4, 1, '2025-06-01', 1460000, 6.1, 120, 5.3, 25, -0.5, 300, -10.2),
(4, 2, '2025-06-01', 1860000, 5.8, 70, 4.5, 28, -0.2, 180, -9.5),
(4, 3, '2025-06-01', 1230000, 6.2, 24, 5.0, 26, -0.4, 60, -10.0),
(4, 4, '2025-06-01', 1080000, 6.5, 18, 6.0, 22, -0.8, 50, -10.5),
(4, 5, '2025-06-01', 815000, 7.0, 8, 7.5, 20, -1.0, 10, -11.0);

-- ====================================================================
-- 3. HOUSING DISTRIBUTION DATA
-- ====================================================================

INSERT INTO housing_distribution (region_id, housing_type_id, stock_count, market_share_pct, avg_price, updated_date) VALUES
-- Peel Region
(1, 2, 245000, 45.2, 1710000, '2025-06-01'),
(1, 3, 98000, 18.1, 1080000, '2025-06-01'),
(1, 4, 125000, 23.1, 980000, '2025-06-01'),
(1, 5, 74000, 13.6, 715000, '2025-06-01'),

-- Mississauga
(2, 2, 85000, 38.2, 1850000, '2025-06-01'),
(2, 3, 35000, 15.7, 1180000, '2025-06-01'),
(2, 4, 52000, 23.4, 1050000, '2025-06-01'),
(2, 5, 50000, 22.5, 780000, '2025-06-01'),

-- Brampton
(3, 2, 135000, 52.1, 1620000, '2025-06-01'),
(3, 3, 48000, 18.5, 1020000, '2025-06-01'),
(3, 4, 58000, 22.4, 920000, '2025-06-01'),
(3, 5, 18000, 7.0, 650000, '2025-06-01'),

-- Caledon
(4, 2, 25000, 75.8, 1950000, '2025-06-01'),
(4, 3, 3000, 9.1, 1250000, '2025-06-01'),
(4, 4, 4500, 13.6, 1150000, '2025-06-01'),
(4, 5, 500, 1.5, 850000, '2025-06-01');

-- ====================================================================
-- 4. PRICE PER SQUARE FOOT DATA
-- ====================================================================

INSERT INTO price_per_sqft (region_id, housing_type_id, price_per_sqft, avg_sqft, data_date) VALUES
-- Peel Region
(1, 2, 685, 2495, '2025-06-01'),
(1, 3, 720, 1500, '2025-06-01'),
(1, 4, 735, 1333, '2025-06-01'),
(1, 5, 895, 799, '2025-06-01'),

-- Mississauga
(2, 2, 742, 2495, '2025-06-01'),
(2, 3, 787, 1500, '2025-06-01'),
(2, 4, 788, 1333, '2025-06-01'),
(2, 5, 976, 799, '2025-06-01'),

-- Brampton
(3, 2, 649, 2495, '2025-06-01'),
(3, 3, 680, 1500, '2025-06-01'),
(3, 4, 690, 1333, '2025-06-01'),
(3, 5, 813, 799, '2025-06-01'),

-- Caledon
(4, 2, 782, 2495, '2025-06-01'),
(4, 3, 833, 1500, '2025-06-01'),
(4, 4, 863, 1333, '2025-06-01'),
(4, 5, 1064, 799, '2025-06-01');

-- ====================================================================
-- 5. MARKET VELOCITY DATA
-- ====================================================================

INSERT INTO market_velocity (region_id, housing_type_id, days_on_market, avg_price, sales_volume, data_date) VALUES
-- Peel Region
(1, 2, 28, 1710000, 1250, '2025-06-01'),
(1, 3, 22, 1080000, 485, '2025-06-01'),
(1, 4, 19, 980000, 685, '2025-06-01'),
(1, 5, 15, 715000, 425, '2025-06-01'),

-- Mississauga
(2, 2, 32, 1850000, 420, '2025-06-01'),
(2, 3, 25, 1180000, 175, '2025-06-01'),
(2, 4, 21, 1050000, 285, '2025-06-01'),
(2, 5, 16, 780000, 285, '2025-06-01'),

-- Brampton
(3, 2, 25, 1620000, 685, '2025-06-01'),
(3, 3, 20, 1020000, 245, '2025-06-01'),
(3, 4, 18, 920000, 325, '2025-06-01'),
(3, 5, 14, 650000, 105, '2025-06-01'),

-- Caledon
(4, 2, 35, 1950000, 145, '2025-06-01'),
(4, 3, 28, 1250000, 65, '2025-06-01'),
(4, 4, 24, 1150000, 75, '2025-06-01'),
(4, 5, 18, 850000, 35, '2025-06-01');

-- ====================================================================
-- 6. NEW VS RESALE DATA
-- ====================================================================

INSERT INTO new_vs_resale (region_id, housing_type_id, new_units_sold, resale_units_sold, new_avg_price, resale_avg_price, data_date) VALUES
-- Peel Region
(1, 2, 125, 1125, 1850000, 1690000, '2025-06-01'),
(1, 3, 85, 400, 1180000, 1060000, '2025-06-01'),
(1, 4, 245, 440, 1050000, 965000, '2025-06-01'),
(1, 5, 185, 240, 785000, 695000, '2025-06-01'),

-- Mississauga
(2, 2, 42, 378, 1950000, 1820000, '2025-06-01'),
(2, 3, 28, 147, 1280000, 1140000, '2025-06-01'),
(2, 4, 85, 200, 1150000, 1020000, '2025-06-01'),
(2, 5, 115, 155, 850000, 745000, '2025-06-01'),

-- Brampton
(3, 2, 68, 617, 1750000, 1580000, '2025-06-01'),
(3, 3, 45, 200, 1120000, 1000000, '2025-06-01'),
(3, 4, 125, 200, 980000, 910000, '2025-06-01'),
(3, 5, 55, 50, 720000, 635000, '2025-06-01'),

-- Caledon
(4, 2, 15, 130, 2050000, 1840000, '2025-06-01'),
(4, 3, 12, 53, 1380000, 1210000, '2025-06-01'),
(4, 4, 35, 40, 1250000, 1130000, '2025-06-01'),
(4, 5, 15, 20, 950000, 790000, '2025-06-01');

-- ====================================================================
-- 7. HISTORICAL PRICE TRENDS (12 months)
-- ====================================================================

-- Generate 12 months of price trend data
INSERT INTO price_trends (region_id, housing_type_id, month, price, change_pct, min_price, max_price, sales_count) VALUES
-- Peel Region - All Types (12 months)
(1, 1, '2024-07-01', 1185000, 2.1, 950000, 2500000, 142),
(1, 1, '2024-08-01', 1198000, 1.1, 965000, 2580000, 138),
(1, 1, '2024-09-01', 1205000, 0.6, 955000, 2620000, 145),
(1, 1, '2024-10-01', 1192000, -1.1, 945000, 2550000, 139),
(1, 1, '2024-11-01', 1175000, -1.4, 920000, 2480000, 128),
(1, 1, '2024-12-01', 1168000, -0.6, 915000, 2450000, 115),
(1, 1, '2025-01-01', 1182000, 1.2, 925000, 2520000, 125),
(1, 1, '2025-02-01', 1205000, 1.9, 945000, 2580000, 135),
(1, 1, '2025-03-01', 1228000, 1.9, 965000, 2650000, 148),
(1, 1, '2025-04-01', 1238000, 0.8, 975000, 2680000, 152),
(1, 1, '2025-05-01', 1245000, 0.6, 980000, 2720000, 155),
(1, 1, '2025-06-01', 1245000, 0.0, 985000, 2750000, 158),

-- Mississauga - All Types (12 months)
(2, 1, '2024-07-01', 1235000, 1.8, 985000, 2850000, 68),
(2, 1, '2024-08-01', 1248000, 1.1, 995000, 2920000, 65),
(2, 1, '2024-09-01', 1255000, 0.6, 990000, 2950000, 72),
(2, 1, '2024-10-01', 1242000, -1.0, 980000, 2880000, 69),
(2, 1, '2024-11-01', 1225000, -1.4, 965000, 2820000, 62),
(2, 1, '2024-12-01', 1218000, -0.6, 960000, 2780000, 58),
(2, 1, '2025-01-01', 1232000, 1.1, 970000, 2850000, 62),
(2, 1, '2025-02-01', 1255000, 1.9, 985000, 2920000, 68),
(2, 1, '2025-03-01', 1278000, 1.8, 1005000, 2980000, 75),
(2, 1, '2025-04-01', 1288000, 0.8, 1015000, 3020000, 78),
(2, 1, '2025-05-01', 1295000, 0.5, 1020000, 3050000, 82),
(2, 1, '2025-06-01', 1295000, 0.0, 1025000, 3080000, 85);

-- ====================================================================
-- 8. SALES DATA (12 months)
-- ====================================================================

INSERT INTO sales_data (region_id, housing_type_id, month, sales_count, avg_price, total_value) VALUES
-- Peel Region - All Types
(1, 1, '2024-07-01', 1285, 1185000, 1522725000),
(1, 1, '2024-08-01', 1298, 1198000, 1555204000),
(1, 1, '2024-09-01', 1312, 1205000, 1580960000),
(1, 1, '2024-10-01', 1295, 1192000, 1543840000),
(1, 1, '2024-11-01', 1180, 1175000, 1386500000),
(1, 1, '2024-12-01', 1125, 1168000, 1314000000),
(1, 1, '2025-01-01', 1265, 1182000, 1495230000),
(1, 1, '2025-02-01', 1335, 1205000, 1608675000),
(1, 1, '2025-03-01', 1385, 1228000, 1700780000),
(1, 1, '2025-04-01', 1398, 1238000, 1730724000),
(1, 1, '2025-05-01', 1405, 1245000, 1749225000),
(1, 1, '2025-06-01', 1400, 1245000, 1743000000),

-- Mississauga - All Types  
(2, 1, '2024-07-01', 635, 1235000, 784225000),
(2, 1, '2024-08-01', 648, 1248000, 808704000),
(2, 1, '2024-09-01', 665, 1255000, 834575000),
(2, 1, '2024-10-01', 652, 1242000, 809784000),
(2, 1, '2024-11-01', 595, 1225000, 728875000),
(2, 1, '2024-12-01', 568, 1218000, 692424000),
(2, 1, '2025-01-01', 612, 1232000, 754384000),
(2, 1, '2025-02-01', 665, 1255000, 834575000),
(2, 1, '2025-03-01', 685, 1278000, 875430000),
(2, 1, '2025-04-01', 695, 1288000, 895160000),
(2, 1, '2025-05-01', 702, 1295000, 909090000),
(2, 1, '2025-06-01', 700, 1295000, 906500000);

-- ====================================================================
-- 9. INVENTORY DATA (12 months)
-- ====================================================================

INSERT INTO inventory_data (region_id, housing_type_id, month, total_listings, new_listings, sold_listings, expired_listings, avg_list_price) VALUES
-- Peel Region - All Types
(1, 1, '2024-07-01', 3850, 425, 385, 42, 1210000),
(1, 1, '2024-08-01', 3795, 398, 412, 38, 1225000),
(1, 1, '2024-09-01', 3720, 375, 425, 35, 1235000),
(1, 1, '2024-10-01', 3685, 358, 395, 40, 1220000),
(1, 1, '2024-11-01', 3725, 385, 342, 45, 1205000),
(1, 1, '2024-12-01', 3820, 425, 285, 48, 1195000),
(1, 1, '2025-01-01', 3785, 398, 315, 42, 1210000),
(1, 1, '2025-02-01', 3695, 375, 385, 38, 1235000),
(1, 1, '2025-03-01', 3620, 358, 425, 35, 1260000),
(1, 1, '2025-04-01', 3565, 342, 445, 32, 1275000),
(1, 1, '2025-05-01', 3525, 328, 458, 30, 1285000),
(1, 1, '2025-06-01', 3500, 315, 465, 28, 1295000);

-- ====================================================================
-- 10. SAMPLE PROPERTY SALES TRANSACTIONS
-- ====================================================================

-- Insert sample property sales for recent months
INSERT INTO property_sales (region_id, housing_type_id, sale_date, sale_price, list_price, price_per_sqft, size_sqft, bedrooms, bathrooms, days_on_market, is_new_construction) VALUES
-- Recent Mississauga sales
(2, 2, '2025-06-15', 1850000, 1899000, 750, 2467, 4, 3.5, 18, FALSE),
(2, 2, '2025-06-14', 1720000, 1749000, 725, 2372, 4, 3.0, 22, FALSE),
(2, 2, '2025-06-13', 1950000, 1999000, 780, 2500, 5, 4.0, 15, TRUE),
(2, 3, '2025-06-12', 1180000, 1199000, 787, 1500, 3, 2.5, 19, FALSE),
(2, 4, '2025-06-11', 1050000, 1075000, 788, 1333, 3, 2.5, 16, FALSE),
(2, 5, '2025-06-10', 780000, 799000, 976, 799, 2, 2.0, 12, FALSE),

-- Recent Brampton sales
(3, 2, '2025-06-15', 1620000, 1649000, 649, 2495, 4, 3.5, 24, FALSE),
(3, 2, '2025-06-14', 1580000, 1599000, 633, 2495, 4, 3.0, 26, FALSE),
(3, 3, '2025-06-13', 1020000, 1039000, 680, 1500, 3, 2.5, 21, FALSE),
(3, 4, '2025-06-12', 920000, 945000, 690, 1333, 3, 2.5, 18, FALSE),

-- Recent Caledon sales
(4, 2, '2025-06-15', 1950000, 1999000, 782, 2495, 5, 4.0, 28, FALSE),
(4, 2, '2025-06-14', 1840000, 1875000, 738, 2495, 4, 3.5, 30, FALSE),
(4, 3, '2025-06-13', 1250000, 1275000, 833, 1500, 3, 2.5, 26, FALSE),
(4, 4, '2025-06-12', 1150000, 1175000, 863, 1333, 3, 2.5, 22, FALSE);

-- ====================================================================
-- 11. SAMPLE ACTIVE LISTINGS
-- ====================================================================

INSERT INTO active_listings (region_id, housing_type_id, status_id, list_price, price_per_sqft, size_sqft, bedrooms, bathrooms, list_date, days_on_market, is_new_construction) VALUES
-- Active Mississauga listings
(2, 2, 1, 1899000, 760, 2500, 4, 3.5, '2025-06-01', 18, FALSE),
(2, 2, 1, 1749000, 735, 2380, 4, 3.0, '2025-05-28', 22, FALSE),
(2, 3, 1, 1199000, 800, 1499, 3, 2.5, '2025-06-03', 16, FALSE),
(2, 4, 1, 1075000, 805, 1335, 3, 2.5, '2025-06-05', 14, FALSE),
(2, 5, 1, 799000, 985, 811, 2, 2.0, '2025-06-08', 11, FALSE),

-- Active Brampton listings
(3, 2, 1, 1649000, 660, 2500, 4, 3.5, '2025-05-25', 25, FALSE),
(3, 3, 1, 1039000, 693, 1500, 3, 2.5, '2025-05-30', 20, FALSE),
(3, 4, 1, 945000, 705, 1340, 3, 2.5, '2025-06-02', 17, FALSE),
(3, 5, 1, 675000, 830, 813, 2, 2.0, '2025-06-06', 13, FALSE),

-- Active Caledon listings
(4, 2, 1, 1999000, 800, 2499, 5, 4.0, '2025-05-22', 28, FALSE),
(4, 3, 1, 1275000, 850, 1500, 3, 2.5, '2025-05-27', 23, FALSE);

-- ====================================================================
-- 12. SAMPLE RENTAL DATA
-- ====================================================================

INSERT INTO rental_data (region_id, housing_type_id, monthly_rent, rent_per_sqft, size_sqft, bedrooms, bathrooms, listing_date, rented_date, days_to_rent) VALUES
-- Mississauga rentals
(2, 2, 4200, 1.68, 2500, 4, 3.5, '2025-05-15', '2025-06-01', 17),
(2, 3, 2800, 1.87, 1500, 3, 2.5, '2025-05-20', '2025-06-05', 16),
(2, 4, 2500, 1.87, 1335, 3, 2.5, '2025-05-25', '2025-06-08', 14),
(2, 5, 2200, 2.75, 800, 2, 2.0, '2025-06-01', '2025-06-12', 11),

-- Brampton rentals  
(3, 2, 3800, 1.52, 2500, 4, 3.5, '2025-05-18', '2025-06-02', 15),
(3, 3, 2600, 1.73, 1500, 3, 2.5, '2025-05-22', '2025-06-06', 15),
(3, 4, 2300, 1.72, 1335, 3, 2.5, '2025-05-28', '2025-06-10', 13),

-- Caledon rentals
(4, 2, 4800, 1.92, 2500, 5, 4.0, '2025-05-12', '2025-05-30', 18),
(4, 3, 3200, 2.13, 1500, 3, 2.5, '2025-05-16', '2025-06-03', 18);

-- ====================================================================
-- 13. SAMPLE AIRBNB DATA
-- ====================================================================

INSERT INTO airbnb_listings (region_id, housing_type_id, nightly_rate, cleaning_fee, bedrooms, bathrooms, max_guests, occupancy_rate, monthly_revenue, average_rating, total_reviews, listing_created_date, last_booked_date, is_entire_home, is_superhost) VALUES
-- Mississauga AirBnB
(2, 2, 280, 150, 4, 3, 8, 68.5, 5700, 4.7, 142, '2024-03-15', '2025-06-10', TRUE, TRUE),
(2, 4, 185, 100, 3, 2, 6, 72.3, 4100, 4.5, 89, '2024-01-20', '2025-06-08', TRUE, FALSE),
(2, 5, 145, 75, 2, 2, 4, 75.8, 3200, 4.6, 167, '2023-11-10', '2025-06-12', TRUE, TRUE),

-- Brampton AirBnB
(3, 2, 220, 120, 4, 3, 8, 65.2, 4500, 4.4, 78, '2024-02-28', '2025-06-05', TRUE, FALSE),
(3, 4, 165, 85, 3, 2, 6, 69.1, 3400, 4.3, 56, '2024-04-12', '2025-06-07', TRUE, FALSE),

-- Caledon AirBnB
(4, 2, 350, 200, 5, 4, 10, 71.5, 7800, 4.8, 95, '2024-01-05', '2025-06-09', TRUE, TRUE),
(4, 4, 225, 125, 3, 2, 6, 66.8, 4700, 4.6, 73, '2024-03-20', '2025-06-06', TRUE, FALSE);

-- Show completion message
SELECT 'Database seeding completed successfully!' as Status,
       COUNT(*) as TotalKeyMetrics FROM key_metrics
UNION ALL
SELECT 'Housing Distribution Records:', COUNT(*) FROM housing_distribution
UNION ALL  
SELECT 'Price Trends Records:', COUNT(*) FROM price_trends
UNION ALL
SELECT 'Sales Data Records:', COUNT(*) FROM sales_data
UNION ALL
SELECT 'Property Sales Records:', COUNT(*) FROM property_sales
UNION ALL
SELECT 'Active Listings Records:', COUNT(*) FROM active_listings; 