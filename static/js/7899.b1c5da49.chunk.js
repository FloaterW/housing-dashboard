"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[7899],{15427:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(35143),l=s(69098),o=s(45802),r=s(42553),n=s(46053),a=(s(81806),s(76460),s(47249),s(85842));const u=new o.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends(l.A.ClonableMixin(r.A)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,i._)([(0,n.MZ)({json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,n.MZ)({json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,n.MZ)({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),(0,i._)([(0,n.MZ)({json:{write:!0}})],d.prototype,"prototype",void 0),(0,i._)([(0,n.MZ)({json:{write:!0}})],d.prototype,"thumbnail",void 0),d=(0,i._)([(0,a.$)("esri.layers.support.FeatureTemplate")],d);const c=d},21617:(e,t,s)=>{s.d(t,{J:()=>w});var i=s(35143),l=(s(81806),s(76460)),o=s(50346),r=s(46053),n=s(21403),a=(s(47249),s(85842)),u=s(80979),d=s(94643),c=s(68134),h=s(49281);const p=new d.A,f=new WeakMap;function m(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function y(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:y(t,e%t):0}let v=0,g=0;function b(){const e=Date.now();let t=!1;for(const i of p){const l=i.deref();var s;if(l){if(l.refreshInterval)e-(null!==(s=f.get(l))&&void 0!==s?s:0)+5>=6e4*l.refreshInterval&&(f.set(l,e),l.refresh(e))}else t=!0}if(t)for(let i=p.length-1;i>=0;i--)p.at(i).deref()||p.removeAt(i)}(0,h.fm)((()=>{const e=Date.now();let t=0;for(const s of p){const i=s.deref();i&&(t=y(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?f.get(i)||f.set(i,e):f.delete(i))}if(t!==g){if(g=t,clearInterval(v),0===g)return void(v=0);v=setInterval(b,g)}}),c.OH);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){m(e)&&p.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=p.find((t=>t.deref()===e));t&&p.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,o.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{l.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,i._)([(0,r.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"refreshInterval",void 0),(0,i._)([(0,n.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,i._)([(0,r.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,i._)([(0,r.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,i._)([(0,a.$)("esri.layers.mixins.RefreshableLayer")],t),t}},29380:(e,t,s)=>{s.d(t,{A:()=>d});var i,l=s(35143),o=s(42553),r=s(46053),n=(s(81806),s(76460),s(47249),s(85842)),a=s(23243);let u=i=class extends o.A{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e,t;return new i({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:null!==(e=null===(t=this.symbol)||void 0===t?void 0:t.clone())&&void 0!==e?e:null})}getMeshHash(){const e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}};(0,l._)([(0,r.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,l._)([(0,r.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,l._)([(0,r.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,l._)([(0,r.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,l._)([(0,r.MZ)(a.Wp)],u.prototype,"symbol",void 0),u=i=(0,l._)([(0,n.$)("esri.renderers.support.ClassBreakInfo")],u);const d=u},30973:(e,t,s)=>{s.d(t,{DQ:()=>c,tn:()=>d});var i=s(89379),l=s(16868),o=s(53430),r=s(75900),n=(s(56362),s(87015),s(81940),s(6929)),a=(s(7198),s(93616),s(53539),s(91904),s(40585)),u=s(17542);function d(e,t){let{displayField:s,editFieldsInfo:i,fields:a,objectIdField:u,title:d}=e;if(!a)return null;const c=f({editFieldsInfo:i,fields:a,objectIdField:u},t);if(!c.length)return null;const h=function(e){const t=(0,o.mB)(e),{titleBase:s}=e;return t?"".concat(s,": {").concat(t.trim(),"}"):null!==s&&void 0!==s?s:""}({titleBase:d,fields:a,displayField:s}),p=[new n.A,new r.A];return new l.A({title:h,content:p,fieldInfos:c})}function c(e){var t;const{title:s,graphic:i}=null!==e&&void 0!==e?e:{},{attributes:l,sourceLayer:o}=null!==i&&void 0!==i?i:{},r=o&&"displayField"in o?o.displayField:null,n=r?null===l||void 0===l?void 0:l[r]:null,a=null!=n?JSON.stringify(n):null,u=null===i||void 0===i||null===(t=i.getObjectId())||void 0===t?void 0:t.toString();return s||a||u||""}const h=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,o.Bz)(e,t);function p(e,t){return"oid"===e.type?-1:"oid"===t.type?1:y(e)?-1:y(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function f(e,t){var s;const l=null===t||void 0===t?void 0:t.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:s,sortDisabled:i}=e;const l=t;return s&&(t=t.filter((e=>!s.includes(e.type)))),t===l&&(t=t.slice()),!0!==i&&t.sort(p),t}({fields:null!==(s=e.fields)&&void 0!==s?s:[],ignoreFieldTypes:(null===t||void 0===t?void 0:t.ignoreFieldTypes)||v,sortDisabled:null===t||void 0===t?void 0:t.sortDisabled}).map((t=>new a.A({fieldName:t.name,isEditable:(0,o.R$)(t,e),label:t.alias,format:m(t),visible:h(t,(0,i.A)((0,i.A)({},e),{},{visibleFieldNames:l}))})))}function m(e){switch(e.type){case"small-integer":case"integer":case"single":return new u.A({digitSeparator:!0,places:0});case"double":return new u.A({digitSeparator:!0,places:2});case"string":return(0,o.JL)(e.name)?new u.A({digitSeparator:!0,places:0}):void 0;default:return}}function y(e){var t;if("name"===(e.name&&e.name.toLowerCase()))return!0;return"name"===(null===(t=e.alias)||void 0===t?void 0:t.toLowerCase())}const v=["geometry","blob","raster","guid","xml"]},31362:(e,t,s)=>{s.d(t,{d:()=>r});var i=s(35143),l=s(46053),o=(s(81806),s(76460),s(47249),s(85842));const r=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,i._)([(0,l.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,i._)([(0,o.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},63844:(e,t,s)=>{s.d(t,{A:()=>V});var i,l=s(89379),o=s(35143),r=s(45802),n=s(53084),a=s(76460),u=s(46053),d=s(21403),c=s(6409),h=s(28379),p=s(85842),f=s(17707),m=s(40565),y=s(53430),v=s(71832),g=s(37287),b=s(29380),w=s(23243),x=s(84563),I=s(98976),F=s(94725);const k="percent-of-total",_="field",B=new r.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:k,esriNormalizeByField:_}),E=(0,m.dp)(b.A);let T=i=class extends((0,g.h)(v.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,s){if(!Array.isArray(e))return;let i=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,s),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t}))}writeClassBreakInfos(e,t,s,i){const l=e.map((e=>e.write({},i)));this._areClassBreaksConsecutive()&&l.forEach((e=>delete e.classMinValue)),t[s]=l}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,m.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,s=null!=this.normalizationTotal;return t||s?(e=t&&_||s&&k||null,t&&s&&a.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==_&&e!==k||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,s){let i=null;i="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,F.dp)(s)}):E((0,n.o8)(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const s=this.classBreakInfos.length;for(let i=0;i<s;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade)&&a.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let s=t;this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade)&&(s=(0,l.A)((0,l.A)({},s),{},{arcade:await(0,I.lw)()}));const i=this.getBreakIndex(e,s);return-1!==i?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade))return void a.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const s=this.getBreakIndex(e,t);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let s=t;if(this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade)){const e=await(0,I.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),s=(0,l.A)((0,l.A)({},s),{},{arcade:e})}const i=this.getBreakIndex(e,s);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e,t;return null!==(e=null===(t=this.visualVariables)||void 0===t?void 0:t.reduce(((e,t)=>e+t.getAttributeHash()),""))&&void 0!==e?e:""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),s="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),""),".").concat(s,".").concat(this.field,".").concat(this.valueExpression)}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new i({field:this.field,backgroundFillSymbol:null===(e=this.backgroundFillSymbol)||void 0===e?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:null===(t=this.defaultSymbol)||void 0===t?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,n.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,n.o8)(this.visualVariables),legendOptions:(0,n.o8)(this.legendOptions),authoringInfo:(0,n.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const s=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(s)}async collectSymbolFields(e,t){const s=[...this.symbols.map((s=>s.collectRequiredFields(e,t))),(0,y.Dx)(e,t,this.valueExpression)];(0,y.rq)(e,t,this.field),(0,y.rq)(e,t,this.normalizationField),await Promise.all(s)}_getBreakIndexForExpression(e,t){const{viewingMode:s,scale:i,spatialReference:l,arcade:o,timeZone:r}=null!==t&&void 0!==t?t:{},{valueExpression:n}=this;let a=this._compiledValueExpression.valueExpression===n?this._compiledValueExpression.compiledFunction:null;const u=o.arcadeUtils;if(!a){const e=u.createSyntaxTree(n);a=u.createFunction(e),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=n;const d=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:s,scale:i,spatialReference:l}),r));return this._getBreakIndexfromInfos(d)}_getBreakIndexForField(e){const t=this.field,s=e.attributes,i=this.normalizationType;let l=parseFloat(s[t]);if(i){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?s[this.normalizationField]:void 0);if("log"===i)l=Math.log(l)*Math.LOG10E;else if(i!==k||null==e||isNaN(e)){if(i===_&&!isNaN(t)){if(isNaN(l)||isNaN(t))return-1;l/=t}}else l=l/e*100}return this._getBreakIndexfromInfos(l)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let s=0;s<this.classBreakInfos.length;s++){const i=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return s}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let s=1;s<t;s++)if(e[s-1].maxValue!==e[s].minValue)return!1;return!0}};(0,o._)([(0,u.MZ)(w.As)],T.prototype,"backgroundFillSymbol",void 0),(0,o._)([(0,u.MZ)({type:[b.A],json:{write:{isRequired:!0}}})],T.prototype,"classBreakInfos",void 0),(0,o._)([(0,h.w)("classBreakInfos")],T.prototype,"readClassBreakInfos",null),(0,o._)([(0,f.K)("classBreakInfos")],T.prototype,"writeClassBreakInfos",null),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],T.prototype,"defaultLabel",void 0),(0,o._)([(0,u.MZ)(w.z4)],T.prototype,"defaultSymbol",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],T.prototype,"field",void 0),(0,o._)([(0,d.w)("field")],T.prototype,"castField",null),(0,o._)([(0,u.MZ)({type:Boolean})],T.prototype,"isMaxInclusive",void 0),(0,o._)([(0,u.MZ)({type:x.A,json:{write:!0}})],T.prototype,"legendOptions",void 0),(0,o._)([(0,u.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],T.prototype,"minValue",null),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],T.prototype,"normalizationField",void 0),(0,o._)([(0,u.MZ)({type:Number,json:{write:!0}})],T.prototype,"normalizationTotal",void 0),(0,o._)([(0,u.MZ)({type:B.apiValues,value:null,json:{type:B.jsonValues,read:B.read,write:B.write}})],T.prototype,"normalizationType",null),(0,o._)([(0,c.e)({classBreaks:"class-breaks"})],T.prototype,"type",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],T.prototype,"valueExpression",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],T.prototype,"valueExpressionTitle",void 0),T=i=(0,o._)([(0,p.$)("esri.renderers.ClassBreaksRenderer")],T);const V=T}}]);
//# sourceMappingURL=7899.b1c5da49.chunk.js.map