"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[6261,7995],{55:(e,t,n)=>{n.d(t,{cZ:()=>L,XW:()=>O,fe:()=>B});var i,r=n(3825),o=n(50076),s=n(87663),a=(n(98618),n(1484)),l=n(13312);class u{constructor(){this.version="",this.queryResult=new d}}class d{constructor(){this.featureResult=new c}}class c{constructor(){this.objectIdFieldName="",this.uniqueIdField=new p,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new h,this.geometryType=null,this.spatialReference=new l.A,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new y,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}}class p{constructor(){this.name="",this.isSystemMaintained=!1}}class h{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}}class y{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new m,this.translate=new f}}class m{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}}class f{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}}class g{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}}class v{constructor(){this.attributes=[],this.compressedGeometry=new b,this.centroid=new b,this.aggregateGeometries=[]}}class b{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}}!function(e){e.ELEMENTUID="ELEMENTUID",e.TYPENAME="TYPENAME"}(i||(i={}));const I=[i.ELEMENTUID,i.TYPENAME];var _,w;!function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME"}(_||(_={})),function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME",e[e.FROMUID=2]="FROMUID",e[e.TOUID=3]="TOUID"}(w||(w={}));var M,T,x,A,S=n(57502),E=n(31830);function N(e){const t=new b;t.geometryType=E.bV[e.geometry_type.value];const n=[],i=[];for(let r=0;r<e.lengths.length;r++)n.push(e.lengths[r]);for(let r=0;r<e.coords.length;r++)i.push(e.coords[r]);return t.lengths=n,t.coords=i,t}function C(e){const t=new g;return t.name=e.name,t.alias=e.alias,t.fieldType=E.r5[e.field_type.value],t.sqlType=x[e.sql_type.value],t.domain=e.domain,t.defaultValue=e.default_value,t}function k(e){const t=C(e);return t.geometryType=E.bV[e.geometry_type.value],t}function F(e){const t=new y;t.quantizeOriginPosition=T[e.quantizeOriginPosition.value];const n=t.scale,i=e.scale;n.xScale=i.xScale,n.yScale=i.yScale,n.mScale=i.mScale,n.zScale=i.zScale;const r=t.translate,o=e.translate;return r.xTranslate=o.xTranslate,r.yTranslate=o.yTranslate,r.mTranslate=o.mTranslate,r.zTranslate=o.zTranslate,t}async function L(e,t){null!==t&&void 0!==t||(t=!1);const n={generateAllSublayers:t,namedTypeDefinitions:new Map};return await async function(e){const t=await(0,r.A)(e,{responseType:"array-buffer"}),n=await t.data;return async function(e){const t=new((await(0,S.I)()).MapOfObjectIdentifierSetsDecoder),n=t.decode(new Uint8Array(e)),i=new Map;if(0!==n.error_code)throw new o.A("knowledge-graph:layer-support-utils",n.error_message);const r=t.get_map_of_identifier_sets(),s=r.keys,a=s.size();for(let l=0;l<a;l++){const e=s.get(l),t=r.query_identifier_set(e),n=[];if(t.id_array_type.value===A.GLOBALID_ARRAY){const e=t.get_globalid_array(),i=e.count();for(let t=0;t<i;t++)n.push(e.get_globalid_at(t))}else if(t.id_array_type.value===A.IDENTIFIER_ARRAY){const e=t.get_identifier_array(),i=e.count();for(let t=0;t<i;t++)n.push(e.get_identifier_at(t).toString())}else if(t.id_array_type.value===A.STRING_ARRAY){const e=t.get_string_array(),i=e.count();for(let t=0;t<i;t++)n.push(e.get_string_at(t))}else{if(t.id_array_type.value!==A.OID_ARRAY)throw new o.A("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const e=t.get_oid_array(),i=e.count();for(let t=0;t<i;t++)n.push(e.get_objectid_at(t).toString())}}i.set(e,n)}return t.delete(),i}(new Uint8Array(n))}(e).then((e=>{!function(e,t){for(const[n,i]of e){const e=(0,s.tE)(t.namedTypeDefinitions,n,(()=>({useAllData:!1,members:new Map})));for(const t of i)e.members.has(t)||e.members.set(t,{id:t})}}(e,n)})),n}async function B(e){const t=await(0,S.I)(),n=new t.MapOfObjectIdentifierSets;!function(e,t,n){for(const[i,r]of n.namedTypeDefinitions){if(!r.members||r.useAllData)continue;const n=r.members.keys();let o=!1,s=!0;const a=new t.ObjectIdArray,l=new t.StringArray,u=new t.GlobalIdArray,d=new t.IdentifierArray,c=new t.ObjectIdentifierSet;for(const e of n)s&&(o=!isNaN(Number(e)),s=!1),o?a.add_objectid(Number(e)):(l.add_string(e),u.add_globalid(e)),d.add_identifier(e);c.set_oid_array(a),c.set_string_array(l),c.set_globalid_array(u),c.set_identifier_array(d),a.delete(),l.delete(),u.delete(),d.delete(),e.put_identifier_set(i,c),c.delete()}}(n,t,e);const i=new t.MapOfObjectIdentifierSetsEncoder;try{i.set_map_of_identifier_sets(n),i.encode();const e=i.get_encoding_result();if(0!==e.error.error_code)throw new o.A("knowledge-graph:layer-support-utils",e.error.error_message);const t=structuredClone(e.get_byte_buffer());return i.delete(),t}finally{n.delete()}}async function R(e){const t=await(0,r.A)(e,{responseType:"array-buffer"});return async function(e){const t=new((await(0,S.I)()).FeatureCollectionDecoder),n=t.decode(new Uint8Array(e));if(0!==n.error_code)throw new o.A("knowledge-graph:layer-support-utils",n.error_message);const i=t.get_feature_collection(),r=function(e){const t=new u;t.version=e.version;const n=e.get_query_result();if(0!==n.results_type.value)throw new Error("Got a non-feature collection type");const i=n.get_feature_result(),r=t.queryResult.featureResult;r.objectIdFieldName=i.objectid_field_name,r.exceededTransferLimit=i.exceeded_transfer_limit,r.hasM=i.has_m,r.hasZ=i.has_z,r.geometryType=E.bV[i.geometry_type.value],r.globalIdFieldName=i.globalid_field_name,r.geohashFieldName=i.geohash_field_name;const o=r.uniqueIdField,s=i.unique_id_field;o.name=s.name,o.isSystemMaintained=s.isSystemMaintained;const a=r.geometryProperties,l=i.geometry_properties;a.shapeAreaFieldName=l.shapeAreaFieldName,a.shapeLengthFieldName=l.shapeLengthFieldName,a.units=l.units;const d=r.spatialReference,c=i.spatial_reference;d.wkid=c.wkid,d.latestWkid=c.latestWkid,d.vcsWkid=c.vcsWkid,d.latestVcsWkid=c.latestVcsWkid,d.wkt=c.wkt,r.transform=F(i.transform);const p=r.fields,h=r.fieldNameToAttributeIndexMap,y=i.fields,m=y.size();for(let u=0;u<m;u++){const e=y.get(u),t=C(e);p.push(t),h[t.name]=u,e.delete()}y.delete();const f=r.values,g=i.values_count();for(let u=0;u<g;u++)f.push(i.get_value_at(u));const b=r.features,_=i.features,w=_.size();if(w>0)for(const u of I)if(void 0===h[u])throw new Error("Feature collection missing required attribute: ".concat(u));for(let u=0;u<w;u++){const e=new v,t=_.get(u),n=e.attributes,i=t.attributes_count();for(let l=0;l<i;l++)n.push(t.get_attribute_at(l));const r=t.get_compressed_geometry();r&&(e.compressedGeometry=N(r),e.centroid=N(t.get_centroid()));const o=e.aggregateGeometries,s=t.aggregate_geometries,a=s.size();for(let l=0;l<a;l++){const e=s.get(l),t=N(e);o.push(t),e.delete()}s.delete(),b.push(e),t.delete()}_.delete();const M=r.geometryFields,T=i.geometry_fields,x=T.size();for(let u=0;u<x;u++){const e=T.get(u),t=k(e);M.push(t),e.delete()}return T.delete(),t}(i);return t.delete(),r}(await t.data)}function D(e,t){var n;if(null===e||void 0===e||null===(n=e.queryResult)||void 0===n||!n.featureResult)return t;const r=e.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const l of e.queryResult.featureResult.features){var o;const e=l.attributes[r[i.TYPENAME]],n=(0,s.tE)(t.namedTypeDefinitions,e,(()=>({useAllData:!1,members:new Map}))),u=l.attributes[r[i.ELEMENTUID]];if((null===(o=l.compressedGeometry)||void 0===o||null===(o=o.coords)||void 0===o?void 0:o.length)>0){let e=l.compressedGeometry.lengths;"esriGeometryPoint"===l.compressedGeometry.geometryType&&(e=[]),n.members.set(u,{id:u,linkChartLocation:new a.A(e,l.compressedGeometry.coords)})}else n.members.set(u,{id:u})}return t}!function(e){e[e.featureResult=0]="featureResult",e[e.countResult=1]="countResult",e[e.idsResult=2]="idsResult"}(M||(M={})),function(e){e[e.upperLeft=0]="upperLeft",e[e.lowerLeft=1]="lowerLeft"}(T||(T={})),function(e){e[e.sqlTypeBigInt=0]="sqlTypeBigInt",e[e.sqlTypeBinary=1]="sqlTypeBinary",e[e.sqlTypeBit=2]="sqlTypeBit",e[e.sqlTypeChar=3]="sqlTypeChar",e[e.sqlTypeDate=4]="sqlTypeDate",e[e.sqlTypeDecimal=5]="sqlTypeDecimal",e[e.sqlTypeDouble=6]="sqlTypeDouble",e[e.sqlTypeFloat=7]="sqlTypeFloat",e[e.sqlTypeGeometry=8]="sqlTypeGeometry",e[e.sqlTypeGUID=9]="sqlTypeGUID",e[e.sqlTypeInteger=10]="sqlTypeInteger",e[e.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",e[e.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",e[e.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",e[e.sqlTypeNChar=14]="sqlTypeNChar",e[e.sqlTypeNVarChar=15]="sqlTypeNVarChar",e[e.sqlTypeOther=16]="sqlTypeOther",e[e.sqlTypeReal=17]="sqlTypeReal",e[e.sqlTypeSmallInt=18]="sqlTypeSmallInt",e[e.sqlTypeSqlXml=19]="sqlTypeSqlXml",e[e.sqlTypeTime=20]="sqlTypeTime",e[e.sqlTypeTimestamp=21]="sqlTypeTimestamp",e[e.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",e[e.sqlTypeTinyInt=23]="sqlTypeTinyInt",e[e.sqlTypeVarbinary=24]="sqlTypeVarbinary",e[e.sqlTypeVarchar=25]="sqlTypeVarchar"}(x||(x={})),function(e){e[e.OID_ARRAY=0]="OID_ARRAY",e[e.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",e[e.STRING_ARRAY=2]="STRING_ARRAY",e[e.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(A||(A={}));const O={fetchAndConvertSerializedLinkChart:e=>async function(e){const t=[],n={generateAllSublayers:!1,namedTypeDefinitions:new Map};return e.entitiesUrl&&t.push(R(e.entitiesUrl).then((e=>{D(e,n)}))),e.relationshipsUrl&&t.push(R(e.relationshipsUrl).then((e=>{D(e,n)}))),await Promise.all(t),n}(e)}},1484:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(97255);class r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.lengths=null!==e&&void 0!==e?e:[],this.coords=null!==t&&void 0!==t?t:[]}static fromJSON(e){return new r(e.lengths,e.coords)}static fromRect(e){const[t,n,i,o]=e,s=i-t,a=o-n;return new r([5],[t,n,s,0,0,a,-s,0,0,-a])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}get usedMemory(){return 64+(0,i.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let n=0;n<this.lengths.length;n++){const i=this.lengths[n];if(i<3)continue;let r=this.coords[2*t],o=this.coords[2*t+1];for(let n=1;n<i;n+=1){const i=this.coords[2*(n+t)],s=this.coords[2*(n+t)+1];e+=-.5*(i-r)*(s+o),r=i,o=s}t+=i}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const i=this.lengths[n];for(let n=0;n<i;n++)e(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=i}}deltaDecode(){const e=this.clone(),{coords:t,lengths:n}=e;let i=0;for(const r of n){for(let e=1;e<r;e++)t[2*(i+e)]+=t[2*(i+e)-2],t[2*(i+e)+1]+=t[2*(i+e)-1];i+=r}return e}clone(e){if(0===this.lengths.length)return new r([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),n=this.coords.slice(0,t);return e?(e.set(n),new r(this.lengths,e)):new r(Array.from(this.lengths),Array.from(n))}}},2948:(e,t,n)=>{n.d(t,{MY:()=>g,Td:()=>m,UT:()=>f,e$:()=>b,iW:()=>v,qN:()=>p});var i=n(89379),r=n(69539),o=n(95114),s=n(57491),a=n(47703),l=n(89465),u=n(86659);const d={initializeLayersFromClientData:async(e,t,n)=>{var i;if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===(null===(i=t)||void 0===i?void 0:i.length))return;const r=new Map;for(const s of t)r.set(s,c(e,s));const o=await(0,a.fetchClientDataAtKeys)(e.dataManager.knowledgeGraph,Array.from(r.values()),{requestOptions:{signal:null===n||void 0===n?void 0:n.signal}});for(const s of[...e.layers,...e.tables]){const t=s.objectType.name;if(null==t)continue;const n=o.get(c(e,t));if(n){const e=JSON.parse(n);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),s.read(e,{origin:"service"})}}}},c=(e,t)=>"knowledge-graph"===e.type?"".concat(t,"/Map"):"".concat(t,"/LinkChart/LinkChartSubLayer");async function p(e,t,n){return d.initializeLayersFromClientData(e,t,n)}const h=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],y="#8f8f82";function m(e){return e<0||e>=h.length?new r.A(y):new r.A(h[e])}function f(e){const t=e.toArray();return new l.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:t},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t}]}}]}]}}})}function g(e){let t="ESRI__ID",n=4;for(const i of e)if(i.name){if("name"===i.name.toLowerCase()){t=i.name;break}i.name.toLowerCase().includes("name")?(t=i.name,n=2):"esriFieldTypeString"===i.fieldType&&n>3&&(t=i.name,n=3)}return t}function v(e,t,n){const r={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},a=new o.A({labelExpressionInfo:new s.A({expression:"ESRI__ID"===n?"".concat(t):"$feature.".concat(n)}),labelPlacement:"above-center",symbol:new u.A(r)}),l=new o.A({labelExpressionInfo:new s.A({expression:"'".concat(t,"' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')")}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new u.A((0,i.A)((0,i.A)({},r),{},{yoffset:"12px"}))});return"entity"===e?[a]:[l]}function b(e,t,n){const i={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},r="ESRI__ID"===n?"".concat(e):"$feature.".concat(n);return"point"===t?[new o.A({labelExpressionInfo:new s.A({expression:r}),labelPlacement:"above-center",symbol:new u.A(i)})]:"polyline"===t?[new o.A({labelExpressionInfo:new s.A({expression:r}),labelPlacement:"center-along",repeatLabel:!0,symbol:new u.A(i)})]:"polygon"===t?[new o.A({labelExpressionInfo:new s.A({expression:r}),labelPlacement:"always-horizontal",symbol:new u.A(i)})]:null}},8893:(e,t,n)=>{n.d(t,{k5:()=>d,aq:()=>u,Wq:()=>c});n(39356);var i=n(50076),r=(n(19247),n(65215),n(23701),n(63733),n(33750),n(85646),n(45802));(0,r.O)()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"}),(0,r.O)()({absoluteValue:"absolute-value",multiplier:"multiplier"});const o=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);var s=n(47703),a=n(35380);n(89465),n(86875),n(86659);function l(e,t){var n;const i=new Map;if(null!==(n=t.dataModel)&&void 0!==n&&n.relationshipTypes)for(const o of t.dataModel.relationshipTypes)o.name&&i.set(o.name,[]);for(const o of e){var r;i.has(o.typeName)&&(null===(r=i.get(o.typeName))||void 0===r||r.push(o.id))}return i}async function u(e,t,n){const i=[],r=l(e,t),o={},u=[];for(const[s,a]of r){if(a.length<1)continue;const e="".concat(s,"_ids");o[e]=a,u.push("MATCH (n)-[r:".concat(s,"]->(m) WHERE id(r) in $").concat(e," RETURN id(n), labels(n)[0], id(m), labels(m)[0]"))}if(0===u.length)return[];const d=u.join(" UNION "),c=new a.A({openCypherQuery:d,bindParameters:o}),p=(await(0,s.executeQueryStreaming)(t,c,null===n||void 0===n?void 0:n.requestOptions)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await p.read();if(e)break;for(const n of t)i.push({id:n[0],typeName:n[1]}),i.push({id:n[2],typeName:n[3]})}return i}const d=e=>{var t;return null!==(t=o.get(e))&&void 0!==t?t:"radial-root-centric"};function c(e){if(!e.spatialReference.isWGS84)throw new i.A("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return e.clone().normalize().map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}},9505:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(35143),r=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),s=n(19247),a=n(27544);let l=class extends a.A{constructor(e){super(e),this.layoutGeometry=null}};(0,i._)([(0,r.MZ)({type:s.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,i._)([(0,o.$)("esri.rest.knowledgeGraph.Entity")],l);const u=l},12718:(e,t,n)=>{n.d(t,{P:()=>w});var i=n(35143),r=n(91967),o=n(50076),s=n(76460),a=n(87663),l=n(50346),u=n(34154),d=n(46053),c=(n(81806),n(47249),n(85842)),p=n(76797),h=n(65215),y=n(9624),m=n(80963),f=n(21009),g=n(33750),v=n(8893),b=n(47703),I=n(35380),_=n(97015);let w=class extends r.A{constructor(e){var t,n,i;super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const r=new Map;null!==(t=e.knowledgeGraph.dataModel.entityTypes)&&void 0!==t&&t.forEach((t=>{var n,i;t.name&&(r.set(t.name,"entity"),this._processingCacheUpdatesLookup.set(t.name,[]),e.inclusionModeDefinition&&!(null!==(n=e.inclusionModeDefinition)&&void 0!==n&&n.generateAllSublayers)||this.entityTypeNames.add(t.name),null===(i=t.properties)||void 0===i||i.forEach((e=>{var n;e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(t.name,{name:null!==(n=e.name)&&void 0!==n?n:"",geometryType:e.geometryType})})))})),null!==(n=e.knowledgeGraph.dataModel.relationshipTypes)&&void 0!==n&&n.forEach((t=>{var n,i;t.name&&(r.set(t.name,"relationship"),this._processingCacheUpdatesLookup.set(t.name,[]),e.inclusionModeDefinition&&!(null!==(n=e.inclusionModeDefinition)&&void 0!==n&&n.generateAllSublayers)||this.relationshipTypeNames.add(t.name),null===(i=t.properties)||void 0===i||i.forEach((e=>{var n;e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(t.name,{name:null!==(n=e.name)&&void 0!==n?n:"",geometryType:e.geometryType})})))})),null===(i=e.inclusionModeDefinition)||void 0===i||i.namedTypeDefinitions.forEach(((t,n)=>{var i;if("entity"===r.get(n))this.entityTypeNames.add(n);else{var o;if("relationship"!==r.get(n))return s.A.getLogger(this).warn("A named type, ".concat(n,", was in the inclusion list that wasn't in the data model and will be removed")),void(null===(o=e.inclusionModeDefinition)||void 0===o||o.namedTypeDefinitions.delete(n));this.relationshipTypeNames.add(n)}const l=new Map;null!==(i=t.members)&&void 0!==i&&i.forEach((e=>{(0,a.tE)(this.memberIdTypeLookup,e.id,(()=>new Set)).add(n);const t=this.getById(e.id);t&&l.set(e.id,t)})),this.sublayerCaches.set(n,l)}))}addToLayer(e){e.forEach((e=>{let{typeName:t,id:n}=e;if(!this.inclusionModeDefinition)throw new o.A("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(t)){const e=this.inclusionModeDefinition.namedTypeDefinitions.get(t);e.members||(e.members=new Map),e.members.set(n,{id:n}),(0,a.tE)(this.memberIdTypeLookup,n,(()=>new Set)).add(t)}}else{const e=new Map;e.set(n,{id:n}),this.inclusionModeDefinition.namedTypeDefinitions.set(t,{useAllData:!1,members:e}),(0,a.tE)(this.memberIdTypeLookup,n,(()=>new Set)).add(t)}}))}getById(e){return g.A.getInstance().readFromStoreById(e)}async getData(e,t,n){var i;if(t.objectType.name&&null!==(i=this.inclusionModeDefinition)&&void 0!==i&&i.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let r;if(r=e||new _.A({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){var o,s,a;const e=t.parentCompositeLayer,n=this._processingCacheUpdatesLookup.get(null!==(o=t.objectType.name)&&void 0!==o?o:""),i=r.outFields;i&&1===i.length&&i[0]===f.dr&&"1=1"===r.where||await Promise.all(null!==n&&void 0!==n?n:[]);const l=this.sublayerCaches.has(null!==(s=t.objectType.name)&&void 0!==s?s:"")?Array.from(null===(a=this.sublayerCaches.get(t.objectType.name))||void 0===a?void 0:a.values()):[],u=[];return l.forEach((n=>{if(this.relationshipTypeNames.has(t.objectType.name)){n.geometry=e.relationshipLinkChartDiagramLookup.get(n.attributes[t.objectIdField]);const i=this.memberIdTypeLookup.get(n.attributes[f.Cz]),r=this.memberIdTypeLookup.get(n.attributes[f.KQ]),o=this._isEndEntitySpatial(i,n,f.Cz),s=this._isEndEntitySpatial(r,n,f.KQ);n.attributes[f.BL]=Number(o&&s)}else{n.geometry=e.entityLinkChartDiagramLookup.get(n.attributes[t.objectIdField]);const i=this.geographicLookup.get(t.objectType.name);i&&n.attributes[i.name]?n.attributes[f.BL]=1:n.attributes[f.BL]=0}n.attributes[f.T1]=n.geometry,u.push(n)})),u}return this.retrieveDataFromService(r,t,n)}async getConnectedRecordIds(e,t,n){const i=[];let r="";const o=this._getNamedTypeIdMapFromNodeIds(e);if(t&&0!==(null===t||void 0===t?void 0:t.length)){for(const e of t)r=r+e+"|";r=r.slice(0,-1)}const s={},a=[];for(const[d,c]of o){const e="".concat(d,"_ids");s[e]=c,t&&0!==(null===t||void 0===t?void 0:t.length)?a.push("MATCH (n:".concat(d,") WHERE id(n) IN $").concat(e," WITH n MATCH (n)-[r:").concat(r,"]-(m) RETURN id(r), type(r), id(m), labels(m)[0]")):a.push("MATCH (n:".concat(d,") WHERE id(n) IN $").concat(e," WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]"))}if(!a.length)return i;const l=a.join(" UNION "),u=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new I.A({openCypherQuery:l,bindParameters:s}),{signal:null===n||void 0===n?void 0:n.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await u.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];i.push({id:e[0],typeName:e[1]}),i.push({id:e[2],typeName:e[3]})}}return i}async getRelationshipsBetweenNodes(e,t,n){const i=this._getNamedTypeIdMapFromNodeIds(e);if(0===i.size)return[];const r={relationshipExclusionIds:t,possibleConnectionEntityIds:e},o=[];for(const[u,d]of i.entries()){const e="".concat(u,"_ids");r[e]=d,o.push("MATCH (n:".concat(u,") WHERE id(n) IN $").concat(e," WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)"))}const s=o.join(" UNION "),a=[],l=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new I.A({openCypherQuery:s,bindParameters:r}),{signal:null===n||void 0===n?void 0:n.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await l.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];a.push({id:e[0],typeName:e[1]})}}return a}async getRelationshipsFromNodes(e,t,n,i){const r=this._getNamedTypeIdMapFromNodeIds(e);if(0===r.size||0===t.length)return[];const o={relationshipExclusionIds:n,possibleConnectionEntityIds:t},s=[];for(const[c,p]of r.entries()){const e="".concat(c,"_ids");o[e]=p,s.push("MATCH (n:".concat(c,") WHERE id(n) IN $").concat(e," WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)"))}const a=s.join(" UNION "),l=new Map,u=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,new I.A({openCypherQuery:a,bindParameters:o}),{signal:null===i||void 0===i?void 0:i.signal})).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await u.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];let i=l.get(e[1]);i||(i=new Set,l.set(e[1],i)),i.add(e[0])}}const d=[];for(const[c,p]of l)for(const e of p)d.push({id:e,typeName:c});return d}async refreshCacheContent(e,t,n){var i,r,s,u,d,c;let p=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=arguments.length>4?arguments[4]:void 0;const y=g.A.getInstance(),m=[],v=new Map,_=new Map;null!==(i=this.knowledgeGraph.dataModel.entityTypes)&&void 0!==i&&i.forEach((e=>{e.name&&_.set(e.name,e)})),null!==(r=this.knowledgeGraph.dataModel.relationshipTypes)&&void 0!==r&&r.forEach((e=>{e.name&&_.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const n of this.memberIdTypeLookup.get(e)){var t;v.has(n)?null===(t=v.get(n))||void 0===t||t.push(e):v.set(n,[e])}})):null===(s=this.inclusionModeDefinition)||void 0===s||null===(s=s.namedTypeDefinitions)||void 0===s||s.forEach(((e,t)=>{e.useAllData?v.set(t,null):e.members&&e.members.forEach((e=>{var n;v.has(t)&&null!==v.get(t)?null===(n=v.get(t))||void 0===n||n.push(e.id):v.set(t,[e.id])}))})):(null!==(u=this.knowledgeGraph.dataModel.entityTypes)&&void 0!==u&&u.forEach((e=>{e.name&&v.set(e.name,null)})),null===(d=this.knowledgeGraph.dataModel.entityTypes)||void 0===d||d.forEach((e=>{e.name&&v.set(e.name,null)})));for(const[l,g]of v){var w;const e=new Set(g),i=new Promise(((i,r)=>{(async()=>{var i,r;const s=new Set,u=[];let d,c="",m=!1;if(t||null!==(i=_.get(l))&&void 0!==i&&null!==(i=i.properties)&&void 0!==i&&i.forEach((e=>{e.name&&s.add(e.name)})),n&&this.geographicLookup.has(l)){var v;const e=null===(v=this.geographicLookup.get(l))||void 0===v?void 0:v.name;e&&s.add(e)}if(this.entityTypeNames.has(l))c="MATCH (n:".concat(l,") ").concat(g?"WHERE id(n) IN $ids ":"","return ID(n)"),s.forEach((e=>{c+=", n.".concat(e),u.push(e)}));else{if(!this.relationshipTypeNames.has(l))throw new o.A("knowledge-graph:layer-data-manager","The graph type of ".concat(l," could not be determined. Was this type set in the KG data model and inclusion definition?"));m=!0,c="MATCH ()-[n:".concat(l,"]->() ").concat(g?"WHERE id(n) IN $ids ":"","return ID(n), id(startNode(n)), id(endNode(n))"),s.forEach((e=>{c+=", n.".concat(e),u.push(e)}))}d=new I.A(g?{openCypherQuery:c,bindParameters:{ids:g}}:{openCypherQuery:c});const w=(await(0,b.executeQueryStreaming)(this.knowledgeGraph,d,{signal:null===h||void 0===h?void 0:h.signal})).resultRowsStream.getReader();for(;;){var M,T,x,A;const{done:t,value:n}=await w.read();if(t)break;const i=[];for(let s=0;s<n.length;s++){const t=n[s];let r=0,o=0;const l={properties:{}};for(l.id=t[r],r++,o++,m&&(l.originId=t[r],r++,o++,l.destinationId=t[r],r++,o++,(0,a.tE)(this.nodeConnectionsLookup,l.originId,(()=>new Set)).add(l.id),(0,a.tE)(this.nodeConnectionsLookup,l.destinationId,(()=>new Set)).add(l.id),(0,a.tE)(this.relationshipConnectionsLookup,l.id,(()=>[l.originId,l.destinationId])));r<t.length;r++)l.properties[u[r-o]]=t[r];e.delete(l.id),i.push(l)}const r=y.writeToStore(i,f.dr,null===(M=this.geographicLookup.get(l))||void 0===M?void 0:M.name);this.sublayerCaches.has(l)||this.sublayerCaches.set(l,new Map),p&&!(null!==(T=this.inclusionModeDefinition)&&void 0!==T&&T.namedTypeDefinitions.has(l))&&null!==(x=this.inclusionModeDefinition)&&void 0!==x&&x.namedTypeDefinitions.set(l,{useAllData:!1,members:new Map}),p&&(null===(A=this.inclusionModeDefinition)||void 0===A||!A.namedTypeDefinitions.get(l).members)&&(this.inclusionModeDefinition.namedTypeDefinitions.get(l).members=new Map);const o=this.sublayerCaches.get(l);r.forEach((e=>{var t,n;null!==o&&void 0!==o&&o.set(e.attributes[f.dr],e),p&&(null===(t=this.inclusionModeDefinition)||void 0===t||!t.namedTypeDefinitions.get(l).members.has(e.attributes[f.dr]))&&(null!==(n=this.inclusionModeDefinition)&&void 0!==n&&n.namedTypeDefinitions.get(l).members.set(e.attributes[f.dr],{id:e.attributes[f.dr]}),(0,a.tE)(this.memberIdTypeLookup,e.attributes[f.dr],(()=>new Set)).add(l))}))}const S=null===(r=this.inclusionModeDefinition)||void 0===r?void 0:r.namedTypeDefinitions.get(l);if(S)for(const t of e){var E;null===(E=S.members)||void 0===E||E.delete(t)}})().then((()=>{i(null)})).catch((e=>{"AbortError"===e.name?i(null):r(e)}))}));m.push(i),null===(w=this._processingCacheUpdatesLookup.get(l))||void 0===w||w.push(i)}if(await Promise.all(m),null!==h&&void 0!==h&&null!==(c=h.signal)&&void 0!==c&&c.aborted)throw(0,l.NK)()}removeFromLayer(e){const t=new Set,n=new Set(e.map((e=>e.id)));for(const s of e){var i,r,o;t.add(s.typeName),1===(null===(i=this.memberIdTypeLookup.get(s.id))||void 0===i?void 0:i.size)?this.memberIdTypeLookup.delete(s.id):null===(r=this.memberIdTypeLookup.get(s.id))||void 0===r||r.delete(s.typeName),null===(o=this.inclusionModeDefinition)||void 0===o||o.namedTypeDefinitions.forEach(((e,t)=>{var n;t===s.typeName&&(null===(n=e.members)||void 0===n?void 0:n.has(s.id))&&e.members.delete(s.id)}))}t.forEach((e=>{var t;null===(t=this.sublayerCaches.get(e))||void 0===t||t.forEach(((t,i)=>{var r;n.has(i)&&(null===(r=this.sublayerCaches.get(e))||void 0===r||r.delete(i))}))}))}async retrieveDataFromService(e,t,n){var i,r,s;const a=g.A.getInstance(),l=new Set,d=[];let c,_="",w=[];const M="relationship"===t.graphType,T=null===(i=this.inclusionModeDefinition)||void 0===i||null===(i=i.namedTypeDefinitions)||void 0===i||null===(i=i.get(t.objectType.name))||void 0===i?void 0:i.useAllData,x=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let A=!T&&x?Array.from(x).sort():null;if(null!==(r=this.inclusionModeDefinition)&&void 0!==r&&null!==(r=r.namedTypeDefinitions)&&void 0!==r&&null!==(r=r.get(t.objectType.name))&&void 0!==r&&r.useAllData)(null===(s=this.inclusionModeDefinition)||void 0===s||null===(s=s.namedTypeDefinitions)||void 0===s||null===(s=s.get(t.objectType.name))||void 0===s?void 0:s.useAllData)&&null!=e.objectIds&&(A=e.objectIds);else if(null!=e.objectIds&&A&&A.length>0){const t=e.objectIds;e.objectIds=A.filter((e=>t.includes(e)))}else if(null!=e.objectIds)A=e.objectIds;else{var S,E,N;if(null!==(S=this.inclusionModeDefinition)&&void 0!==S&&S.namedTypeDefinitions.has(t.objectType.name)&&(null===(E=this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name))||void 0===E||!E.members||(null===(N=this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name))||void 0===N||null===(N=N.members)||void 0===N?void 0:N.size)<1))return e.objectIds=[],[];e.objectIds=A}if(null!=e.outFields){const n=e.outFields;n.includes("*")?t.fields.forEach((e=>{l.add(e.name)})):n.forEach((e=>{e!==f.dr&&e!==t.geometryFieldName&&l.add(e)}))}if(null!=e.geometry){var C,k,F;const n=e.geometry;let i;const r=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,s=null===r||void 0===r?void 0:r.spatialReference,a=null===r||void 0===r||null===(C=r.serviceCapabilities)||void 0===C?void 0:C.geometryCapabilities;let f=null===a||void 0===a?void 0:a.geometryMaxBoundingRectangleSizeX,g=null===a||void 0===a?void 0:a.geometryMaxBoundingRectangleSizeY;if("point"===n.type){var L;let e=n;null!==(L=e.spatialReference)&&void 0!==L&&L.isWGS84||(await(0,y.initializeProjection)(e.spatialReference,m.KK),e=(0,y.project)(e,m.KK)),i=new p.A({spatialReference:m.KK,xmin:e.x-1e-4,ymin:e.y-1e-4,xmax:e.x+1e-4,ymax:e.y+1e-4})}else null===n||void 0===n||null===(k=n.extent)||void 0===k||!k.spatialReference||null!==(F=n.spatialReference)&&void 0!==F&&F.isWGS84?i=n.extent:(await(0,y.initializeProjection)(n.extent.spatialReference,m.KK),i=(0,y.project)(n.extent,m.KK));if(f&&g&&s){if(4326!==s.wkid){const e=new p.A({spatialReference:s,xmax:f,ymax:g}),t=(0,y.project)(e,m.KK);f=t.xmax,g=t.ymax}if(i.xmax-i.xmin>f)throw new o.A("knowledge-graph:layer-data-manager","Extent x bounds should be within ".concat(f,"\xb0 latitude, limit exceeded"));if(i.ymax-i.ymin>g)throw new o.A("knowledge-graph:layer-data-manager","Extent y bounds should be within ".concat(g,"\xb0 longitude, limit exceeded"))}if(null!=e.where&&"1=1"!==e.where){const n=await(0,u.GP)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{n.fieldNames.includes(e.name)&&l.add(e.name)}))}_=M?"Match ()-[n:".concat(t.objectType.name,"]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.").concat(t.geometryFieldName,") return ID(n), id(startNode(r)), id(endNode(r))"):"Match (n:".concat(t.objectType.name,") WHERE esri.graph.ST_Intersects($param_filter_geom, n.").concat(t.geometryFieldName,") return ID(n)"),t.geometryFieldName&&l.add(t.geometryFieldName),l.forEach((e=>{_+=", n.".concat(e),d.push(e)})),c=new I.A({openCypherQuery:_,bindParameters:{param_filter_geom:new h.A({rings:(0,v.Wq)(i)})}})}else{let n="";if(null!=e.where&&"1=1"!==e.where){const i=await(0,u.GP)(e.where,t.fieldsIndex);t.fields.forEach((e=>{i.fieldNames.includes(e.name)&&l.add(e.name)}));const r=new Set(["column-reference","string","number","binary-expression"]),o=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let s=!1;const a=e=>{if("column-reference"===e.type)return"n.".concat(e.column);if("string"===e.type)return"'".concat(e.value,"'");if("number"===e.type)return"".concat(e.value);if("binary-expression"===e.type&&r.has(e.left.type)&&r.has(e.right.type)&&o.has(e.operator))return"".concat(a(e.left)," ").concat(e.operator," ").concat(a(e.right));if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+="lower(n.".concat(e.left.args.value[0].column,")");else{if("column-reference"!==e.left.type)return s=!0,"";t+="lower(n.".concat(e.left.column,")")}if(t+=" CONTAINS (","string"!==e.right.type)return s=!0,"";{let n=e.right.value;"%"===n.charAt(0)&&(n=n.slice(1)),"%"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),t+="'".concat(n.toLowerCase(),"')")}return t}return s=!0,""};n=a(i.parseTree),s&&(n="")}let i="";i=M?"Match ()-[n:".concat(t.objectType.name,"]->()"):"Match (n:".concat(t.objectType.name,")");let r=!1;A&&(r=!0,i+=" WHERE ID(n) IN $ids"),n&&(i+=r?" AND":" WHERE",i+=" ".concat(n)),i+=" return ID(n)",M&&(i+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&l.add(t.geometryFieldName),l.forEach((e=>{i+=", n.".concat(e),d.push(e)})),c=new I.A(A?{openCypherQuery:i,bindParameters:{ids:A}}:{openCypherQuery:i})}const B=(await(0,b.executeQueryStreaming)(t.parentCompositeLayer.dataManager.knowledgeGraph,c,n)).resultRowsStream.getReader();for(;;){var R;const{done:e,value:n}=await B.read();if(e)break;const i=[];for(let t=0;t<n.length;t++){const e=n[t];let r=0,o=0;const s={properties:{}};for(s.id=e[r],r++,o++,M&&(s.originId=e[r],r++,o++,s.destinationId=e[r],r++,o++);r<e.length;r++)s.properties[d[r-o]]=e[r];i.push(s)}w=w.concat(a.writeToStore(i,f.dr,null===(R=t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name))||void 0===R?void 0:R.name))}return w}_isEndEntitySpatial(e,t,n){for(const r of null!==e&&void 0!==e?e:[])if(this.entityTypeNames.has(r)){var i;const e=this.geographicLookup.get(r),o=e&&(null===(i=this.sublayerCaches.get(r))||void 0===i?void 0:i.get(t.attributes[n]));if(e&&null!==o&&void 0!==o&&o.attributes[e.name])return!0}return!1}_getNamedTypeIdMapFromNodeIds(e){const t=new Map;return e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const i of this.memberIdTypeLookup.get(e)){var n;if(!this.entityTypeNames.has(i))return;t.has(i)?null===(n=t.get(i))||void 0===n||n.push(e):t.set(i,[e])}})),t}};(0,i._)([(0,d.MZ)()],w.prototype,"knowledgeGraph",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"inclusionModeDefinition",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"entityTypeNames",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"relationshipTypeNames",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"geographicLookup",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"sublayerCaches",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"nodeConnectionsLookup",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"relationshipConnectionsLookup",void 0),(0,i._)([(0,d.MZ)()],w.prototype,"memberIdTypeLookup",void 0),w=(0,i._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],w)},12831:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(35143),r=n(42553),o=n(46053),s=(n(81806),n(76460),n(47249),n(85842));let a=class extends r.A{constructor(e){super(e),this.properties=null}};(0,i._)([(0,o.MZ)({json:{write:!0}})],a.prototype,"properties",void 0),a=(0,i._)([(0,s.$)("esri.rest.knowledgeGraph.GraphObject")],a);const l=a},20176:(e,t,n)=>{n.d(t,{N3:()=>l,Om:()=>a});var i=n(89379),r=n(97255),o=n(90321),s=n(1484);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=i,this.displayId=r}static fromJSON(e){const t=e.geometry?s.A.fromJSON(e.geometry):null,n=e.centroid?s.A.fromJSON(e.centroid):null,i=e.objectId;return new a(t,e.attributes,n,i)}weakClone(){const e=new a(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){var e,t;const n=null===(e=this.geometry)||void 0===e?void 0:e.clone(),r=new a(n,(0,i.A)({},this.attributes),null===(t=this.centroid)||void 0===t?void 0:t.clone(),this.objectId);return r.displayId=this.displayId,r}ensureCentroid(e){var t;return null!==(t=this.centroid)&&void 0!==t||(this.centroid=(0,o.Q)(new s.A,this.geometry,e.hasZ,e.hasM)),this.centroid}get usedMemory(){var e,t;return 128+(0,r.lM)(this.attributes)+(null!==(e=null===(t=this.geometry)||void 0===t?void 0:t.usedMemory)&&void 0!==e?e:0)}}function l(e){var t;return!(null===(t=e.geometry)||void 0===t||null===(t=t.coords)||void 0===t||!t.length)}},21009:(e,t,n)=>{n.d(t,{BL:()=>l,Cz:()=>r,KQ:()=>o,M1:()=>a,T1:()=>s,dr:()=>i});const i="ESRI__ID",r="ESRI__OriginID",o="ESRI__DestID",s="ESRI__LayoutGeometry",a="ESRI__AggregationCount",l="LC.ESRI__IsSpatial"},21617:(e,t,n)=>{n.d(t,{J:()=>I});var i=n(35143),r=(n(81806),n(76460)),o=n(50346),s=n(46053),a=n(21403),l=(n(47249),n(85842)),u=n(80979),d=n(94643),c=n(68134),p=n(49281);const h=new d.A,y=new WeakMap;function m(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function f(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:f(t,e%t):0}let g=0,v=0;function b(){const e=Date.now();let t=!1;for(const i of h){const r=i.deref();var n;if(r){if(r.refreshInterval)e-(null!==(n=y.get(r))&&void 0!==n?n:0)+5>=6e4*r.refreshInterval&&(y.set(r,e),r.refresh(e))}else t=!0}if(t)for(let i=h.length-1;i>=0;i--)h.at(i).deref()||h.removeAt(i)}(0,p.fm)((()=>{const e=Date.now();let t=0;for(const n of h){const i=n.deref();i&&(t=f(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?y.get(i)||y.set(i,e):y.delete(i))}if(t!==v){if(v=t,clearInterval(g),0===v)return void(g=0);g=setInterval(b,v)}}),c.OH);const I=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){m(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,o.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{r.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,i._)([(0,s.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"refreshInterval",void 0),(0,i._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,i._)([(0,s.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,i._)([(0,s.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,i._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},23908:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(35143),r=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),s=n(23701),a=n(27544);let l=class extends a.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,i._)([(0,r.MZ)({type:String,json:{write:!0}})],l.prototype,"originId",void 0),(0,i._)([(0,r.MZ)({type:String,json:{write:!0}})],l.prototype,"destinationId",void 0),(0,i._)([(0,r.MZ)({type:s.A,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,i._)([(0,o.$)("esri.rest.knowledgeGraph.Relationship")],l);const u=l},27544:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(35143),r=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),s=n(12831);let a=class extends s.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,i._)([(0,r.MZ)({type:String,json:{write:!0}})],a.prototype,"typeName",void 0),(0,i._)([(0,r.MZ)({type:String,json:{write:!0}})],a.prototype,"id",void 0),a=(0,i._)([(0,o.$)("esri.rest.knowledgeGraph.GraphNamedObject")],a);const l=a},29380:(e,t,n)=>{n.d(t,{A:()=>d});var i,r=n(35143),o=n(42553),s=n(46053),a=(n(81806),n(76460),n(47249),n(85842)),l=n(23243);let u=i=class extends o.A{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e,t;return new i({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:null!==(e=null===(t=this.symbol)||void 0===t?void 0:t.clone())&&void 0!==e?e:null})}getMeshHash(){const e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}};(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,r._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,r._)([(0,s.MZ)(l.Wp)],u.prototype,"symbol",void 0),u=i=(0,r._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],u);const d=u},30218:(e,t,n)=>{n.d(t,{FJ:()=>I,Dp:()=>_,KV:()=>w});var i=n(35143),r=n(48611),o=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),a=n(80979),l=n(69098),u=n(94643),d=n(42553),c=n(17707),p=n(68002),h=n(49723);const y={write:{overridePolicy:(e,t,n)=>({enabled:!n||"scale"===n.filterMode})}};let m=class extends(l.A.ClonableMixin(d.A)){constructor(e){super(e),this.id=(0,h.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],m.prototype,"id",void 0),(0,i._)([(0,o.MZ)({type:Number,json:y})],m.prototype,"maxScale",void 0),(0,i._)([(0,o.MZ)({type:Number,json:y})],m.prototype,"minScale",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],m.prototype,"title",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],m.prototype,"where",void 0),m=(0,i._)([(0,s.$)("esri.layers.support.DisplayFilter")],m);const f=m;var g=n(64810);let v=class extends(l.A.ClonableMixin(d.A)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(u.A.ofType(f)),this.mode="manual"}writeFilters(e,t,n,i){const r=e.toArray();"scale"===this.mode&&r.sort(((e,t)=>{const n=(0,p.oW)(t.minScale,e.minScale),i=e.maxScale-t.maxScale;return 0===n?i:n})),t[n]=r.map((e=>e.toJSON(i)))}write(e,t){return super.write(e,(0,g.mW)(this,t))}};(0,i._)([(0,o.MZ)({type:String,json:{write:{overridePolicy:(e,t,n)=>({enabled:"manual"===n.filterMode,isRequired:!0})}}})],v.prototype,"activeFilterId",void 0),(0,i._)([(0,o.MZ)({type:u.A.ofType(f),nonNullable:!0,json:{write:!0}})],v.prototype,"filters",void 0),(0,i._)([(0,c.K)("filters")],v.prototype,"writeFilters",null),(0,i._)([(0,o.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],v.prototype,"mode",void 0),v=(0,i._)([(0,s.$)("esri.layers.support.DisplayFilterInfo")],v);const b=v,I=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,i._)([(0,o.MZ)(_)],t.prototype,"displayFilterEnabled",void 0),(0,i._)([(0,o.MZ)(w)],t.prototype,"displayFilterInfo",void 0),t=(0,i._)([(0,s.$)("esri.layers.mixins.DisplayFilteredLayer")],t),t},_={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:a.K,writer(e,t,n){(0,r.sM)(n,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},w={type:b,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:a.K},origins:{"web-scene":{write:!1,read:!1}}}}},30973:(e,t,n)=>{n.d(t,{DQ:()=>c,tn:()=>d});var i=n(89379),r=n(16868),o=n(53430),s=n(75900),a=(n(56362),n(87015),n(81940),n(6929)),l=(n(7198),n(93616),n(53539),n(91904),n(40585)),u=n(17542);function d(e,t){let{displayField:n,editFieldsInfo:i,fields:l,objectIdField:u,title:d}=e;if(!l)return null;const c=y({editFieldsInfo:i,fields:l,objectIdField:u},t);if(!c.length)return null;const p=function(e){const t=(0,o.mB)(e),{titleBase:n}=e;return t?"".concat(n,": {").concat(t.trim(),"}"):null!==n&&void 0!==n?n:""}({titleBase:d,fields:l,displayField:n}),h=[new a.A,new s.A];return new r.A({title:p,content:h,fieldInfos:c})}function c(e){var t;const{title:n,graphic:i}=null!==e&&void 0!==e?e:{},{attributes:r,sourceLayer:o}=null!==i&&void 0!==i?i:{},s=o&&"displayField"in o?o.displayField:null,a=s?null===r||void 0===r?void 0:r[s]:null,l=null!=a?JSON.stringify(a):null,u=null===i||void 0===i||null===(t=i.getObjectId())||void 0===t?void 0:t.toString();return n||l||u||""}const p=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,o.Bz)(e,t);function h(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function y(e,t){var n;const r=null===t||void 0===t?void 0:t.visibleFieldNames;return function(e){let{fields:t,ignoreFieldTypes:n,sortDisabled:i}=e;const r=t;return n&&(t=t.filter((e=>!n.includes(e.type)))),t===r&&(t=t.slice()),!0!==i&&t.sort(h),t}({fields:null!==(n=e.fields)&&void 0!==n?n:[],ignoreFieldTypes:(null===t||void 0===t?void 0:t.ignoreFieldTypes)||g,sortDisabled:null===t||void 0===t?void 0:t.sortDisabled}).map((t=>new l.A({fieldName:t.name,isEditable:(0,o.R$)(t,e),label:t.alias,format:m(t),visible:p(t,(0,i.A)((0,i.A)({},e),{},{visibleFieldNames:r}))})))}function m(e){switch(e.type){case"small-integer":case"integer":case"single":return new u.A({digitSeparator:!0,places:0});case"double":return new u.A({digitSeparator:!0,places:2});case"string":return(0,o.JL)(e.name)?new u.A({digitSeparator:!0,places:0}):void 0;default:return}}function f(e){var t;if("name"===(e.name&&e.name.toLowerCase()))return!0;return"name"===(null===(t=e.alias)||void 0===t?void 0:t.toLowerCase())}const g=["geometry","blob","raster","guid","xml"]},33328:(e,t,n)=>{n.d(t,{F:()=>l});var i=n(81806),r=n(70373),o=n(2413);const s={minX:0,minY:0,maxX:0,maxY:0};function a(e,t,n){(function(e){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3]})(t),e.search(s,n)}class l{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new r.w(9,(0,i.A)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,i)=>{e[t++]=i})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,o.Ie)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),a(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},33376:(e,t,n)=>{n.d(t,{T:()=>r});var i=n(20176);const r={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new i.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},33750:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(19902),r=n(98618),o=n(20176),s=n(21009);class a{constructor(){this._featureLookup=new Map}static getInstance(){return a.instance||(a.instance=new a),a.instance}static resetInstance(){a.instance&&(a.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const n=this.readFromStoreById(e);n&&t.push(n)})),t}readFromStoreById(e){var t;return null!==(t=this._featureLookup.get(e))&&void 0!==t?t:null}writeToStore(e,t,n){const a=[];return e.forEach((e=>{if(null===e||void 0===e||!e.id)return;e.properties||(e.properties=[]);let l,u=null;if(n&&e.properties[n]&&(u=(0,r.Ux)(e.properties[n])),"originId"in e&&"destinationId"in e&&(e.properties[s.Cz]=e.originId,e.properties[s.KQ]=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const r=this._featureLookup.get(e.id),s=JSON.parse(JSON.stringify(Object.assign(r.attributes,e.properties)));n&&e.properties[n]&&(s[n]=(0,i.rS)(e.properties[n])),l=new o.Om(u?JSON.parse(JSON.stringify(u)):null!==r&&void 0!==r&&r.geometry?JSON.parse(JSON.stringify(r.geometry)):null,s,null,e.properties[t])}else l=new o.Om(u?JSON.parse(JSON.stringify(u)):null,e.properties,null,e.properties[t]);this._featureLookup.set("".concat(e.typeName?"".concat(e.typeName,"__").concat(e.id):e.id),l),a.push(l)})),a}}},35380:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(35143),r=n(46053),o=(n(81806),n(76460),n(47249),n(85842)),s=n(13312),a=n(91967);let l=class extends a.A{constructor(e){super(e),this.openCypherQuery=""}};(0,i._)([(0,r.MZ)()],l.prototype,"openCypherQuery",void 0),l=(0,i._)([(0,o.$)("esri.rest.knowledgeGraph.GraphQuery")],l);const u=l;let d=class extends u{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,i._)([(0,r.MZ)()],d.prototype,"bindParameters",void 0),(0,i._)([(0,r.MZ)()],d.prototype,"bindGeometryQuantizationParameters",void 0),(0,i._)([(0,r.MZ)()],d.prototype,"outputQuantizationParameters",void 0),(0,i._)([(0,r.MZ)({type:s.A})],d.prototype,"outputSpatialReference",void 0),(0,i._)([(0,r.MZ)()],d.prototype,"provenanceBehavior",void 0),d=(0,i._)([(0,o.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],d);const c=d},37534:(e,t,n)=>{n.d(t,{Rr:()=>l,fY:()=>d,ne:()=>u});var i=n(35143),r=n(48611),o=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),a=n(51162);function l(e,t,n){if(!e)return null;const i=e.find((e=>!!e.field));if(!i)return null;const r=new a.A;return r.read(i,n),[r]}const u={type:[a.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,n,i){const o=e.find((e=>!!e.field));o&&(0,r.sM)(n,[o.toJSON()],t)}}}},d=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,i._)([(0,o.MZ)(u)],t.prototype,"orderBy",void 0),t=(0,i._)([(0,s.$)("esri.layers.mixins.OrderedLayer")],t),t}},38156:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(35143),r=(n(76460),n(81806),n(47249),n(50076),n(85842)),o=n(12831);let s=class extends o.A{constructor(e){super(e)}};s=(0,i._)([(0,r.$)("esri.rest.knowledgeGraph.ObjectValue")],s);const a=s},40296:(e,t,n)=>{n.d(t,{F0:()=>l,Vx:()=>c,e2:()=>h,f:()=>y});var i=n(89379),r=n(81806),o=n(53084),s=n(8298),a=n(44460);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?a.Cb:"esriGeometryPolyline"===e?a.yM:a.WR}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let d=1;function c(e,t){if((0,r.A)("esri-csp-restrictions"))return()=>(0,i.A)({[t]:null},e);try{let n="this".concat(p(t)," = null;");for(const t in e)n+="this".concat(p(t)," = ").concat(JSON.stringify(e[t]),";");const i=new Function("\n      return class AttributesClass$".concat(d++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return()=>new i}catch(n){return()=>(0,i.A)({[t]:null},e)}}function p(e){return u.test(e)?".".concat(e):'["'.concat(e,'"]')}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,o.o8)(e)}}]}function y(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:s.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},44460:(e,t,n)=>{n.d(t,{Cb:()=>o,HW:()=>d,JR:()=>r,JZ:()=>l,WR:()=>a,b6:()=>c,fT:()=>i,nC:()=>u,yM:()=>s});const i=[252,146,31,255],r=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},d={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},51162:(e,t,n)=>{n.d(t,{A:()=>c});var i,r=n(35143),o=n(45802),s=n(42553),a=n(46053),l=(n(81806),n(76460),n(47249),n(85842));const u=new o.J({asc:"ascending",desc:"descending"});let d=i=class extends s.A{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new i({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,r._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,r._)([(0,a.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"valueExpression",void 0),(0,r._)([(0,a.MZ)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],d.prototype,"order",void 0),d=i=(0,r._)([(0,l.$)("esri.layers.support.OrderByInfo")],d);const c=d},63844:(e,t,n)=>{n.d(t,{A:()=>N});var i,r=n(89379),o=n(35143),s=n(45802),a=n(53084),l=n(76460),u=n(46053),d=n(21403),c=n(6409),p=n(28379),h=n(85842),y=n(17707),m=n(40565),f=n(53430),g=n(71832),v=n(37287),b=n(29380),I=n(23243),_=n(84563),w=n(98976),M=n(94725);const T="percent-of-total",x="field",A=new s.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:T,esriNormalizeByField:x}),S=(0,m.dp)(b.A);let E=i=class extends((0,v.h)(g.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,n){if(!Array.isArray(e))return;let i=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,n),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t}))}writeClassBreakInfos(e,t,n,i){const r=e.map((e=>e.write({},i)));this._areClassBreaksConsecutive()&&r.forEach((e=>delete e.classMinValue)),t[n]=r}castField(e){return null==e?e:"function"==typeof e?(l.A.getLogger(this).error(".field: field must be a string value"),null):(0,m.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&x||n&&T||null,t&&n&&l.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==x&&e!==T||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,n){let i=null;i="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,M.dp)(n)}):S((0,a.o8)(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const n=this.classBreakInfos.length;for(let i=0;i<n;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade)&&l.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let n=t;this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade)&&(n=(0,r.A)((0,r.A)({},n),{},{arcade:await(0,w.lw)()}));const i=this.getBreakIndex(e,n);return-1!==i?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade))return void l.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&null==(null===t||void 0===t?void 0:t.arcade)){const e=await(0,w.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),n=(0,r.A)((0,r.A)({},n),{},{arcade:e})}const i=this.getBreakIndex(e,n);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e,t;return null!==(e=null===(t=this.visualVariables)||void 0===t?void 0:t.reduce(((e,t)=>e+t.getAttributeHash()),""))&&void 0!==e?e:""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),""),".").concat(n,".").concat(this.field,".").concat(this.valueExpression)}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new i({field:this.field,backgroundFillSymbol:null===(e=this.backgroundFillSymbol)||void 0===e?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:null===(t=this.defaultSymbol)||void 0===t?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,a.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,a.o8)(this.visualVariables),legendOptions:(0,a.o8)(this.legendOptions),authoringInfo:(0,a.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.symbols.map((n=>n.collectRequiredFields(e,t))),(0,f.Dx)(e,t,this.valueExpression)];(0,f.rq)(e,t,this.field),(0,f.rq)(e,t,this.normalizationField),await Promise.all(n)}_getBreakIndexForExpression(e,t){const{viewingMode:n,scale:i,spatialReference:r,arcade:o,timeZone:s}=null!==t&&void 0!==t?t:{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=o.arcadeUtils;if(!l){const e=u.createSyntaxTree(a);l=u.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const d=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:n,scale:i,spatialReference:r}),s));return this._getBreakIndexfromInfos(d)}_getBreakIndexForField(e){const t=this.field,n=e.attributes,i=this.normalizationType;let r=parseFloat(n[t]);if(i){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if("log"===i)r=Math.log(r)*Math.LOG10E;else if(i!==T||null==e||isNaN(e)){if(i===x&&!isNaN(t)){if(isNaN(r)||isNaN(t))return-1;r/=t}}else r=r/e*100}return this._getBreakIndexfromInfos(r)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let n=0;n<this.classBreakInfos.length;n++){const i=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return n}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}};(0,o._)([(0,u.MZ)(I.As)],E.prototype,"backgroundFillSymbol",void 0),(0,o._)([(0,u.MZ)({type:[b.A],json:{write:{isRequired:!0}}})],E.prototype,"classBreakInfos",void 0),(0,o._)([(0,p.w)("classBreakInfos")],E.prototype,"readClassBreakInfos",null),(0,o._)([(0,y.K)("classBreakInfos")],E.prototype,"writeClassBreakInfos",null),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],E.prototype,"defaultLabel",void 0),(0,o._)([(0,u.MZ)(I.z4)],E.prototype,"defaultSymbol",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],E.prototype,"field",void 0),(0,o._)([(0,d.w)("field")],E.prototype,"castField",null),(0,o._)([(0,u.MZ)({type:Boolean})],E.prototype,"isMaxInclusive",void 0),(0,o._)([(0,u.MZ)({type:_.A,json:{write:!0}})],E.prototype,"legendOptions",void 0),(0,o._)([(0,u.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],E.prototype,"minValue",null),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],E.prototype,"normalizationField",void 0),(0,o._)([(0,u.MZ)({type:Number,json:{write:!0}})],E.prototype,"normalizationTotal",void 0),(0,o._)([(0,u.MZ)({type:A.apiValues,value:null,json:{type:A.jsonValues,read:A.read,write:A.write}})],E.prototype,"normalizationType",null),(0,o._)([(0,c.e)({classBreaks:"class-breaks"})],E.prototype,"type",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],E.prototype,"valueExpression",void 0),(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],E.prototype,"valueExpressionTitle",void 0),E=i=(0,o._)([(0,h.$)("esri.renderers.ClassBreaksRenderer")],E);const N=E},64810:(e,t,n)=>{n.d(t,{Ch:()=>l,mW:()=>s,u2:()=>a});var i=n(89379),r=n(15941),o=n(34154);function s(e,t){return(0,i.A)((0,i.A)({},t),{},{filterMode:e.mode})}function a(e,t){var n;return null!==(n=u(e,t).next().value)&&void 0!==n?n:null}function l(e,t,n){const i=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:n,maxScale:i}of e.filters)t[0]=Math.max(t[0],p(n)),t[1]=Math.min(t[1],h(i));return t}(e);if(i&&((0,r.gg)(t,i[0])||(0,r.ZH)(n,i[1])))return"";const s=Array.from(u(e,t,n)),a=function(e,t,n){var i,o;if(0===e.length)return!0;const s=p(null===(i=e.at(0))||void 0===i?void 0:i.minScale),a=h(null===(o=e.at(-1))||void 0===o?void 0:o.maxScale);if((0,r.ZH)(s,t)||(0,r.gg)(a,n))return!0;for(let l=0;l<e.length-1;l++){const t=e[l],n=e[l+1];if((0,r.ZH)(p(n.minScale),h(t.maxScale)))return!0}return!1}(s,t,n)?"1=1":s.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,o.IW)(e,t)),"");return a&&"1=1"!==a?a:""}function*u(e,t,n){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const i of e.filters)d(i.minScale,i.maxScale,t,n)&&(yield i)}}function d(e,t,n,i){return e=p(e),n=p(n),t=h(t),!(!(0,r.Sp)(n,e)&&(null!==i&&void 0!==i?i:n)>e)&&!(0,r.Hx)(t,n)&&(void 0===i||!(0,r.Sp)(i,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function p(e){return e||Number.POSITIVE_INFINITY}function h(e){return e||0}},65460:(e,t,n)=>{n.d(t,{BI:()=>f,D3:()=>y,XJ:()=>m,lc:()=>h,mX:()=>v,rU:()=>g,tH:()=>M});var i=n(88685);const r="__begin__",o="__end__",s=new RegExp(r,"ig"),a=new RegExp(o,"ig"),l=new RegExp("^"+r,"i"),u=new RegExp(o+"$","i"),d='"',c=d+" + ",p=" + "+d;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function y(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function m(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function f(e){const t=m(e);switch(t.type){case"conventional":return v(t.expression);case"arcade":return t.expression}return null}function g(e){const t=m(e);switch(t.type){case"conventional":return function(e){const t=null===e||void 0===e?void 0:e.match(b);return(null===t||void 0===t?void 0:t[1].trim())||null}(t.expression);case"arcade":return M(t.expression)}return null}function v(e){let t;return e?(t=(0,i.HC)(e,(e=>r+'$feature["'+e+'"]'+o)),t=l.test(t)?t.replace(l,""):d+t,t=u.test(t)?t.replace(u,""):t+d,t=t.replaceAll(s,c).replaceAll(a,p)):t='""',t}const b=/^\s*\{([^}]+)\}\s*$/i;const I=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,_=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,w=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function M(e){if(!e)return null;let t=I.exec(e)||_.exec(e);return t?t[1]||t[3]:(t=w.exec(e),t?t[2]:null)}},68002:(e,t,n)=>{n.d(t,{X_:()=>s,i1:()=>a,oW:()=>u,zx:()=>l});var i=n(15941),r=n(31633);const o=96;function s(e,t){const n=t||e.extent,i=e.width,s=(0,r.GA)(null===n||void 0===n?void 0:n.spatialReference);return n&&i?n.width/i*s*r.dy*o:0}function a(e,t){return e/((0,r.GA)(t)*r.dy*o)}function l(e,t,n){return function(e,t){return 0===t||(0,i.Sp)(e,t)||e<t}(e,t)&&function(e,t){return 0===t||(0,i.Sp)(e,t)||e>t}(e,n)}function u(e,t){return(0,i.Sp)(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}},68325:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(35143),r=n(42553),o=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),a=n(12831);let l=class extends r.A{constructor(e){super(e),this.path=[]}};(0,i._)([(0,o.MZ)({type:[a.A],json:{write:!0}})],l.prototype,"path",void 0),l=(0,i._)([(0,s.$)("esri.rest.knowledgeGraph.Path")],l);const u=l},70373:(e,t,n)=>{n.d(t,{E:()=>x,w:()=>a});var i=n(18690),r=n(4212),o=(n(81806),n(30015)),s=n(61196);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,t=arguments.length>1?arguments[1]:void 0;this._compareMinX=p,this._compareMinY=h,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),_.prune(),w.prune(),M.prune(),T.prune()}all(e){l(this._data,e)}search(e,t){let n=this._data;const i=this._toBBox;if(b(e,n))for(_.clear();n;){for(let r=0,o=n.children.length;r<o;r++){const o=n.children[r],s=n.leaf?i(o):o;b(e,s)&&(n.leaf?t(o):v(e,s)?l(o,t):_.push(o))}n=_.pop()}}collides(e){let t=this._data;const n=this._toBBox;if(!b(e,t))return!1;for(_.clear();t;){for(let i=0,r=t.children.length;i<r;i++){const r=t.children[i],o=t.leaf?n(r):r;if(b(e,o)){if(t.leaf||v(e,o))return!0;_.push(r)}}t=_.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new S([]),this}remove(e){if(!e)return this;let t,n=this._data,o=null,s=0,a=!1;const l=this._toBBox(e);for(M.clear(),T.clear();n||M.length>0;){var u;if(n||(n=M.pop(),o=M.data[M.length-1],s=null!==(u=T.pop())&&void 0!==u?u:0,a=!0),n.leaf&&(t=(0,i.qh)(n.children,(0,r.zI)(e),n.children.length,n.indexHint),-1!==t))return n.children.splice(t,1),M.push(n),this._condense(M),this;a||n.leaf||!v(n,l)?o?(s++,n=o.children[s],a=!1):n=null:(M.push(n),T.push(s),s=0,o=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,n,i){const r=n-t+1;let o=this._maxEntries;if(r<=o){const i=new S(e.slice(t,n+1));return u(i,this._toBBox),i}i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/o**(i-1)));const s=new E([]);s.height=i;const a=Math.ceil(r/o),l=a*Math.ceil(Math.sqrt(o));I(e,t,n,l,this._compareMinX);for(let u=t;u<=n;u+=l){const t=Math.min(u+l-1,n);I(e,u,t,a,this._compareMinY);for(let n=u;n<=t;n+=a){const r=Math.min(n+a-1,t);s.children.push(this._build(e,n,r,i-1))}}return u(s,this._toBBox),s}_insert(e,t,n){const i=this._toBBox,r=n?e:i(e);M.clear();const o=function(e,t,n,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==n;){let n,i=1/0,r=1/0;for(let o=0,s=t.children.length;o<s;o++){const s=t.children[o],a=y(s),l=f(e,s)-a;l<r?(r=l,i=a<i?a:i,n=s):l===r&&a<i&&(i=a,n=s)}t=n||t.children[0]}return t}(r,this._data,t,M);for(o.children.push(e),c(o,r);t>=0&&M.data[t].children.length>this._maxEntries;)this._split(M,t),t--;!function(e,t,n){for(let i=n;i>=0;i--)c(t.data[i],e)}(r,M,t)}_split(e,t){const n=e.data[t],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const o=this._chooseSplitIndex(n,r,i);if(!o)return;const s=n.children.splice(o,n.children.length-o),a=n.leaf?new S(s):new E(s);a.height=n.height,u(n,this._toBBox),u(a,this._toBBox),t?e.data[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this._data=new E([e,t]),this._data.height=e.height+1,u(this._data,this._toBBox)}_chooseSplitIndex(e,t,n){let i,r,o;i=r=1/0;for(let s=t;s<=n-t;s++){const t=d(e,0,s,this._toBBox),a=d(e,s,n,this._toBBox),l=g(t,a),u=y(t)+y(a);l<i?(i=l,o=s,r=u<r?u:r):l===i&&u<r&&(r=u,o=s)}return o}_chooseSplitAxis(e,t,n){const i=e.leaf?this._compareMinX:p,r=e.leaf?this._compareMinY:h;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,r)&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const r=this._toBBox,o=d(e,0,t,r),s=d(e,n-t,n,r);let a=m(o)+m(s);for(let l=t;l<n-t;l++){const t=e.children[l];c(o,e.leaf?r(t):t),a+=m(o)}for(let l=n-t-1;l>=t;l--){const t=e.children[l];c(s,e.leaf?r(t):t),a+=m(s)}return a}_condense(e){for(let t=e.length-1;t>=0;t--){const n=e.data[t];if(0===n.children.length)if(t>0){const r=e.data[t-1],o=r.children;o.splice((0,i.qh)(o,n,o.length,r.indexHint),1)}else this.clear();else u(n,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){let n=e;for(w.clear();n;){var i;if(!0===n.leaf)for(const e of n.children)t((0,r.zI)(e));else w.pushArray(n.children);n=null!==(i=w.pop())&&void 0!==i?i:null}}function u(e,t){d(e,0,e.children.length,t,e)}function d(e,t,n,i,r){r||(r=new S([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o,s=t;s<n;s++)o=e.children[s],c(r,e.leaf?i(o):o);return r}function c(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function p(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function y(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function m(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function g(e,t){const n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}function v(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function b(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function I(e,t,n,i,r){const o=[t,n];for(;o.length;){const t=o.pop(),n=o.pop();if(t-n<=i)continue;const a=n+Math.ceil((t-n)/i/2)*i;(0,s.q)(e,a,n,t,r),o.push(n,a,a,t)}}const _=new o.A,w=new o.A,M=new o.A,T=new o.A({deallocator:void 0});class x{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class A extends x{constructor(){super(...arguments),this.height=1,this.indexHint=new i.vW}}class S extends A{constructor(e){super(),this.children=e,this.leaf=!0}}class E extends A{constructor(e){super(),this.children=e,this.leaf=!1}}},72547:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(18690),r=n(50076),o=n(54099),s=n(76460),a=n(42294),l=n(2413),u=n(98618),d=n(33328),c=n(55167),p=n(33376);const h=(0,a.vt)();class y{constructor(e){this.geometryInfo=e,this._boundsStore=new d.F,this._featuresById=new Map,this._usedMemory=0,this.events=new o.A,this.featureAdapter=p.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,i,r]=this.fullBounds;return{xmin:t,ymin:n,xmax:i,ymax:r,spatialReference:(0,c.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(i.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,a.Jt)(h,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(e){var t,n,i,o,a;if(!e)return;const d=e.objectId;if(null==d)return void s.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new r.A("featurestore:invalid-feature","feature id is missing",{feature:e}));const c=this._featuresById.get(d);let p;if(c?(e.displayId=c.displayId,p=this._boundsStore.get(d),this._boundsStore.delete(d),this._usedMemory-=null!==(t=null===(n=this.estimateFeatureUsedMemory)||void 0===n?void 0:n.call(this,c))&&void 0!==t?t:0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),null===(i=e.geometry)||void 0===i||null===(i=i.coords)||void 0===i||!i.length)return this._boundsStore.set(d,null),void this._featuresById.set(d,e);p=(0,u.jQ)(null!=p?p:(0,l.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=p&&this._boundsStore.set(d,p),this._featuresById.set(d,e),this._usedMemory+=null!==(o=null===(a=this.estimateFeatureUsedMemory)||void 0===a?void 0:a.call(this,e))&&void 0!==o?o:0}_upsert(e){var t,n,i,o,a;const d=null===e||void 0===e?void 0:e.objectId;if(null==d)return s.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new r.A("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const c=this._featuresById.get(d);if(!c)return this._add(e),e;this._usedMemory-=null!==(t=null===(n=this.estimateFeatureUsedMemory)||void 0===n?void 0:n.call(this,c))&&void 0!==t?t:0;const{geometry:p,attributes:h}=e;for(const r in h)c.attributes[r]=h[r];return p&&(c.geometry=p,this._boundsStore.set(d,null!==(i=(0,u.jQ)((0,l.vt)(),p,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&void 0!==i?i:null)),this._usedMemory+=null!==(o=null===(a=this.estimateFeatureUsedMemory)||void 0===a?void 0:a.call(this,c))&&void 0!==o?o:0,c}_remove(e){var t,n;null!=this.onFeatureRemove&&this.onFeatureRemove(e);const i=e.objectId;return this._boundsStore.delete(i),this._featuresById.delete(i),this._usedMemory-=null!==(t=null===(n=this.estimateFeatureUsedMemory)||void 0===n?void 0:n.call(this,e))&&void 0!==t?t:0,e}}},75146:(e,t,n)=>{n.d(t,{A:()=>i});class i{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new i;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},76350:(e,t,n)=>{n.d(t,{p:()=>l});var i=n(81806),r=n(76460),o=n(44135),s=n(1900),a=n(53430);function l(){return{fields:{type:[o.A],value:null,set:function(e){if(e&&(0,i.A)("big-integer-warning-enabled")){const i=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(i.length){var t,n;const e=i.map((e=>"'".concat(e.name,"'"))).join(", ");r.A.getLogger(this).warn("#fields","Layer (title: '".concat(null!==(t=this.title)&&void 0!==t?t:"no title","', id: '").concat(null!==(n=this.id)&&void 0!==n?n:"no id","') references big-integer field(s): ").concat(e,", support for which is experimental. Only integers less than ").concat(Number.MAX_SAFE_INTEGER," (Number.MAX_SAFE_INTEGER) are supported."))}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return s.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(null===e||void 0===e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const n of e){var t;(null===(t=this.fieldsIndex)||void 0===t?void 0:t.has(n))||r.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field","Invalid field ".concat(n," found in outFields"),{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},78817:(e,t,n)=>{n.d(t,{B:()=>h,e:()=>y});var i=n(35143),r=n(46053),o=(n(81806),n(76460),n(47249),n(28379)),s=n(85842),a=n(80979),l=n(53430),u=n(83982),d=n(90115),c=n(59187),p=n(93030);const h={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.K}}},y=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const n=t.timeInfo.exportOptions;if(!n)return null;const i=n.timeOffset,r=d.j.fromJSON(n.timeOffsetUnits);return i&&r?new p.A({value:i,unit:r}):null}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,i._)([(0,r.MZ)({type:c.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,i._)([(0,r.MZ)({type:p.A})],t.prototype,"timeOffset",void 0),(0,i._)([(0,o.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,i._)([(0,r.MZ)({value:null,type:u.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,i._)([(0,r.MZ)(h)],t.prototype,"useViewTime",void 0),t=(0,i._)([(0,s.$)("esri.layers.mixins.TemporalLayer")],t),t}},83716:(e,t,n)=>{n.d(t,{A:()=>se});var i=n(89379),r=n(53986),o=n(35143),s=n(16868),a=n(53084),l=n(76460),u=n(77717),d=(n(16783),n(46053)),c=(n(81806),n(85842)),p=n(17707),h=n(49140),y=n(76797),m=n(19247),f=n(65215),g=n(23701),v=n(9624),b=n(13312),I=n(80963),_=n(31608),w=n(25515),M=n(72547),T=n(48094),x=n(40296),A=n(21009);n(47249);const S=(0,n(76350).p)(),E=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,o._)([(0,d.MZ)(S.fields)],t.prototype,"fields",void 0),(0,o._)([(0,d.MZ)(S.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,o._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],t),t};var N=n(2948),C=n(65624),k=n(30218),F=n(74440),L=n(52908),B=n(37534),R=n(21617),D=n(5682),O=n(78817),j=n(95363),P=n(54490),Z=n(44135),G=n(53430),q=n(95114),V=n(27937),z=n(83982),Y=n(5766),U=n(86616),J=n(49176),H=n(77725),Q=n(97015),W=n(30973),$=n(94439),X=n(59989);const K=["target","writer","overridePolicy"];function ee(e){if(!e.json)return e;e.json.write=te(e.json.write);const t=e.json.origins;if(!t)return e;let n;for(n in t){const e=t[n];e&&(e.write=te(e.write))}return e}function te(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=function(e){const{target:t,writer:n,overridePolicy:o}=e,s=(0,r.A)(e,K);return function(e,t){const n=ie.call(this,e,t);return n.enabled?(0,i.A)((0,i.A)({},s),n):n}}(e)),e):!0===e?ne():e}function ne(){return{overridePolicy:ie}}function ie(e,t){const n=!!this.geometryType;let r={enabled:n};return n&&(r=(0,i.A)((0,i.A)({},r),re.call(this,e,t))),r}function re(e,t){return{ignoreOrigin:this.originIdOf(t)>h.Gr.DEFAULTS}}let oe=class extends(E((0,k.FJ)((0,L.J)((0,F.F)((0,C.dM)((0,B.fY)((0,O.e)((0,D.j)((0,R.J)((0,u.P)(w.A))))))))))){constructor(e){var t;super(e),t=this,this.blendMode="normal",this.capabilities=(0,x.f)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=A.dr,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new X.A(e.port1,{channel:e,client:{queryFeatures:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Q.A.fromJSON(e);return t.queryFeaturesJSON(i,n)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){var e;const t=[];return null!==(e=this.objectType)&&void 0!==e&&null!==(e=e.properties)&&void 0!==e&&e.forEach((e=>{const n="esriFieldTypeOID"===e.fieldType?"esriFieldTypeInteger":e.fieldType;t.push(Z.A.fromJSON({name:e.name,type:n,alias:e.alias,defaultValue:e.defaultValue,editable:e.editable,nullable:e.nullable}))})),t.push(Z.A.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),Z.A.fromJSON({name:A.M1,type:"esriFieldTypeInteger",alias:A.M1,editable:!1}),Z.A.fromJSON({name:A.BL,type:"esriFieldTypeInteger",alias:A.BL,editable:!1})),t}get geometryType(){var e,t,n;if("link-chart"===(null===(e=this.parentCompositeLayer)||void 0===e?void 0:e.type))return"relationship"===this.graphType?"polyline":"point";const i=null===(t=this.parentCompositeLayer)||void 0===t?void 0:t.dataManager.geographicLookup.get(null===(n=this.objectType)||void 0===n?void 0:n.name),r=null===i||void 0===i?void 0:i.geometryType;return r&&"esriGeometryNull"!==r?_.gy.fromJSON(r):null}get geometryFieldName(){var e,t,n,i;if("link-chart"===(null===(e=this.parentCompositeLayer)||void 0===e?void 0:e.type))return A.T1;const r=null===(t=this.parentCompositeLayer)||void 0===t?void 0:t.dataManager.geographicLookup.get(null===(n=this.objectType)||void 0===n?void 0:n.name);return null!==(i=null===r||void 0===r?void 0:r.name)&&void 0!==i?i:null}get graphTypeName(){var e;return null===(e=this.objectType)||void 0===e?void 0:e.name}get hasM(){var e,t,n,i;const r=null===(e=this.parentCompositeLayer)||void 0===e?void 0:e.dataManager.geographicLookup.get(null===(t=this.objectType)||void 0===t?void 0:t.name),o=null===r||void 0===r?void 0:r.name,s=o?null===(n=this.objectType)||void 0===n||null===(n=n.properties)||void 0===n?void 0:n[o]:null;return null!==(i=null===s||void 0===s?void 0:s.hasM)&&void 0!==i&&i}get hasZ(){var e,t,n,i;const r=null===(e=this.parentCompositeLayer)||void 0===e?void 0:e.dataManager.geographicLookup.get(null===(t=this.objectType)||void 0===t?void 0:t.name),o=null===r||void 0===r?void 0:r.name,s=o?null===(n=this.objectType)||void 0===n||null===(n=n.properties)||void 0===n?void 0:n[o]:null;return null!==(i=null===s||void 0===s?void 0:s.hasZ)&&void 0!==i&&i}set labelingInfo(e){this._set("labelingInfo",e)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");const e=this.objectType.properties?(0,N.MY)(this.objectType.properties):"ESRI__ID";return"link-chart"===this.parentCompositeLayer.type?(0,N.iW)(this.graphType,this.graphTypeName,e):(0,N.e$)(this.graphTypeName,this.geometryType,e)}set renderer(e){(0,G.yp)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){var e,t,n,i;if(this._isOverridden("renderer"))return this._get("renderer");const r=null===(e=this.parentCompositeLayer)||void 0===e||null===(e=e.dataManager)||void 0===e||null===(e=e.knowledgeGraph)||void 0===e?void 0:e.dataModel,o=[...null!==(t=null===r||void 0===r?void 0:r.entityTypes)&&void 0!==t?t:[],...null!==(n=null===r||void 0===r?void 0:r.relationshipTypes)&&void 0!==n?n:[]].map((e=>e.name)).indexOf(this.graphTypeName),s=(0,N.Td)(o);if("link-chart"===(null===(i=this.parentCompositeLayer)||void 0===i?void 0:i.type)){if("relationship"===this.graphType)return new Y.A({type:"simple",symbol:(0,N.UT)(s)});const e=(0,U.r)((0,x.F0)(_.gy.toJSON("point")).renderer);return(0,$.dt)(e.symbol,s),e}const a=(0,U.r)((0,x.F0)(_.gy.toJSON(this.geometryType)).renderer);return(0,$.dt)(a.symbol,s),a}get spatialReference(){var e,t;return null!==(e=null===(t=this.parentCompositeLayer)||void 0===t||null===(t=t.dataManager)||void 0===t||null===(t=t.knowledgeGraph)||void 0===t||null===(t=t.dataModel)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:b.A.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=null!==e&&void 0!==e?e:"Layer"}createPopupTemplate(e){return(0,W.tn)(this,e)}createQuery(){return new Q.A({where:"1=1",outFields:["*"]})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){return null}async queryFeatures(e,t){await this.load();const{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(e),r=H.A.fromJSON(await i.executeQuery(n.toJSON(),null===t||void 0===t?void 0:t.signal));return r.features.forEach((e=>{e.sourceLayer=this})),r}async queryFeaturesJSON(e,t){await this.load();const{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(e);return await i.executeQuery(n.toJSON(),null===t||void 0===t?void 0:t.signal)}async queryFeatureCount(e,t){await this.load();const{resolvedQuery:n,queryEngine:i}=await this._setupQueryObjects(e);return i.executeQueryForCount(n.toJSON(),null===t||void 0===t?void 0:t.signal)}async queryExtent(){var e,t,n,r;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;await this.load();const a=(0,i.A)((0,i.A)({},o),{},{returnGeometry:!0}),{resolvedQuery:l,queryEngine:u}=await this._setupQueryObjects(a),d=await u.executeQueryForExtent(l.toJSON(),null===s||void 0===s?void 0:s.signal);let c;return c=null!=(null===(e=d.extent)||void 0===e?void 0:e.xmin)&&null!=(null===(t=d.extent)||void 0===t?void 0:t.xmax)&&null!=(null===(n=d.extent)||void 0===n?void 0:n.ymin)&&null!=(null===(r=d.extent)||void 0===r?void 0:r.ymax)?new y.A(d.extent):new y.A,{count:d.count,extent:c}}async queryObjectIds(e,t){await this.load();const n=Q.A.from(e);let i;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)i=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(n,this,t);i=this.loadQueryEngine(e)}return await i.executeQueryForIds(n.toJSON(),null===t||void 0===t?void 0:t.signal)}loadQueryEngine(e){var t;const n=new M.A({geometryType:_.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),i=new T.do({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:_.gy.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:null===(t=this.timeInfo)||void 0===t?void 0:t.toJSON(),featureStore:n});return i.featureStore.addMany(e),i}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new Q.A({where:"1=1",outFields:[A.dr]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>(0,G.sv)(this.timeInfo,this.fieldsIndex)))),Promise.resolve(this)}async _setupQueryObjects(e,t){var n;const i=Q.A.from(e),r=i.geometry;if(r&&!(null!==(n=r.spatialReference)&&void 0!==n&&n.isWGS84)&&(await(0,v.initializeProjection)(r.spatialReference,I.KK),i.geometry=(0,v.project)(r instanceof f.A||r instanceof g.A||r instanceof m.A?r:r.extent,I.KK)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)return{resolvedQuery:i,queryEngine:this._cachedQueryEngine};const o=await this.parentCompositeLayer.dataManager.getData(i,this,t);return{resolvedQuery:i,queryEngine:this.loadQueryEngine(o)}}};(0,o._)([(0,d.MZ)(ee((0,a.o8)(C.sU)))],oe.prototype,"blendMode",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"capabilities",void 0),(0,o._)([(0,d.MZ)({json:{origins:{"web-scene":{write:!1}},write:ne()}})],oe.prototype,"charts",void 0),(0,o._)([(0,d.MZ)({readOnly:!0})],oe.prototype,"defaultPopupTemplate",null),(0,o._)([(0,d.MZ)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],oe.prototype,"definitionExpression",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"displayField",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(k.Dp)))],oe.prototype,"displayFilterEnabled",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(k.KV)))],oe.prototype,"displayFilterInfo",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(C.LF)))],oe.prototype,"effect",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"elevationInfo",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(F.Y)))],oe.prototype,"featureEffect",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(P.d)))],oe.prototype,"featureReduction",null),(0,o._)([(0,d.MZ)()],oe.prototype,"fields",null),(0,o._)([(0,d.MZ)()],oe.prototype,"geometryType",null),(0,o._)([(0,d.MZ)()],oe.prototype,"geometryFieldName",null),(0,o._)([(0,d.MZ)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],oe.prototype,"graphType",void 0),(0,o._)([(0,d.MZ)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],oe.prototype,"graphTypeName",null),(0,o._)([(0,d.MZ)()],oe.prototype,"hasM",null),(0,o._)([(0,d.MZ)()],oe.prototype,"hasZ",null),(0,o._)([(0,d.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],oe.prototype,"id",void 0),(0,o._)([(0,d.MZ)({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],oe.prototype,"labelsVisible",void 0),(0,o._)([(0,d.MZ)({type:[q.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:function(e,t,n){const i=[["ESRI__AGGREGATION_COUNT",A.M1],["ESRI__ORIGIN_ID",A.Cz],["ESRI__DESTINATION_ID",A.KQ],["ESRI__LAYOUT_GEOMETRY",A.T1]];try{for(const t of e)for(const[e,n]of i){var r,o;t.labelExpression=null===(r=t.labelExpression)||void 0===r?void 0:r.replaceAll(e,n),(null===(o=t.labelExpressionInfo)||void 0===o?void 0:o.expression)&&(t.labelExpressionInfo.expression=t.labelExpressionInfo.expression.replaceAll(e,n))}}catch(s){l.A.getLogger(this).warn("Error updating labelingInfo",s)}return(0,V.w)(e,t,n)},write:ne()}})],oe.prototype,"labelingInfo",null),(0,o._)([(0,d.MZ)({readOnly:!0,json:{read:!1,write:{writer(e,t){var n;switch(null===(n=this.parentCompositeLayer)||void 0===n?void 0:n.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],oe.prototype,"layerType",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(j.fV)))],oe.prototype,"legendEnabled",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(j.hG)))],oe.prototype,"maxScale",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(j.hn)))],oe.prototype,"minScale",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"objectIdField",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"objectType",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(j.ke)))],oe.prototype,"opacity",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(B.ne)))],oe.prototype,"orderBy",void 0),(0,o._)([(0,d.MZ)({clonable:!1})],oe.prototype,"parent",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"parentCompositeLayer",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(j.M6)))],oe.prototype,"popupEnabled",void 0),(0,o._)([(0,d.MZ)({type:s.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],oe.prototype,"popupTemplate",void 0),(0,o._)([(0,d.MZ)({type:Number,json:{write:{overridePolicy:re}}})],oe.prototype,"refreshInterval",void 0),(0,o._)([(0,d.MZ)({types:J.Hg,json:{name:"layerDefinition.drawingInfo.renderer",write:ne()}})],oe.prototype,"renderer",null),(0,o._)([(0,d.MZ)()],oe.prototype,"source",void 0),(0,o._)([(0,d.MZ)()],oe.prototype,"spatialReference",null),(0,o._)([(0,d.MZ)({type:z.A,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],oe.prototype,"timeInfo",null),(0,o._)([(0,d.MZ)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],oe.prototype,"title",null),(0,o._)([(0,p.K)("title")],oe.prototype,"writeTitle",null),(0,o._)([(0,d.MZ)({json:{read:!1}})],oe.prototype,"type",void 0),(0,o._)([(0,d.MZ)(ee((0,a.o8)(O.B)))],oe.prototype,"useViewTime",void 0),(0,o._)([(0,d.MZ)({type:Boolean,json:{name:"visibility",write:ne()}})],oe.prototype,"visible",void 0),oe=(0,o._)([(0,c.$)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],oe);const se=oe},83982:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(35143),r=n(69098),o=n(42553),s=n(46053),a=(n(81806),n(76460),n(47249),n(28379)),l=n(85842),u=n(17707),d=n(59187),c=n(93030),p=n(67478);function h(e,t){return c.A.fromJSON({value:e,unit:t})}let y=class extends(r.A.ClonableMixin(o.A)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?d.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=(null===e||void 0===e?void 0:e.start)&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?h(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?h(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){var n,i;t.timeInterval=null!==(n=null===e||void 0===e?void 0:e.toJSON().value)&&void 0!==n?n:null,t.timeIntervalUnits=null!==(i=null===e||void 0===e?void 0:e.toJSON().unit)&&void 0!==i?i:null}};(0,i._)([(0,s.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],y.prototype,"cumulative",void 0),(0,i._)([(0,s.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"endField",void 0),(0,i._)([(0,s.MZ)({type:d.A,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"fullTimeExtent",void 0),(0,i._)([(0,a.w)("fullTimeExtent",["timeExtent"])],y.prototype,"readFullTimeExtent",null),(0,i._)([(0,u.K)("fullTimeExtent")],y.prototype,"writeFullTimeExtent",null),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"hasLiveData",void 0),(0,i._)([(0,s.MZ)({type:c.A,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"interval",void 0),(0,i._)([(0,a.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],y.prototype,"readInterval",null),(0,i._)([(0,u.K)("interval")],y.prototype,"writeInterval",null),(0,i._)([(0,s.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"startField",void 0),(0,i._)([(0,s.MZ)((0,p.P6)("timeReference",!0))],y.prototype,"timeZone",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"trackIdField",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],y.prototype,"useTime",void 0),(0,i._)([(0,s.MZ)({type:[Date],json:{read:!1}})],y.prototype,"stops",void 0),y=(0,i._)([(0,l.$)("esri.layers.support.TimeInfo")],y);const m=y},84202:(e,t,n)=>{n.d(t,{A7:()=>u,Cx:()=>d,Hk:()=>c,JJ:()=>m,SF:()=>p,UK:()=>l,jM:()=>h,x3:()=>y});n(81806);var i=n(86875),r=n(7246),o=n(76940),s=n(86659),a=n(44460);const l=o.A.fromJSON(a.Cb),u=r.A.fromJSON(a.yM),d=i.A.fromJSON(a.WR),c=s.A.fromJSON(a.JZ);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return d}return null}const h=o.A.fromJSON(a.nC),y=r.A.fromJSON(a.HW),m=i.A.fromJSON(a.b6)},85646:(e,t,n)=>{n.d(t,{$C:()=>v,Hh:()=>a,J:()=>d,JT:()=>u,Tu:()=>f,Wg:()=>g,Xq:()=>I,i6:()=>_,pM:()=>m,tx:()=>l,vJ:()=>b});var i=n(89379),r=n(28899);let o,s=null;function a(){return o||(o=n.e(3884).then(n.bind(n,83884)).then((e=>e.l)).then((e=>{let{default:t}=e;return t({locateFile:e=>(0,r.s)("esri/libs/linkchartlayout/".concat(e))})})).then((e=>{!function(e){s=e}(e)})),o)}var l,u,d,c;!function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot",e[e.IsOld=8]="IsOld"}(l||(l={})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Canceled=2]="Canceled"}(u||(u={})),function(e){e[e.Regular=0]="Regular",e[e.Curved=1]="Curved",e[e.Recursive=2]="Recursive"}(d||(d={})),function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom"}(c||(c={}));const p={none:0,"start-only":1,"start-and-end":2};function h(e){var t,n,r,o;const s=(0,i.A)((0,i.A)((0,i.A)({},{timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0}),null!==(t=null===e||void 0===e?void 0:e.toJSON())&&void 0!==t?t:{}),{},{eventsTicksVisualization:null!==(n=null===e||void 0===e?void 0:e.eventsTicksVisualization)&&void 0!==n?n:"start-and-end"});return(0,i.A)((0,i.A)({},s),{},{timeDirection:{value:null!==(r=c[s.timeDirection])&&void 0!==r?r:c.right},eventsTicksVisualization:{value:null!==(o=p[s.eventsTicksVisualization])&&void 0!==o?o:p["start-and-end"]}})}function y(e,t,n,i,r,o){const a=n.length,l=r.length,d=Float64Array.BYTES_PER_ELEMENT,c=Uint32Array.BYTES_PER_ELEMENT,p=Uint8Array.BYTES_PER_ELEMENT,h=16+a*(p+2*d)+l*(2*c),y=s._malloc(h);try{const p=y+16-y%16,h=p+a*d,m=h+a*d,f=m+l*c,g=f+l*c,v=()=>[s.HEAPF64.subarray(p>>3,(p>>3)+a),s.HEAPF64.subarray(h>>3,(h>>3)+a),s.HEAPU32.subarray(m>>2,(m>>2)+l),s.HEAPU32.subarray(f>>2,(f>>2)+l),s.HEAPU8.subarray(g,g+a)],[b,I,_,w,M]=v();b.set(n),I.set(i),_.set(r),w.set(o),M.set(t);const T=e(a,g,p,h,l,m,f);let x=null,A=null;if(T.value===u.Success){const e=s.getLayoutLinksTypes(),t=s.getLayoutLinksVerticesEndIndices(),n=s.getLayoutLinksVertices(),i=s.countLayoutLinksVertices();!l||e&&t?i&&!n?T.value=u.Error:(x={types:new Uint8Array(s.HEAPU8.subarray(e,e+l)),vertexEndIndex:new Uint32Array(s.HEAPU32.subarray(t>>2,(t>>2)+l)),vertices:new Float64Array(s.HEAPF64.subarray(n>>3,(n>>3)+2*i))},A=s.getAuxiliaryGraphicElements()):T.value=u.Error}const[S,E,N,C,k]=v();return n.set(S),i.set(E),r.set(N),o.set(C),t.set(k),{status:T.value,links:x,graphics:A}}finally{s._free(y),s.cleanupLayout()}}var m,f,g,v,b,I,_,w,M;!function(e){e.getMinIdealEdgeLength=function(){return s.getMinIdealEdgeLength()},e.apply=function(e,t,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return y(((t,n,i,r,o,d,c)=>s.applyForceDirectedLayout(e,t,n,i,r,o,d,c,a,l,u)),t,n,i,r,o)}}(m||(m={})),function(e){e.apply=function(e,t,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;return y(((t,n,i,r,o,d,c)=>s.applyCommunityLayout(e,t,n,i,r,o,d,c,a,l,u)),t,n,i,r,o)}}(f||(f={})),function(e){e.apply=function(e,t,n,i,r,o){return y(((t,n,i,r,o,a,l)=>s.applySimpleLayout(e,t,n,i,r,o,a,l)),t,n,i,r,o)}}(g||(g={})),function(e){e.apply=function(e,t,n,i,r,o){return y(((t,n,i,r,o,a,l)=>s.applyHierarchicalLayout(e,t,n,i,r,o,a,l)),t,n,i,r,o)}}(v||(v={})),function(e){e.apply=function(e,t,n,i,r,o){return y(((t,n,i,r,o,a,l)=>s.applyRadialTreeLayout(e,t,n,i,r,o,a,l)),t,n,i,r,o)}}(b||(b={})),function(e){e.apply=function(e,t,n,i,r,o){return y(((t,n,i,r,o,a,l)=>s.applySmartTreeLayout(e,t,n,i,r,o,a,l)),t,n,i,r,o)}}(I||(I={})),function(e){e.apply=function(e,t,n,i,r,o,a,l,d,c,p,m){return y(((t,n,i,a,l,y,f)=>{if(r.length!==t)return{value:u.Error};if(o.length!==t)return{value:u.Error};if(d.length!==l)return{value:u.Error};if(c.length!==l)return{value:u.Error};const g=Float64Array.BYTES_PER_ELEMENT,v=16,b=s._malloc(v+t*g),I=s._malloc(v+t*g),_=s._malloc(v+l*g),w=s._malloc(v+l*g),M=b+v-b%v,T=I+v-I%v,x=_+v-_%v,A=w+v-w%v;try{return s.HEAPF64.subarray(M>>3,(M>>3)+t).set(r),s.HEAPF64.subarray(T>>3,(T>>3)+t).set(o),s.HEAPF64.subarray(x>>3,(x>>3)+l).set(d),s.HEAPF64.subarray(A>>3,(A>>3)+l).set(c),s.applyChronologicalLayout(e,t,n,i,a,M,T,l,y,f,x,A,p,h(m))}finally{s._free(b),s._free(I),s._free(_),s._free(w)}}),t,n,i,a,l)}}(_||(_={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(w||(w={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(M||(M={}))},90115:(e,t,n)=>{n.d(t,{j:()=>i});const i=(0,n(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},90321:(e,t,n)=>{function i(e,t){return e?t?4:3:t?3:2}function r(e,t,n,r){if(null===t||void 0===t||!t.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const a=e.coords,l=[],u=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:d,coords:c}=t,p=i(n,r);let h=0;for(const i of d){const e=o(u,c,h,i,n,r);e&&l.push(e),h+=i*p}if(l.sort(((e,t)=>{let i=e[2]-t[2];return 0===i&&n&&(i=e[4]-t[4]),i})),l.length){let e=6*l[0][2];a[0]=l[0][0]/e,a[1]=l[0][1]/e,n&&(e=6*l[0][4],a[2]=0!==e?l[0][3]/e:0),(a[0]<u[0]||a[0]>u[1]||a[1]<u[2]||a[1]>u[3]||n&&(a[2]<u[4]||a[2]>u[5]))&&(a.length=0)}if(!a.length){const e=t.lengths[0]?s(c,0,d[0],n,r):null;if(!e)return null;a[0]=e[0],a[1]=e[1],n&&e.length>2&&(a[2]=e[2])}return e}function o(e,t,n,r,o,s){const a=i(o,s);let l=n,u=n+a,d=0,c=0,p=0,h=0,y=0;for(let i=0,f=r-1;i<f;i++,l+=a,u+=a){const n=t[l],i=t[l+1],r=t[l+2],s=t[u],a=t[u+1],m=t[u+2];let f=n*a-s*i;h+=f,d+=(n+s)*f,c+=(i+a)*f,o&&(f=n*m-s*r,p+=(r+m)*f,y+=f),n<e[0]&&(e[0]=n),n>e[1]&&(e[1]=n),i<e[2]&&(e[2]=i),i>e[3]&&(e[3]=i),o&&(r<e[4]&&(e[4]=r),r>e[5]&&(e[5]=r))}if(h>0&&(h*=-1),y>0&&(y*=-1),!h)return null;const m=[d,c,.5*h];return o&&(m[3]=p,m[4]=.5*y),m}function s(e,t,n,r,o){const s=i(r,o);let c=t,p=t+s,h=0,y=0,m=0,f=0;for(let i=0,g=n-1;i<g;i++,c+=s,p+=s){const t=e[c],n=e[c+1],i=e[c+2],o=e[p],s=e[p+1],g=e[p+2],v=r?l(t,n,i,o,s,g):a(t,n,o,s);if(v)if(h+=v,r){const e=d(t,n,i,o,s,g);y+=v*e[0],m+=v*e[1],f+=v*e[2]}else{const e=u(t,n,o,s);y+=v*e[0],m+=v*e[1]}}return h>0?r?[y/h,m/h,f/h]:[y/h,m/h]:n>0?r?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function a(e,t,n,i){const r=n-e,o=i-t;return Math.sqrt(r*r+o*o)}function l(e,t,n,i,r,o){const s=i-e,a=r-t,l=o-n;return Math.sqrt(s*s+a*a+l*l)}function u(e,t,n,i){return[e+.5*(n-e),t+.5*(i-t)]}function d(e,t,n,i,r,o){return[e+.5*(i-e),t+.5*(r-t),n+.5*(o-n)]}n.d(t,{Q:()=>r})},93030:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(35143),r=n(69098),o=n(42553),s=n(18288),a=n(46053),l=(n(81806),n(76460),n(47249),n(6409)),u=n(85842),d=n(90115);let c=class extends(r.A.ClonableMixin(o.A)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,s.t)(this.value,this.unit,"milliseconds")}};(0,i._)([(0,l.e)(d.j,{nonNullable:!0})],c.prototype,"unit",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),c=(0,i._)([(0,u.$)("esri.time.TimeInterval")],c);const p=c},97255:(e,t,n)=>{n.d(t,{Qf:()=>l,Qh:()=>s,RS:()=>r,ez:()=>c,i5:()=>p,lM:()=>o,qK:()=>d});var i=n(78393);const r=16;function o(e){if(!e)return 0;let t=d;for(const n in e)e.hasOwnProperty(n)&&(t+=a(e[n],!1));return t}function s(e){if(!e)return 0;if("number"==typeof e[0])return l(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return u(e,8);let n=c;for(let i=0;i<t;i++)n+=a(e[i]);return n}(e);let t=d;for(const n in e)e.hasOwnProperty(n)&&(t+=a(e[n]));return t}function a(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?s(e):d;case"string":return function(e){return 32+e.length}(e);case"number":return r;case"boolean":return 4;default:return 8}}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e+(t?(0,i.iu)(t)?t.byteLength+p:Array.isArray(t)?u(t,r):0:0)),0)}function u(e,t){return c+e.length*t}const d=32,c=16,p=145},97763:(e,t,n)=>{n.d(t,{$w:()=>v,Bu:()=>k,DW:()=>S,FH:()=>G,FM:()=>d,G9:()=>s,GV:()=>I,Go:()=>c,K3:()=>Z,Kn:()=>x,MM:()=>y,MO:()=>z,Nl:()=>F,Ny:()=>_,O2:()=>L,UE:()=>B,YC:()=>V,YF:()=>D,ZO:()=>j,_1:()=>N,_H:()=>M,_W:()=>b,_d:()=>A,bs:()=>q,dI:()=>W,e6:()=>p,gQ:()=>u,iA:()=>P,jn:()=>f,lW:()=>h,mA:()=>m,n5:()=>R,pM:()=>E,pV:()=>T,pk:()=>Y,rB:()=>U,s4:()=>o,xo:()=>C,yH:()=>w,yX:()=>$,zb:()=>O,zr:()=>g});var i=n(89379),r=n(13442);function o(e,t,n,i){return function(e){return"function"==typeof e}(e)?e(t,n,i):e}function s(e){return[e.r,e.g,e.b,e.a]}const a=" /-,\n";function l(e){let t=e.length;for(;t--;)if(!a.includes(e.charAt(t)))return!1;return!0}function u(e,t){const n=[];let i=0,r=-1;do{if(r=e.indexOf("[",i),r>=i){if(r>i){const t=e.slice(i,r);n.push([t,null,l(t)])}if(i=r+1,r=e.indexOf("]",i),r>=i){if(r>i){const o=t[e.slice(i,r)];o&&n.push([null,o,!1])}i=r+1}}}while(-1!==r);if(i<e.length){const t=e.slice(i);n.push([t,null,l(t)])}return n}function d(e,t,n,i){let r="",o=null;for(const s of t){const[t,i,a]=s;if(t)a?o=t:(o&&(r+=o,o=null),r+=t);else{let t=i;null!=n&&(t=z(i,n));const s=e.attributes[t];s&&(o&&(r+=o,o=null),r+=s)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(r,i)}function c(e,t,n,i,r,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=t/r,l=n/o,u=Math.ceil(a/2),d=Math.ceil(l/2);for(let c=0;c<o;c++)for(let n=0;n<r;n++){const p=4*(n+(s?o-c-1:c)*r);let h=0,y=0,m=0,f=0,g=0,v=0,b=0;const I=(c+.5)*l;for(let i=Math.floor(c*l);i<(c+1)*l;i++){const r=Math.abs(I-(i+.5))/d,o=(n+.5)*a,s=r*r;for(let l=Math.floor(n*a);l<(n+1)*a;l++){let n=Math.abs(o-(l+.5))/u;const r=Math.sqrt(s+n*n);r>=-1&&r<=1&&(h=2*r*r*r-3*r*r+1,h>0&&(n=4*(l+i*t),b+=h*e[n+3],m+=h,e[n+3]<255&&(h=h*e[n+3]/250),f+=h*e[n],g+=h*e[n+1],v+=h*e[n+2],y+=h))}}i[p]=f/y,i[p+1]=g/y,i[p+2]=v/y,i[p+3]=b/m}}function p(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function h(e){var t,n;return null!==(t=null===(n=e.data)||void 0===n?void 0:n.symbol)&&void 0!==t?t:null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function m(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function g(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},b=(e,t)=>null!=e?e:t,I=(e,t)=>null!==e&&void 0!==e?e:t,_=e=>e.tintColor?p(e.tintColor):[255,255,255,1],w=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function M(){return Promise.all([n.e(2612),n.e(7983)]).then(n.bind(n,1669))}function T(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function x(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function A(e){let t="normal",n="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?n="bold":i.includes("light")&&(n="lighter")}return{style:t,weight:n}}function S(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function E(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=E(t);if(null!=e)return e}break;case"CIMTextSymbol":return E(e.symbol);case"CIMSolidFill":return e.color}return null}function N(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=N(e);if(null!=t)return t}break}case"CIMTextSymbol":return N(e.symbol);case"CIMSolidStroke":return e.color}}function C(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=C(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function F(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function L(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const B=e=>e.includes("data:image/svg+xml");function R(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function D(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function O(e,t,n,i,r,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const{infos:a}=o;let l=1,u=0,d=0,c=0,p=1;for(const{absoluteAnchorPoint:m,offsetX:f,offsetY:g,rotation:v,size:b,frameHeight:I,rotateClockWise:_,scaleSymbolsProportionally:w}of a)p=m?1:l,d=H(f,g,u,p,d),c=J(f,g,u,p,c),I&&(w||s)&&(l*=b/I),u=Q(v,_,u);const h=H(i,r,u,p,d),y=J(i,r,u,p,c);return{size:e*l,rotation:Q(t,n,u),offsetX:h,offsetY:y}}function j(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>j(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function P(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...r.K[t]];const n=r.D[e];if(!n)throw new Error("InternalError: default value for type ".concat(e,"."));return n[t]}function Z(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function G(e){return null!==e&&void 0!==e&&e.dashTemplate&&(e.dashTemplate=Z(e.dashTemplate)),e}function q(e){var t;if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return null!==(t=e.textCase)&&void 0!==t?t:"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return q(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return q(e.symbol)}}return"Normal"}function V(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let n=0;if(e.symbolLayers)for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{var t;const e=null!==(t=i.size)&&void 0!==t?t:r.D.CIMVectorMarker.size;e>n&&(n=e);break}}return n}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=i.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&g(i.markerPlacement)){var n;const e=null!==(n=i.size)&&void 0!==n?n:r.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=i.height;null!=e&&e>t&&(t=e)}}return t}}}function z(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function Y(e){return e.map((e=>(0,i.A)((0,i.A)({},e),{},{propertyName:D(e.propertyName)})))}function U(e){const t={};for(const n in e){const i=e[n];t[D(n)]=i}return t}function J(e,t,n,i,r){const o=n*Math.PI/180;if(o){const n=Math.cos(o);return(Math.sin(o)*e+n*t)*i+r}return t*i+r}function H(e,t,n,i,r){const o=n*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*i+r:e*i+r}function Q(e,t,n){return t?n-e:n+e}function W(e,t,n){const i="Color"===n||"TintColor"===n||"ToColor"===n,r="Rotation"===n||"Angle"===n||"ToRotation"===n;let o=t[D(n)];if(null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:r&&(o*=Math.PI/180)),null==o&&(o=P(t.type,n.toLowerCase()),null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:r&&(o*=Math.PI/180))),null!=t.primitiveName){const s=e[t.primitiveName];if(null!=s){const e=s[n];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(o=e,null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:r&&(o*=Math.PI/180))):(o={valueExpressionInfo:e,defaultValue:o},null!=o&&(i?o={type:"Process",op:"ArcadeColor",value:o}:r&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(null==o)throw new Error('Failed to derive a value or an expression for "'.concat(n,'".'));return o}function $(e,t){return Math.max(Math.min((null!==e&&void 0!==e?e:t)/100,1),0)}}}]);
//# sourceMappingURL=6261.5664da35.chunk.js.map