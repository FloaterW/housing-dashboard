"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[8938],{22665:(t,e,n)=>{n.r(e),n.d(e,{default:()=>C});var r=n(98773),a=n(50076),s=n(76460),o=n(50346),i=n(62754),u=n(80963),l=n(98618),c=n(78482),h=n(72547),d=n(24586),f=n(48094),m=n(10907),p=n(40098),g=n(11316),y=n(1900),_=n(85632),x=n(36693);const w="esri.layers.WFSLayer";class C{constructor(){this._customParameters=null,this._queryEngine=null,this._supportsPagination=!0}destroy(){var t;null!==(t=this._queryEngine)&&void 0!==t&&t.destroy(),this._queryEngine=null}async load(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getFeatureUrl:n,getFeatureOutputFormat:r,fields:s,geometryType:i,featureType:u,maxRecordCount:l,maxTotalRecordCount:c,maxPageCount:m,objectIdField:p,customParameters:_}=t,{spatialReference:w,getFeatureSpatialReference:C}=(0,g.UH)(n,u,t.spatialReference);try{await(0,d.Nk)(C,w)}catch(F){throw new a.A("unsupported-projection","Projection not supported",{inSpatialReference:C,outSpatialReference:w})}(0,o.Te)(e),this._customParameters=_,this._featureType=u,this._fieldsIndex=y.A.fromLayerJSON({fields:s,dateFieldsTimeReference:s.some((t=>"esriFieldTypeDate"===t.type))?{timeZoneIANA:x.n$}:null}),this._geometryType=i,this._getFeatureUrl=n,this._getFeatureOutputFormat=r,this._getFeatureSpatialReference=C,this._maxRecordCount=l,this._maxTotalRecordCount=c,this._maxPageCount=m,this._objectIdField=p,this._spatialReference=w;let T=await this._snapshotFeatures(e);if(T.errors.length>0&&(this._supportsPagination=!1,T=await this._snapshotFeatures(e),T.errors.length>0))throw T.errors[0];return this._queryEngine=new f.do({fieldsIndex:this._fieldsIndex,geometryType:i,hasM:!1,hasZ:!1,objectIdField:p,spatialReference:w,timeInfo:null,featureStore:new h.A({geometryType:i,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(T.features),{warnings:M(T),extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new a.A("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(t,e.signal)}async queryFeatureCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(t,e.signal)}async queryObjectIds(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),(await this._queryEngine.executeQueryForIds(t,e.signal)).filter(_.Et)}async queryExtent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(t,e.signal)}async querySnapping(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),(0,c.J)(this._queryEngine,t,e.signal)}async queryAttributeBins(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeAttributeBinsQuery(t,e.signal)}async refresh(t){var e;return this._customParameters=t.customParameters,this._maxRecordCount=t.maxRecordCount,this._maxTotalRecordCount=t.maxTotalRecordCount,this._maxPageCount=t.maxPageCount,null!==(e=this._snapshotTask)&&void 0!==e&&e.abort(),this._snapshotTask=(0,r.UT)((t=>this._snapshotFeatures({signal:t}))),this._snapshotTask.promise.then((t=>{var e;this._queryEngine.featureStore.clear(),this._queryEngine.featureStore.addMany(t.features);for(const n of M(t))s.A.getLogger(w).warn(new i.A("wfs-layer:refresh-warning",n.message,n.details));(null===(e=t.errors)||void 0===e?void 0:e.length)&&s.A.getLogger(w).warn(new i.A("wfs-layer:refresh-error","Refresh completed with errors",{errors:t.errors}))}),(()=>{this._queryEngine.featureStore.clear()})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch(t){}return this._waitSnapshotComplete()}}async _snapshotFeatures(t){const e=null===t||void 0===t?void 0:t.signal,n=this._maxTotalRecordCount,r=this._maxPageCount,a=this._supportsPagination?await(0,g.E)(this._getFeatureUrl,this._featureType.typeName,{customParameters:this._customParameters,signal:e}):void 0;let s=[];const i=[];if(null==a)try{s=await this._singleQuery(e)}catch(u){(0,o.zf)(u)||i.push(u)}else{const t=Math.min(a,n),u=function*(t,e,n){for(let r=0;r<e;r++)yield t._pageQuery(r,n)}(this,Math.max(1,Math.min(Math.ceil(t/this._maxRecordCount),r)),e);await Promise.allSettled(Array.from({length:10}).map((()=>async function(t,e,n){let a=t.next();for(;!a.done;){try{const t=await a.value;e.push(...t)}catch(r){(0,o.zf)(r)||n.push(r)}a=t.next()}}(u,s,i))))}return(0,o.Te)(e),{features:s,totalRecordCount:a,maxTotalRecordCount:n,maxPageCount:r,errors:i}}async _singleQuery(t){const e=await(0,g.x$)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:t});return this._processGeoJSON(e,{signal:t})}async _pageQuery(t,e){const n=t*this._maxRecordCount,r=await(0,g.x$)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,startIndex:n,count:this._maxRecordCount,signal:e});return this._processGeoJSON(r,{startIndex:n,signal:e})}_processGeoJSON(t,e){(0,m.sO)(t,this._getFeatureSpatialReference.wkid);const{startIndex:n,signal:r}=e;(0,o.Te)(r);const a=(0,m.bd)(t,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!(0,u.aI)(this._spatialReference,this._getFeatureSpatialReference))for(const o of a)null!=o.geometry&&(o.geometry=(0,l.Ux)((0,d.Cv)((0,l.zv)(o.geometry,this._geometryType,!1,!1),this._getFeatureSpatialReference,this._spatialReference)));let s=null!==n&&void 0!==n?n:1;for(const o of a){const t={};(0,p.MB)(this._fieldsIndex,t,o.attributes,!0),o.attributes=t,null==t[this._objectIdField]&&(o.objectId=t[this._objectIdField]=s++)}return a}}function M(t){const e=[];return null!=t.totalRecordCount&&(t.features.length<t.totalRecordCount&&e.push({name:"wfs-layer:maxRecordCount-too-low",message:"Could only fetch ".concat(t.features.length," of ").concat(t.totalRecordCount," in ").concat(t.maxPageCount," queries. Try increasing the value of WFSLayer.maxRecordCount."),details:{recordCount:t.features.length,totalRecordCount:t.totalRecordCount}}),t.totalRecordCount>t.maxTotalRecordCount&&e.push({name:"wfs-layer:large-dataset",message:"The number of ".concat(t.totalRecordCount," features exceeds the maximum allowed of ").concat(t.maxTotalRecordCount,"."),details:{recordCount:t.features.length,totalRecordCount:t.totalRecordCount,maxTotalRecordCount:t.maxTotalRecordCount}})),e}},40098:(t,e,n)=>{n.d(e,{$1:()=>g,CR:()=>p,MB:()=>d,PC:()=>y,Yx:()=>u,bP:()=>c});var r=n(51344),a=n(80963),s=n(53430);class o{constructor(){this.code=null,this.description=null}}class i{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new i(t)}class l{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new l(t)}const h=new Set;function d(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h.clear();for(const o in n){const a=t.get(o);if(!a)continue;const i=f(a,n[o]);if(h.add(a.name),a&&(r||a.editable)){const t=(0,s.CJ)(a,i);if(t)return u((0,s.uo)(t,a,i));e[a.name]=i}}for(const s of null!==(a=t.requiredFields)&&void 0!==a?a:[]){var a;if(!h.has(s.name))return u('missing required field "'.concat(s.name,'"'))}return null}function f(t,e){let n=e;return(0,s.WA)(t)&&"string"==typeof e?n=parseFloat(e):(0,s.yM)(t)&&null!=e&&"string"!=typeof e?n=String(e):(0,s.vE)(t)&&"string"==typeof e&&(n=(0,r._U)(e)),(0,s.WX)(n)}let m;function p(t,e){if(!t||!(0,a.fn)(e))return t;if("rings"in t||"paths"in t){if(null==m)throw new TypeError("geometry engine not loaded");return m.simplify(e,t)}return t}async function g(t,e){!(0,a.fn)(t)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||await async function(){return null==m&&(m=await Promise.all([n.e(2612),n.e(7983)]).then(n.bind(n,1669))),m}()}const y={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}},43047:(t,e,n)=>{n.d(e,{a:()=>x,b:()=>c,c:()=>a,d:()=>d,e:()=>w,f:()=>m,g:()=>o,h:()=>g,j:()=>f,l:()=>y,n:()=>p,s:()=>s,t:()=>_});var r=n(53494);function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function o(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function c(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function h(t,e){const n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+s*s)}function d(t,e){const n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],s=e[3]-t[3];return n*n+r*r+a*a+s*s}function f(t){const e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function m(t){const e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function p(t,e){const n=e[0],r=e[1],a=e[2],s=e[3];let o=n*n+r*r+a*a+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=s*o),t}function g(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function y(t,e,n,r){const a=e[0],s=e[1],o=e[2],i=e[3];return t[0]=a+r*(n[0]-a),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t[3]=i+r*(n[3]-i),t}function _(t,e,n){const r=e[0],a=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*s+n[15]*o,t}function x(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function w(t,e){const n=t[0],a=t[1],s=t[2],o=t[3],i=e[0],u=e[1],l=e[2],c=e[3],h=(0,r.FD)();return Math.abs(n-i)<=h*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=h*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-l)<=h*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}const C=i,M=u,T=l,F=h,R=d,b=f,q=m;Object.freeze(Object.defineProperty({__proto__:null,add:o,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},copy:a,copyVec3:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},dist:F,distance:h,div:T,divide:l,dot:g,equals:w,exactEquals:x,floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},len:b,length:f,lerp:y,max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},mul:M,multiply:u,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},normalize:p,random:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=r.Ov;let a,s,o,i,u,l;do{a=2*n()-1,s=2*n()-1,u=a*a+s*s}while(u>=1);do{o=2*n()-1,i=2*n()-1,l=o*o+i*i}while(l>=1);const c=Math.sqrt((1-u)/l);return t[0]=e*a,t[1]=e*s,t[2]=e*o*c,t[3]=e*i*c,t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:c,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},set:s,sqrDist:R,sqrLen:q,squaredDistance:d,squaredLength:m,str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},sub:C,subtract:i,transformMat4:_,transformQuat:function(t,e,n){const r=e[0],a=e[1],s=e[2],o=n[0],i=n[1],u=n[2],l=n[3],c=l*r+i*s-u*a,h=l*a+u*r-o*s,d=l*s+o*a-i*r,f=-o*r-i*a-u*s;return t[0]=c*l+f*-o+h*-u-d*-i,t[1]=h*l+f*-i+d*-o-c*-u,t[2]=d*l+f*-u+c*-i-h*-o,t[3]=e[3],t}},Symbol.toStringTag,{value:"Module"}))},55855:(t,e,n)=>{function r(){return[0,0,0,0]}function a(t){return[t[0],t[1],t[2],t[3]]}function s(t,e,n,r){return[t,e,n,r]}function o(t,e,n,r){return[t,e,n,r]}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];const n=Math.min(4,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function u(){return[0,0,0,0]}function l(){return s(1,1,1,1)}function c(){return s(1,0,0,0)}function h(){return s(0,1,0,0)}function d(){return s(0,0,1,0)}function f(){return s(0,0,0,1)}n.d(e,{CN:()=>o,Un:()=>p,ci:()=>i,fA:()=>s,o8:()=>a,uY:()=>m,vt:()=>r});const m=[0,0,0,0],p=l(),g=c(),y=h(),_=d(),x=f();Object.freeze(Object.defineProperty({__proto__:null,ONES:p,UNIT_W:x,UNIT_X:g,UNIT_Y:y,UNIT_Z:_,ZEROS:m,clone:a,create:r,createView:function(t,e){return new Float64Array(t,e,4)},freeze:o,fromArray:i,fromValues:s,ones:l,unitW:f,unitX:c,unitY:h,unitZ:d,zeros:u},Symbol.toStringTag,{value:"Module"}))},75146:(t,e,n)=>{n.d(e,{A:()=>r});class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new r;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}}}]);
//# sourceMappingURL=8938.ddf75ed8.chunk.js.map