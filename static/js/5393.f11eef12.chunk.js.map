{"version":3,"file":"static/js/5393.f11eef12.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/grid/constants.js","../node_modules/@arcgis/core/geometry/support/scaleUtils.js","../node_modules/@arcgis/core/views/2d/grid/gridUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/GridSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst o=50,t=5;export{t as minimumPixelsPerStrideForDisplayWhenScalingOff,o as pixelsPerCell};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{floatEqualAbsolute as n}from\"../../core/mathUtils.js\";import{getMetersPerUnitForSR as t,inchesPerMeter as r}from\"../../core/unitUtils.js\";const e=96;function i(n,i){const u=i||n.extent,o=n.width,c=t(u?.spatialReference);return u&&o?u.width/o*c*r*e:0}function u(n,i){return n/(t(i)*r*e)}function o(n){return n/(r*e)}function c(n,i){return n*(t(i)*r*e)}function f(n,t){const r=n.extent,e=n.width-(n.padding?n.padding.left+n.padding.right:0),i=u(t,r.spatialReference);return r.clone().expand(i*e/r.width)}function d(n,t,r){return I(n,t)&&a(n,r)}function I(t,r){return 0===r||n(t,r)||t<r}function a(t,r){return 0===r||n(t,r)||t>r}function p(t,r){if(n(t,r))return 0;return(t||Number.POSITIVE_INFINITY)>(r||Number.POSITIVE_INFINITY)?1:-1}export{p as compareMinScale,f as getExtentForScale,u as getResolutionForScale,o as getResolutionInMetersForScale,i as getScale,c as getScaleForResolution,d as isInScaleRange};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as e}from\"../../../core/unitUtils.js\";import t from\"../../../geometry/Point.js\";import r from\"../../../geometry/Polyline.js\";import o from\"../../../geometry/SpatialReference.js\";import{isSupported as n,geodesicLengths as s}from\"../../../geometry/support/geodesicUtils.js\";import{straightLineDensify as i}from\"../../../geometry/support/normalizeUtils.js\";import{isValid as m}from\"../../../geometry/support/spatialReferenceUtils.js\";import{webMercatorToGeographic as p}from\"../../../geometry/support/webMercatorUtils.js\";import{pixelsPerCell as c}from\"./constants.js\";function a(e,t){return Math.log(e)/Math.log(t)}function l(e,t,r){const o=1===e?10:e;return o**(r?Math.round(a(c/t,o)):0)}function f(e){const{isGeographic:t,isWebMercator:r}=e;return!t&&!r}function u(c,a,l){const u=\"number\"==typeof c?null:c,y=l??u?.spatialReference;if(null==y||!m(y)||f(y))return e(y);let g=u?.x??c,j=u?.y??a;const h=1/Math.sqrt(2);let M=g+h,x=j+h;const{isWebMercator:R,isGeographic:U}=y;let b=U&&!n(y)?o.WGS84:y;if(R){let e=new t({x:g,y:j,spatialReference:y});p(e,!0,e),g=e.x,j=e.y,e=new t({x:M,y:x,spatialReference:y}),p(e,!0,e),M=e.x,x=e.y,b=o.WGS84}const w=new r({paths:[[[g,j],[M,x]]],spatialReference:b}),G=i(w,10);let W;try{[W]=s([G],\"meters\")}catch{return e(y)}return W}export{l as getScaleFactor,u as measureMetersPerUnitAtReferencePoint,f as shouldUsePlanar};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import r from\"../../../core/Logger.js\";import{deg2rad as i}from\"../../../core/mathUtils.js\";import{convertUnit as n}from\"../../../core/unitUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{L as a}from\"../../../chunks/vec32.js\";import{isLoadedOrLoadFor as p,project as l}from\"../../../geometry/projection.js\";import{getClosestDenormalizedXToReference as c}from\"../../../geometry/support/normalizeUtils.js\";import{getResolutionForScale as u}from\"../../../geometry/support/scaleUtils.js\";import{minimumPixelsPerStrideForDisplayWhenScalingOff as d}from\"../../2d/grid/constants.js\";import{getScaleFactor as g,measureMetersPerUnitAtReferencePoint as f}from\"../../2d/grid/gridUtils.js\";import{create as h,createWritable as m}from\"../sketch/normalizedPoint.js\";import{gridPlacementGraphicSymbol as S}from\"./snappingUtils.js\";import{IntersectionSnappingCandidate as y}from\"./candidates/IntersectionSnappingCandidate.js\";import{LineSnappingCandidate as v}from\"./candidates/LineSnappingCandidate.js\";let w=class extends t{constructor(e){super(e),this.options=null}destroy(){this._set(\"options\",null)}get grid(){return this.view.grid}get effectiveViewRotation(){return this.grid?.rotateWithMap?0:i(this.view.rotation??0)}get gridRotation(){return i(this.grid?.rotation??0)}get gridCenter(){const{spatialReference:e,grid:t}=this;if(!t||!e||!p(t.center.spatialReference,e))return null;try{const r=l(t.center,e),i=e.isWrappable&&null!=this.view?.center?c(r.x,this.view.center.x,e):r.x;return h(i,r.y,r.z)}catch(i){return r.getLogger(this).errorOnce(\"Grid Snapping - Failed to project grid center.\",i),null}}get offsetScaleFactor(){const{pixelsPerStride:e,grid:t}=this;if(!t||!e)return 1;const{majorLineInterval:r,dynamicScaling:i}=t;return r<1?null:g(r,e,i)}get spatialReference(){return this.view.spatialReference}get gridMetersPerStride(){const{grid:e}=this;return e?n(e.spacing,e.units,\"meters\"):null}get viewMetersPerPixel(){const{viewMetersPerSRUnit:e}=this;return null==e?null:e*u(this.view.scale,this.view.spatialReference)}get viewMetersPerSRUnit(){const{spatialReference:e}=this.view;return this.gridCenter?f(this.gridCenter[0],this.gridCenter[1],e):null}get pixelsPerStride(){const{gridMetersPerStride:e,viewMetersPerPixel:t}=this;return t&&e?e/t:null}get updating(){return null!=this.grid&&null!=this.spatialReference&&null==this.viewMetersPerSRUnit}async fetchCandidates(e,t,r){const{options:i,view:n}=this;if(!i?.effectiveGridEnabled||!n.grid||r.feature?.attributes&&S in r.feature.attributes)return[];const o=r.coordinateHelper.arrayToPoint(e),s=i.distance*(\"touch\"===r.pointer?i.touchSensitivityMultiplier:1);return this.fetchCandidatesSync(o,s)}fetchCandidatesSync(e,t){const r=[],{grid:i,effectiveViewRotation:n,gridRotation:o,gridCenter:s,viewMetersPerPixel:a,viewMetersPerSRUnit:c,offsetScaleFactor:u,spatialReference:g,gridMetersPerStride:f,pixelsPerStride:m}=this;if(!(i&&a&&c&&s&&g&&u&&f&&m))return r;if(!i.dynamicScaling&&m<d)return r;if(!p(e.spatialReference,g))return r;const S=l(e,g),w=h(S.x,S.y,S.z),x=P(w,-o,s,-n),C=f/c*u,U=j(x,C,s),{shouldSnapX:b,shouldSnapY:L}=R(U,x,t,a,c);if(!b&&!L)return[];const z=h((b?U:x)[0],(L?U:x)[1]),E=P(z,o,s,n),F=P(U,o,s,n);if(L){const e=M(U,x,C,\"y\"),t=P(e,o,s,n);r.push(new v({lineStart:F,lineEnd:t,targetPoint:E,isDraped:!1}))}if(b){const e=M(U,x,C,\"x\"),t=P(e,o,s,n);r.push(new v({lineStart:F,lineEnd:t,targetPoint:E,isDraped:!1}))}return b&&L&&r.push(new y(E,r[0],r[1],!1)),r}};e([o({constructOnly:!0})],w.prototype,\"view\",void 0),e([o()],w.prototype,\"options\",void 0),e([o()],w.prototype,\"grid\",null),e([o()],w.prototype,\"effectiveViewRotation\",null),e([o()],w.prototype,\"gridRotation\",null),e([o()],w.prototype,\"gridCenter\",null),e([o()],w.prototype,\"offsetScaleFactor\",null),e([o()],w.prototype,\"spatialReference\",null),e([o()],w.prototype,\"gridMetersPerStride\",null),e([o()],w.prototype,\"viewMetersPerPixel\",null),e([o()],w.prototype,\"viewMetersPerSRUnit\",null),e([o()],w.prototype,\"pixelsPerStride\",null),e([o()],w.prototype,\"updating\",null),w=e([s(\"esri.views.interactive.snapping.GridSnappingEngine\")],w);const P=(e,t,r,i)=>{const n=m(e[0],e[1],e[2]);return a(n,a(n,n,r,t),r,i)},j=(e,t,r)=>{const i=(e[0]-r[0])/t,n=(e[1]-r[1])/t,o=Math.trunc(i),s=Math.trunc(n),a=Math.round(i%1),p=Math.round(n%1),l=r[0]+(o+a)*t,c=r[1]+(s+p)*t;return h(l,c)},R=(e,t,r,i,n)=>{if(i<=0)return{shouldSnapX:!1,shouldSnapY:!1};const o=(e[0]-t[0])/i,s=(e[1]-t[1])/i;return{shouldSnapX:Math.abs(o*n)<r,shouldSnapY:Math.abs(s*n)<r}},M=(e,t,r,i)=>{if(\"y\"===i){const i=t[0]>e[0]?1:-1;return h(e[0]+r*i,e[1])}const n=t[1]>e[1]?1:-1;return h(e[0],e[1]+r*n)};export{w as GridSnappingEngine};\n"],"names":["o","t","e","i","n","u","extent","width","c","spatialReference","r","d","I","a","p","Number","POSITIVE_INFINITY","l","Math","round","log","_u$x","_u$y","y","m","isGeographic","isWebMercator","f","g","x","j","h","sqrt","M","R","U","b","WGS84","w","paths","G","W","s","_unused","constructor","super","this","options","destroy","_set","grid","view","effectiveViewRotation","_this$grid","_this$view$rotation","rotateWithMap","rotation","gridRotation","_this$grid$rotation","_this$grid2","gridCenter","center","_this$view","isWrappable","z","getLogger","errorOnce","offsetScaleFactor","pixelsPerStride","majorLineInterval","dynamicScaling","gridMetersPerStride","spacing","units","viewMetersPerPixel","viewMetersPerSRUnit","scale","updating","fetchCandidates","_r$feature","effectiveGridEnabled","feature","attributes","S","coordinateHelper","arrayToPoint","distance","pointer","touchSensitivityMultiplier","fetchCandidatesSync","P","C","shouldSnapX","shouldSnapY","L","E","F","push","v","lineStart","lineEnd","targetPoint","isDraped","constructOnly","prototype","trunc","abs"],"sourceRoot":""}