"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[9513],{420:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(78393),o=r(38496),s=r(93345);function a(e,t){switch(t){case s.WR.TRIANGLES:return"number"==typeof(r=e)?(0,o.tM)(r):(0,n.mg)(r)?new Uint16Array(r):r;case s.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const r=t-2,n=(0,o.my)(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(n[e++]=t,n[e++]=t+1,n[e++]=t+2):(n[e++]=t+1,n[e++]=t,n[e++]=t+2)}else{let t=0;for(let o=0;o<r;o+=1)o%2==0?(n[t++]=e[o],n[t++]=e[o+1],n[t++]=e[o+2]):(n[t++]=e[o+1],n[t++]=e[o],n[t++]=e[o+2])}return n}(e);case s.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)n[e++]=0,n[e++]=t+1,n[e++]=t+2;return n}const o=e[0];let s=e[1],a=0;for(let i=0;i<r;++i){const t=e[i+2];n[a++]=o,n[a++]=s,n[a++]=t,s=t}return n}(e)}var r}},11109:(e,t,r)=>{r.d(t,{R:()=>l});var n=r(3825),o=r(98773),s=r(50076),a=r(50346),i=r(90534);class l{constructor(e){this._streamDataRequester=e}async loadJSON(e,t){return this._load("json",e,t)}async loadBinary(e,t){return(0,i.DB)(e)?((0,a.Te)(t),(0,i.lJ)(e)):this._load("binary",e,t)}async loadImage(e,t){return this._load("image",e,t)}async _load(e,t,r){if(null==this._streamDataRequester)return(await(0,n.A)(t,{responseType:u[e]})).data;const i=await(0,o.Ke)(this._streamDataRequester.request(t,e,r));if(!0===i.ok)return i.value;throw(0,a.QP)(i.error),new s.A("glt-loader-request-error","Request for resource failed: ".concat(i.error))}}const u={image:"image",binary:"array-buffer",json:"json","image+type":void 0}},37040:(e,t,r)=>{r.d(t,{KB:()=>i,Xi:()=>s,pn:()=>l,x3:()=>a});var n=r(81806),o=r(83490);class s{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.JS.KTX2_ENCODING}}function a(e){return"encoded-mesh-texture"===(null===e||void 0===e?void 0:e.type)}async function i(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function l(e,t){if(t===o.JS.KTX2_ENCODING)return new s(e);const r=new Blob([e],{type:t});let a=URL.createObjectURL(r);switch(t){case"image/jpeg":a+="#.jpg";break;case"image/png":a+="#.png"}const i=new Image;if((0,n.A)("esri-iPhone"))return new Promise(((e,t)=>{const r=()=>{o(),e(i)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(a),i.removeEventListener("load",r),i.removeEventListener("error",n)};i.addEventListener("load",r),i.addEventListener("error",n),i.src=a}));try{i.src=a,await i.decode()}catch(l){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(a),i}},39513:(e,t,r)=>{r.d(t,{fetch:()=>ee});var n=r(89379),o=r(99746),s=r(93795),a=r(15941),i=r(63919),l=r(44680),u=r(34761),c=r(13191),d=r(72745),f=r(20664),m=r(9392),p=r(42294),h=r(75002),g=r(88105),v=r(45136),y=r(10947),x=r(52007),w=r(11109),b=r(420),T=r(37040),A=r(54439);class R{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class B{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new R,this.numberOfVertices=0}}var M=r(3825),I=r(98773),S=r(50076),E=r(76460),O=r(97255),P=r(75941),U=r(50346),L=r(19898),k=r(38496),_=r(49003),C=r(50468),q=r(83490),F=r(17345),N=r(76632),G=r(66470),j=r(65131),D=r(93345);const $=()=>E.A.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");class V{constructor(e,t,r){this.resource=e,this.textures=t,this.cachedMemory=r}}async function W(e,t){var r;const n=await async function(e,t){const r=null===t||void 0===t?void 0:t.streamDataRequester;if(r)return async function(e,t,r){const n=await(0,I.Ke)(t.request(e,"json",r));if(!0===n.ok)return n.value;(0,U.QP)(n.error),z(n.error.details.url)}(e,r,t);const n=await(0,I.Ke)((0,M.A)(e,t));if(!0===n.ok)return n.value.data;(0,U.QP)(n.error),z(n.error)}(e,t),o=await async function(e,t){const r=new Array;for(const s in e){const n=e[s],o=n.images[0].data;if(!o){$().warn("Externally referenced texture data is not yet supported");continue}const a=n.encoding+";base64,"+o,i="/textureDefinitions/"+s,l="rgba"===n.channels?n.alphaChannelUsage||"transparency":"none",u={noUnpackFlip:!0,wrap:{s:D.pF.REPEAT,t:D.pF.REPEAT},preMultiplyAlpha:Q(l)!==q.sf.Opaque},c=null!==t&&void 0!==t&&t.disableTextures?Promise.resolve(null):(0,_.D)(a,t);r.push(c.then((e=>({refId:i,image:e,parameters:u,alphaChannelUsage:l}))))}const n=await Promise.all(r),o={};for(const s of n)o[s.refId]=s;return o}(null!==(r=n.textureDefinitions)&&void 0!==r?r:{},t);let s=0;for(const a in o)if(o.hasOwnProperty(a)){const e=o[a];s+=null!==e&&void 0!==e&&e.image?e.image.width*e.image.height*4:0}return new V(n,o,s+(0,O.Qh)(n))}function z(e){throw new S.A("","Request for object resource failed: ".concat(e))}function J(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||($().warn("Geometry must specify vertex attributes"),n=!1),t.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];null!==t&&void 0!==t&&t.values?(null!=t.valueType&&"UInt32"!==t.valueType&&($().warn("Unsupported indexed geometry indices type '".concat(t.valueType,"', only UInt32 is currently supported")),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&($().warn("Unsupported indexed geometry values per element '".concat(t.valuesPerElement,"', only 1 is currently supported")),n=!1)):($().warn("Indexed geometry does not specify face indices for '".concat(r,"' attribute")),n=!1)}}else $().warn("Indexed geometries must specify faces"),n=!1;break}default:$().warn("Unsupported topology '".concat(r,"'")),n=!1}e.params.material||($().warn("Geometry requires material"),n=!1);const o=e.params.vertexAttributes;for(const s in o)o[s].values||($().warn("Geometries with externally defined attributes are not yet supported"),n=!1);return n}function K(e){const t=(0,p.Ie)();return e.forEach((e=>{const r=e.boundingInfo;null!=r&&((0,p.iT)(t,r.bbMin),(0,p.iT)(t,r.bbMax))})),t}function Q(e){switch(e){case"mask":return q.sf.Mask;case"maskAndTransparency":return q.sf.MaskBlend;case"none":return q.sf.Opaque;default:return q.sf.Blend}}function X(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const H=new L.R(1,2,"wosr");var Y=r(59046),Z=r(78992);async function ee(e,t){var l;const R=function(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}((0,s.EM)(e));if("wosr"===R.fileType){const e=await(t.cache?t.cache.loadWOSR(R.url,t):W(R.url,t)),{engineResources:r,referenceBoundingBox:n}=function(e,t){var r;const n=new Array,o=new Array,s=new Array,a=new P.O,i=e.resource,l=L.R.parse(i.version||"1.0","wosr");H.validate(l);const u=i.model.name,c=i.model.geometries,d=null!==(r=i.materialDefinitions)&&void 0!==r?r:{},f=e.textures;let p=0;const h=new Map;for(let w=0;w<c.length;w++){var g,v;const e=c[w];if(!J(e))continue;const r=X(e),i=e.params.vertexAttributes,l=[],u=t=>{if("PerAttributeArray"===e.params.topology)return null;const r=e.params.faces;for(const e in r)if(e===t)return r[e].values;return null},b=i[G.r.POSITION],T=b.values.length/b.valuesPerElement;for(const t in i){var y;const e=i[t],r=e.values,n=null!==(y=u(t))&&void 0!==y?y:(0,k.tM)(T);l.push([t,new C.n(r,n,e.valuesPerElement,!0)])}const A=r.texture,R=f&&f[A];if(R&&!h.has(A)){const{image:e,parameters:t}=R,r=new N.g(e,t);o.push(r),h.set(A,r)}const B=h.get(A),M=B?B.id:void 0,I=r.material;let S=a.get(I,A);if(null==S){var x;const e=d[I.slice(I.lastIndexOf("/")+1)].params;1===e.transparency&&(e.transparency=0);const r=R&&R.alphaChannelUsage,n=e.transparency>0||"transparency"===r||"maskAndTransparency"===r,o=R?Q(R.alphaChannelUsage):void 0,s={ambient:(0,m.ci)(e.diffuse),diffuse:(0,m.ci)(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:o,textureAlphaCutoff:.33,textureId:M,doubleSided:!0,cullFace:q.s2.None,colorMixMode:e.externalColorMixMode||"tint",textureAlphaPremultiplied:null!==(x=null===R||void 0===R?void 0:R.parameters.preMultiplyAlpha)&&void 0!==x&&x};null!==t&&void 0!==t&&t.materialParameters&&Object.assign(s,t.materialParameters),S=new j.$U(s,t),a.set(I,A,S)}s.push(S);const E=new F.V(S,l);p+=null!==(g=null===(v=l.find((e=>e[0]===G.r.POSITION)))||void 0===v||null===(v=v[1])||void 0===v?void 0:v.indices.length)&&void 0!==g?g:0,n.push(E)}return{engineResources:[{name:u,stageResources:{textures:o,materials:s,geometries:n},pivotOffset:i.model.pivotOffset,numberOfVertices:p,lodThreshold:null}],referenceBoundingBox:K(n)}}(e,t);return{lods:r,referenceBoundingBox:n,isEsriSymbolResource:!1,isWosr:!0}}let M;if(t.cache)M=await t.cache.loadGLTF(R.url,t,!!t.usePBR);else{const{loadGLTF:e}=await r.e(6516).then(r.bind(r,56516));M=await e(new w.R(t.streamDataRequester),R.url,t,t.usePBR)}const I=null===(l=M.model.meta)||void 0===l?void 0:l.ESRI_proxyEllipsoid,S=M.meta.isEsriSymbolResource&&null!=I&&"EsriRealisticTreesStyle"===M.meta.ESRI_webstyle;S&&!M.customMeta.esriTreeRendering&&(M.customMeta.esriTreeRendering=!0,function(e,t){for(let r=0;r<e.model.lods.length;++r){const n=e.model.lods[r];for(const s of n.parts){const n=s.attributes.normal;if(null==n)return;const a=s.attributes.position,i=a.count,l=(0,m.vt)(),d=(0,m.vt)(),p=(0,m.vt)(),h=new Float32Array(4*i),v=new Float32Array(3*i),y=(0,u.B8)((0,c.vt)(),s.transform);let x=0,w=0;for(let u=0;u<i;u++){a.getVec(u,d),n.getVec(u,l),(0,f.t)(d,d,s.transform),(0,f.d)(p,d,t.center),(0,f.E)(p,p,t.radius);const i=p[2],c=(0,f.l)(p),m=Math.min(.45+.55*c*c,1)**o.Tf;(0,f.E)(p,p,t.radius),null!==y&&(0,f.t)(p,p,y),(0,f.n)(p,p),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,f.m)(p,p,l,i>-1?.2:Math.min(-4*i-3.8,1)),v[x]=p[0],v[x+1]=p[1],v[x+2]=p[2],x+=3,h[w]=m,h[w+1]=m,h[w+2]=m,h[w+3]=1,w+=4}s.attributes.normal=new g.xs(v),s.attributes.color=new g.Eq(h)}}}(M,I));const E=!!t.usePBR,O=M.meta.isEsriSymbolResource?{usePBR:E,isSchematic:!1,treeRendering:S,mrrFactors:Z.SY}:{usePBR:E,isSchematic:!1,treeRendering:!1,mrrFactors:Z.mb},U=(0,n.A)((0,n.A)({},t.materialParameters),{},{treeRendering:S}),{engineResources:_,referenceBoundingBox:D}=function(e,t,r,s,l){const u=e.model,c=new Array,f=new Map,m=new Map,w=u.lods.length,R=(0,p.Ie)();return u.lods.forEach(((e,M)=>{const I=!0===s.skipHighLods&&(w>1&&0===M||w>3&&1===M)||!1===s.skipHighLods&&null!=l&&M!==l;if(I&&0!==M)return;const S=new B(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const l=I?new j.$U({},s):function(e,t,r,s,a,i,l,u){const c=e.materials.get(t.material);if(null==c)return null;const{normal:f,color:m,texCoord0:p,tangent:h}=t.attributes,g=t.material+(f?"_normal":"")+(m?"_color":"")+(p?"_texCoord0":"")+(h?"_tangent":""),v=null!=t.attributes.texCoord0,y=null!=t.attributes.normal,x=function(e){switch(e){case"BLEND":return q.sf.Blend;case"MASK":return q.sf.Mask;case"OPAQUE":case null:case void 0:return q.sf.Opaque}}(c.alphaMode);if(!i.has(g)){var w,b;if(v){const t=function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=t&&!l.has(t)){const o=e.textures.get(t);if(o){const e=o.data;l.set(t,new N.g((0,T.x3)(e)?e.data:e,(0,n.A)((0,n.A)({},o.parameters),{},{preMultiplyAlpha:!(0,T.x3)(e)&&r,encoding:(0,T.x3)(e)?e.encoding:void 0})))}}};t(c.colorTexture,x!==q.sf.Opaque),t(c.normalTexture),t(c.occlusionTexture),t(c.emissiveTexture),t(c.metallicRoughnessTexture)}const r=1/o.Tf,f=c.color[0]**r,m=c.color[1]**r,p=c.color[2]**r,h=c.emissiveFactor[0]**r,R=c.emissiveFactor[1]**r,B=c.emissiveFactor[2]**r,M=null!=c.colorTexture&&v?l.get(c.colorTexture):null,I=(0,Z.Jr)(c),S=null!=(null===(w=c.normalTextureTransform)||void 0===w?void 0:w.scale)?null===(b=c.normalTextureTransform)||void 0===b?void 0:b.scale:d.Un;i.set(g,new j.$U((0,n.A)((0,n.A)({},s),{},{transparent:x===q.sf.Blend,customDepthTest:q.it.Lequal,textureAlphaMode:x,textureAlphaCutoff:c.alphaCutoff,diffuse:[f,m,p],ambient:[f,m,p],opacity:c.opacity,doubleSided:c.doubleSided,doubleSidedType:"winding-order",cullFace:c.doubleSided?q.s2.None:q.s2.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:y?Y.W.Attribute:Y.W.ScreenDerivative,castShadows:!0,receiveShadows:c.receiveShadows,receiveAmbientOcclusion:c.receiveAmbientOcclustion,textureId:null!=M?M.id:void 0,colorMixMode:c.colorMixMode,normalTextureId:null!=c.normalTexture&&v?l.get(c.normalTexture).id:void 0,textureAlphaPremultiplied:null!=M&&!!M.parameters.preMultiplyAlpha,occlusionTextureId:null!=c.occlusionTexture&&v?l.get(c.occlusionTexture).id:void 0,emissiveTextureId:null!=c.emissiveTexture&&v?l.get(c.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=c.metallicRoughnessTexture&&v?l.get(c.metallicRoughnessTexture).id:void 0,emissiveFactor:[h,R,B],mrrFactors:I?Z.Bt:[c.metallicFactor,c.roughnessFactor,s.mrrFactors[2]],isSchematic:I,colorTextureTransformMatrix:(0,A.G)(c.colorTextureTransform),normalTextureTransformMatrix:(0,A.G)(c.normalTextureTransform),scale:[S[0],S[1]],occlusionTextureTransformMatrix:(0,A.G)(c.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,A.G)(c.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,A.G)(c.metallicRoughnessTextureTransform)},a),u))}const R=i.get(g);if(r.stageResources.materials.push(R),v){const e=e=>{null!=e&&r.stageResources.textures.push(l.get(e))};e(c.colorTexture),e(c.normalTexture),e(c.occlusionTexture),e(c.emissiveTexture),e(c.metallicRoughnessTexture)}return R}(u,e,S,t,r,f,m,s),{geometry:c,vertexCount:w}=function(e,t){const r=e.attributes.position.count,n=(0,b.x)(e.indices||r,e.primitiveType),o=(0,h.oe)(3*r),{typedBuffer:s,typedBufferStride:l}=e.attributes.position;(0,v.t)(o,s,e.transform,3,l);const u=[[G.r.POSITION,new C.n(o,n,3,!0)]];if(null!=e.attributes.normal){const t=(0,h.oe)(3*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.normal;(0,i.Ge)(te,e.transform),(0,v.b)(t,o,te,3,s),(0,a.or)(te)&&(0,v.n)(t,t),u.push([G.r.NORMAL,new C.n(t,n,3,!0)])}if(null!=e.attributes.tangent){const t=(0,h.oe)(4*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.tangent;(0,i.z0)(te,e.transform),(0,y.t)(t,o,te,4,s),(0,a.or)(te)&&(0,v.n)(t,t,4),u.push([G.r.TANGENT,new C.n(t,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,h.oe)(2*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.texCoord0;(0,x.a)(t,o,2,s),u.push([G.r.UV0,new C.n(t,n,2,!0)])}const c=e.attributes.color;if(null!=c){const t=new Uint8Array(4*r);4===c.elementCount?c instanceof g.Eq?(0,y.b)(t,c,1,255):(c instanceof g.XP||c instanceof g.Uz)&&(0,y.b)(t,c,1/255,255):(t.fill(255),c instanceof g.xs?(0,v.f)(t,c.typedBuffer,1,255,4,c.typedBufferStride):(e.attributes.color instanceof g.eI||e.attributes.color instanceof g.nS)&&(0,v.f)(t,c.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),u.push([G.r.COLOR,new C.n(t,n,4,!0)])}return{geometry:new F.V(t,u),vertexCount:r}}(e,null!==l&&void 0!==l?l:new j.$U({},s)),B=c.boundingInfo;null!=B&&0===M&&((0,p.iT)(R,B.bbMin),(0,p.iT)(R,B.bbMax)),null!=l&&(S.stageResources.geometries.push(c),S.numberOfVertices+=w)})),I||c.push(S)})),{engineResources:c,referenceBoundingBox:R}}(M,O,U,t,R.specifiedLodIndex);return{lods:_,referenceBoundingBox:D,isEsriSymbolResource:M.meta.isEsriSymbolResource,isWosr:!1}}const te=(0,l.vt)()},52007:(e,t,r)=>{r.d(t,{a:()=>s,f:()=>a,n:()=>o});var n=r(78393);function o(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const s=t.length/2;let a=0,i=0;if(!(0,n.iu)(t)||(0,n.dk)(t)){for(let n=0;n<s;++n)e[a]=t[i],e[a+1]=t[i+1],a+=r,i+=o;return}const l=(0,n.a3)(t);if((0,n.JI)(t))for(let n=0;n<s;++n)e[a]=Math.max(t[i]/l,-1),e[a+1]=Math.max(t[i+1]/l,-1),a+=r,i+=o;else for(let n=0;n<s;++n)e[a]=t[i]/l,e[a+1]=t[i+1]/l,a+=r,i+=o}function a(e,t,r,n){var o,s;const a=e.typedBuffer,i=e.typedBufferStride,l=null!==(o=null===n||void 0===n?void 0:n.count)&&void 0!==o?o:e.count;let u=(null!==(s=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==s?s:0)*i;for(let c=0;c<l;++c)a[u]=t,a[u+1]=r,u+=i}Object.freeze(Object.defineProperty({__proto__:null,fill:a,normalizeIntegerBuffer:s,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},54439:(e,t,r)=>{r.d(t,{G:()=>a});var n=r(44680),o=r(59422),s=r(63919);function a(e){if(null==e)return null;const t=null!=e.offset?e.offset:o.uY,r=null!=e.rotation?e.rotation:0,a=null!=e.scale?e.scale:o.Un,i=(0,n.fA)(1,0,0,0,1,0,t[0],t[1],1),l=(0,n.fA)(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),u=(0,n.fA)(a[0],0,0,0,a[1],0,0,0,1),c=(0,n.vt)();return(0,s.lw)(c,l,u),(0,s.lw)(c,i,c),c}},93795:(e,t,r)=>{function n(e){return e=e||globalThis.location.hostname,u.some((t=>{var r;return null!=(null===(r=e)||void 0===r?void 0:r.match(t))}))}function o(e,t){return e?(t=t||globalThis.location.hostname)?null!=t.match(s)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(a)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}r.d(t,{EM:()=>o,b5:()=>n});const s=/^devext\.arcgis\.com$/,a=/^qaext\.arcgis\.com$/,i=/^[\w-]*\.mapsdevext\.arcgis\.com$/,l=/^[\w-]*\.mapsqa\.arcgis\.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,s,a,/^jsapps\.esri\.com$/,i,l]}}]);
//# sourceMappingURL=9513.3052d3cf.chunk.js.map