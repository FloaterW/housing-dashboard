"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[3993],{11270:(e,t,r)=>{r.d(t,{q:()=>A});var a=r(89379),i=r(35143),n=r(50076),o=r(90534),s=r(46053),l=r(40565),y=(r(81806),r(47249),r(28379)),p=r(85842),c=r(17707),d=r(80979),u=r(6527),g=r(29584);const h={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},v={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},b={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},m={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":h,"web-map/basemap":v,"web-map/tables":b,"link-chart/operational-layers":(0,a.A)((0,a.A)({},h),{},{LinkChartLayer:!0}),"link-chart/basemap":v,"link-chart/tables":b,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};var w=r(95363),S=r(59187);const A=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){var a;return"Group Layer"===(null===r||void 0===r||null===(a=r.portalItem)||void 0===a?void 0:a.type)?void 0:e}writeListMode(e,t,r,a){(a&&"ground"===a.layerContainerType||e&&(0,g.R)(this,r,{},a))&&(t[r]=e)}writeOperationalLayerType(e,t,r){e&&(t[r]=e)}writeTitle(e,t){t.title=null!==e&&void 0!==e?e:"Layer"}readVisibilityTimeExtent(e){return e?S.A.fromArray(e):null}writeVisibilityTimeExtent(e,t,r,a){e&&"tables"!==a.layerContainerType&&(e.isEmpty?(null===a||void 0===a?void 0:a.messages)&&a.messages.push(new n.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,u.t)(this,e,(t=>super.read(e,t)),t)}write(e,t){var r;if(!this.persistenceEnabled&&(null===t||void 0===t||!t.ignorePersistenceEnabled))return null;if(null!==t&&void 0!==t&&t.origin){var i;const e="".concat(t.origin,"/").concat(t.layerContainerType||"operational-layers"),r=m[e];let a=!(null===r||void 0===r||!r[this.operationalLayerType]);if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(a=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(a=!1),!a)return null!==(i=t.messages)&&void 0!==i&&i.push(new n.A("layer:unsupported","Layers (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' are not supported in the context of '").concat(e,"'"),{layer:this})),null}const s=super.write(e,(0,a.A)((0,a.A)({},t),{},{layer:this})),l=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.A&&"web-document-write:property-required"===e.name)).length;return(0,o.w8)(null===s||void 0===s?void 0:s.url)?(null!==t&&void 0!==t&&null!==(r=t.messages)&&void 0!==r&&r.push(new n.A("layer:invalid-url","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Blob URL cannot be written to web scenes and web maps"),{layer:this})),null):!this.url&&l?null:s}beforeSave(){}};return(0,i._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i._)([(0,y.w)("id",["id"])],t.prototype,"readId",null),(0,i._)([(0,s.MZ)(w.C1)],t.prototype,"listMode",void 0),(0,i._)([(0,c.K)("listMode")],t.prototype,"writeListMode",null),(0,i._)([(0,s.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:d.K,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.K)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i._)([(0,s.MZ)(w.ke)],t.prototype,"opacity",void 0),(0,i._)([(0,s.MZ)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,i._)([(0,s.MZ)({type:S.A,json:{origins:{"web-scene":{write:{layerContainerTypes:d.K}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,y.w)("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),(0,i._)([(0,c.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[l.jz,l.Uv]]}})],t.prototype,"writeVisibilityTimeExtent",null),(0,i._)([(0,s.MZ)({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:d.K}}})],t.prototype,"visible",void 0),t=(0,i._)([(0,p.$)("esri.layers.mixins.OperationalLayer")],t),t}},13993:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var a,i=r(35143),n=r(3825),o=r(50076),s=r(45802),l=r(77717),y=r(46053),p=(r(81806),r(76460),r(47249),r(85842)),c=r(19247),d=r(13312),u=r(89379),g=r(76797),h=r(2413),v=r(25515),b=r(65624),m=r(21617),w=r(5682),S=r(16852),A=r(88235);const L=new(r(11164).U)("0/0/0",0,0,0,void 0);let M=a=class extends((0,b.dM)((0,w.j)((0,m.J)(v.A)))){constructor(){super(...arguments),this.tileInfo=A.A.create({spatialReference:d.A.WebMercator,size:256}),this.type="base-tile",this.fullExtent=new g.A(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,d.A.WebMercator),this.spatialReference=d.A.WebMercator}addResolvingPromise(e){super.addResolvingPromise(e)}getTileBounds(e,t,r,a){const i=a||(0,h.vt)();return L.level=e,L.row=t,L.col=r,L.extent=i,this.tileInfo.updateTileInfo(L),L.extent=void 0,i}fetchTile(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{signal:i}=a,o=this.getTileUrl(e,t,r),s={responseType:"image",signal:i,query:(0,u.A)({},this.refreshParameters)};return(0,n.A)(null!==o&&void 0!==o?o:"",s).then((e=>e.data))}async fetchImageBitmapTile(e,t,r){var i;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{signal:s}=o;if(this.fetchTile!==a.prototype.fetchTile){const a=await this.fetchTile(e,t,r,o);return(0,S.C)(a,e,t,r,s)}const l=null!==(i=this.getTileUrl(e,t,r))&&void 0!==i?i:"",y={responseType:"blob",signal:s,query:(0,u.A)({},this.refreshParameters)},{data:p}=await(0,n.A)(l,y);return(0,S.C)(p,e,t,r,s)}getTileUrl(){throw new o.A("basetilelayer:gettileurl-not-implemented","getTileUrl() is not implemented")}};(0,i._)([(0,y.MZ)({type:A.A})],M.prototype,"tileInfo",void 0),(0,i._)([(0,y.MZ)({type:["show","hide"]})],M.prototype,"listMode",void 0),(0,i._)([(0,y.MZ)({readOnly:!0,value:"base-tile"})],M.prototype,"type",void 0),(0,i._)([(0,y.MZ)({nonNullable:!0})],M.prototype,"fullExtent",void 0),(0,i._)([(0,y.MZ)()],M.prototype,"spatialReference",void 0),M=a=(0,i._)([(0,p.$)("esri.layers.BaseTileLayer")],M);const f=M;var I=r(11270),T=r(22848);const _=new s.J({BingMapsAerial:"aerial",BingMapsRoad:"road",BingMapsHybrid:"hybrid"});let G=class extends((0,b.dM)((0,I.q)((0,l.P)(f)))){constructor(e){super(e),this.type="bing-maps",this.tileInfo=new A.A({size:[256,256],dpi:96,origin:new c.A({x:-20037508.342787,y:20037508.342787,spatialReference:d.A.WebMercator}),spatialReference:d.A.WebMercator,lods:[new T.A({level:1,resolution:78271.5169639999,scale:295828763.795777}),new T.A({level:2,resolution:39135.7584820001,scale:147914381.897889}),new T.A({level:3,resolution:19567.8792409999,scale:73957190.948944}),new T.A({level:4,resolution:9783.93962049996,scale:36978595.474472}),new T.A({level:5,resolution:4891.96981024998,scale:18489297.737236}),new T.A({level:6,resolution:2445.98490512499,scale:9244648.868618}),new T.A({level:7,resolution:1222.99245256249,scale:4622324.434309}),new T.A({level:8,resolution:611.49622628138,scale:2311162.217155}),new T.A({level:9,resolution:305.748113140558,scale:1155581.108577}),new T.A({level:10,resolution:152.874056570411,scale:577790.554289}),new T.A({level:11,resolution:76.4370282850732,scale:288895.277144}),new T.A({level:12,resolution:38.2185141425366,scale:144447.638572}),new T.A({level:13,resolution:19.1092570712683,scale:72223.819286}),new T.A({level:14,resolution:9.55462853563415,scale:36111.909643}),new T.A({level:15,resolution:4.77731426794937,scale:18055.954822}),new T.A({level:16,resolution:2.38865713397468,scale:9027.977411}),new T.A({level:17,resolution:1.19432856685505,scale:4513.988705}),new T.A({level:18,resolution:.597164283559817,scale:2256.994353}),new T.A({level:19,resolution:.298582141647617,scale:1128.497176}),new T.A({level:20,resolution:.1492910708238085,scale:564.248588})]}),this.key=null,this.style="road",this.culture="en-US",this.region=null,this.portalUrl=null,this.hasAttributionData=!0}get bingMetadata(){return this._get("bingMetadata")}set bingMetadata(e){this._set("bingMetadata",e)}get copyright(){return null!=this.bingMetadata?this.bingMetadata.copyright:null}get operationalLayerType(){return _.toJSON(this.style)}get bingLogo(){return null!=this.bingMetadata?this.bingMetadata.brandLogoUri:null}load(e){return this.key?this.addResolvingPromise(this._getMetadata()):this.portalUrl?this.addResolvingPromise(this._getPortalBingKey().then((()=>this._getMetadata()))):this.addResolvingPromise(Promise.reject(new o.A("bingmapslayer:load","Bing layer must have bing key."))),Promise.resolve(this)}getTileUrl(e,t,r){if(!this.loaded||null==this.bingMetadata)return null;const a=this.bingMetadata.resourceSets[0].resources[0],i=a.imageUrlSubdomains[t%a.imageUrlSubdomains.length],n=this._getQuadKey(e,t,r);return a.imageUrl.replace("{subdomain}",i).replace("{quadkey}",n)}async fetchAttributionData(){return this.load().then((()=>null==this.bingMetadata?null:{contributors:this.bingMetadata.resourceSets[0].resources[0].imageryProviders.map((e=>({attribution:e.attribution,coverageAreas:e.coverageAreas.map((e=>({zoomMin:e.zoomMin,zoomMax:e.zoomMax,score:1,bbox:[e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]]})))})))}))}_getMetadata(){const e={road:"roadOnDemand",aerial:"aerial",hybrid:"aerialWithLabelsOnDemand"}[this.style];return(0,n.A)("".concat("https://dev.virtualearth.net","/REST/v1/Imagery/Metadata/").concat(e),{responseType:"json",query:{include:"ImageryProviders",uriScheme:"https",key:this.key,suppressStatus:!0,output:"json",culture:this.culture,userRegion:this.region}}).then((e=>{const t=e.data;if(200!==t.statusCode)throw new o.A("bingmapslayer:getmetadata",t.statusDescription);if(this.bingMetadata=t,0===this.bingMetadata.resourceSets.length)throw new o.A("bingmapslayer:getmetadata","no bing resourcesets");if(0===this.bingMetadata.resourceSets[0].resources.length)throw new o.A("bingmapslayer:getmetadata","no bing resources")})).catch((e=>{throw new o.A("bingmapslayer:getmetadata",e.message)}))}_getPortalBingKey(){var e;return(0,n.A)(null!==(e=this.portalUrl)&&void 0!==e?e:"",{responseType:"json",authMode:"no-prompt",query:{f:"json"}}).then((e=>{if(!e.data.bingKey)throw new o.A("bingmapslayer:getportalbingkey","The referenced Portal does not contain a valid bing key");this.key=e.data.bingKey})).catch((e=>{throw new o.A("bingmapslayer:getportalbingkey",e.message)}))}_getQuadKey(e,t,r){let a="";for(let i=e;i>0;i--){let e=0;const n=1<<i-1;r&n&&(e+=1),t&n&&(e+=2),a+=e.toString()}return a}};(0,i._)([(0,y.MZ)({json:{read:!1,write:!1},value:null})],G.prototype,"bingMetadata",null),(0,i._)([(0,y.MZ)({json:{read:!1,write:!1},value:"bing-maps",readOnly:!0})],G.prototype,"type",void 0),(0,i._)([(0,y.MZ)({type:A.A})],G.prototype,"tileInfo",void 0),(0,i._)([(0,y.MZ)({type:String,readOnly:!0,json:{read:!1,write:!1}})],G.prototype,"copyright",null),(0,i._)([(0,y.MZ)({type:String,json:{write:!1,read:!1}})],G.prototype,"key",void 0),(0,i._)([(0,y.MZ)({type:_.apiValues,nonNullable:!0,json:{read:{source:"layerType",reader:_.read}}})],G.prototype,"style",void 0),(0,i._)([(0,y.MZ)({type:["BingMapsAerial","BingMapsHybrid","BingMapsRoad"]})],G.prototype,"operationalLayerType",null),(0,i._)([(0,y.MZ)({type:String,json:{write:!1,read:!1}})],G.prototype,"culture",void 0),(0,i._)([(0,y.MZ)({type:String,json:{write:!1,read:!1}})],G.prototype,"region",void 0),(0,i._)([(0,y.MZ)({type:String,json:{write:!0,read:!0}})],G.prototype,"portalUrl",void 0),(0,i._)([(0,y.MZ)({type:Boolean,json:{write:!1,read:!1}})],G.prototype,"hasAttributionData",void 0),(0,i._)([(0,y.MZ)({type:String,readOnly:!0})],G.prototype,"bingLogo",null),G=(0,i._)([(0,p.$)("esri.layers.BingMapsLayer")],G);const C=G},16852:(e,t,r)=>{r.d(t,{C:()=>o,m:()=>n});var a=r(50076),i=r(50346);async function n(e,t,r){let n;try{n=await createImageBitmap(e)}catch(o){throw new a.A("request:server","Unable to load ".concat(t),{url:t,error:o})}return(0,i.Te)(r),n}async function o(e,t,r,n,o){let s;try{s=await createImageBitmap(e)}catch(l){throw new a.A("request:server","Unable to load tile ".concat(t,"/").concat(r,"/").concat(n),{error:l,level:t,row:r,col:n})}return(0,i.Te)(o),s}},21617:(e,t,r)=>{r.d(t,{J:()=>S});var a=r(35143),i=(r(81806),r(76460)),n=r(50346),o=r(46053),s=r(21403),l=(r(47249),r(85842)),y=r(80979),p=r(94643),c=r(68134),d=r(49281);const u=new p.A,g=new WeakMap;function h(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function v(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:v(t,e%t):0}let b=0,m=0;function w(){const e=Date.now();let t=!1;for(const a of u){const i=a.deref();var r;if(i){if(i.refreshInterval)e-(null!==(r=g.get(i))&&void 0!==r?r:0)+5>=6e4*i.refreshInterval&&(g.set(i,e),i.refresh(e))}else t=!0}if(t)for(let a=u.length-1;a>=0;a--)u.at(a).deref()||u.removeAt(a)}(0,d.fm)((()=>{const e=Date.now();let t=0;for(const r of u){const a=r.deref();a&&(t=v(Math.round(6e4*a.refreshInterval),t),a.refreshInterval?g.get(a)||g.set(a,e):g.delete(a))}if(t!==m){if(m=t,clearInterval(b),0===m)return void(b=0);b=setInterval(w,m)}}),c.OH);const S=e=>{let t=class extends e{constructor(){super(...arguments),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,n.sg)((()=>this.hasDataChanged())),this.when().then((()=>{var e;this.destroyed||h(e=this)&&u.push(new WeakRef(e))}),(()=>{}))}destroy(){!function(e){const t=u.find((t=>t.deref()===e));t&&u.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,n.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,a._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:y.K}}}}})],t.prototype,"refreshInterval",void 0),(0,a._)([(0,s.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,a._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,a._)([(0,o.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,a._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}}}]);
//# sourceMappingURL=3993.13d55175.chunk.js.map