"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[2844,3966,6340,6783],{1900:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(50076),n=i(42553),o=i(76460),s=i(87663),l=i(64920),a=i(53430),u=i(36693),d=i(67478),c=i(24241);const p=new Map;class h{static fromJSON(e){return new h(e.fields,e.timeZoneByFieldName)}static fromLayer(e){var t;return new h(null!==(t=e.fields)&&void 0!==t?t:[],v(e))}static fromLayerJSON(e){var t;return new h(null!==(t=e.fields)&&void 0!==t?t:[],v(e))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const i=[];for(const n of this.fields){const e=null===n||void 0===n?void 0:n.name,t=f(e);if(e&&t){var r;const o=y(e);this._fieldsMap.set(e,n),this._fieldsMap.set(o,n),this._normalizedFieldsMap.set(t,n),i.push("".concat(o,":").concat(n.type,":").concat(null===(r=this._timeZoneByFieldName)||void 0===r?void 0:r.get(e))),(0,a.vE)(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):(0,a.WA)(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),(0,a.te)(n)||(0,a.Xz)(n)||(n.editable=null==n.editable||!!n.editable,n.nullable=null==n.nullable||!!n.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,a.te)(e)||(0,a.Xz)(e)||e.nullable||void 0!==(0,a.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(null===e||void 0===e?void 0:e.uid)}has(e){return null!=this.get(e)}get(e){var t;if(!e)return;let i=this._fieldsMap.get(e);return i||(i=null!==(t=this._fieldsMap.get(y(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(f(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(o.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new r.A("getTimeZone:no-timezone-information","no time zone information for field '".concat(t.name,"'"))),u.n$):m.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?l.GB.instance:t===u.n$?c.mQ.utcInstance:(0,s.tE)(p,t,(()=>c.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var t,i;return null!==(t=null===(i=this.get(e))||void 0===i?void 0:i.name)&&void 0!==t?t:void 0}toJSON(){return{fields:this.fields.map((e=>n.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function f(e){var t,i;return null!==(t=null===(i=(0,a.rS)(e))||void 0===i?void 0:i.toLowerCase())&&void 0!==t?t:""}const m=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function v(e){var t,i,r,n,o,s,l;const a=new Map;if(!e.fields)return a;const c=!0===e.datesInUnknownTimezone,{timeInfo:p,editFieldsInfo:h}=e,f=null!==(t=p?"startField"in p?p.startField:p.startTimeField:"")&&void 0!==t?t:"",v=null!==(i=p?"endField"in p?p.endField:p.endTimeField:"")&&void 0!==i?i:"",b=function(e){return"dateFieldsTimeZone"in e}(e)?null!==(r=e.dateFieldsTimeZone)&&void 0!==r?r:null:e.dateFieldsTimeReference?(0,d.ZS)(e.dateFieldsTimeReference):null,g=h?function(e){return"timeZone"in e}(h)?null!==(n=h.timeZone)&&void 0!==n?n:b:h.dateFieldsTimeReference?(0,d.ZS)(h.dateFieldsTimeReference):null!==b&&void 0!==b?b:u.n$:null,M=p?function(e){return"timeZone"in e}(p)?null!==(o=p.timeZone)&&void 0!==o?o:b:p.timeReference?(0,d.ZS)(p.timeReference):b:null,_=new Map([[y(null!==(s=null===h||void 0===h?void 0:h.creationDateField)&&void 0!==s?s:""),g],[y(null!==(l=null===h||void 0===h?void 0:h.editDateField)&&void 0!==l?l:""),g],[y(f),M],[y(v),M]]);for(const{name:d,type:w}of e.fields)if(m.has(w))a.set(d,u.L5);else if("date"!==w&&"esriFieldTypeDate"!==w)a.set(d,null);else if(c)a.set(d,u.L5);else{var S;const e=null!==(S=_.get(y(null!==d&&void 0!==d?d:"")))&&void 0!==S?S:b;a.set(d,e)}return a}},20665:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(89379),n=i(35143),o=i(91967),s=i(98773),l=i(94643),a=i(46053),u=(i(81806),i(76460),i(47249),i(85842)),d=i(53430),c=i(98976);let p=class extends o.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.UT)((()=>(0,c.lw)())):null}get featureUtilsPromise(){var e;return null!==(e=this._get("featureUtilsPromise"))&&void 0!==e?e:i.e(9912).then(i.bind(i,9912)).then((e=>this._featureUtils=e))}get calculatedExpressions(){var e;const t=new l.A;if(!this.expressionsUsedInTitle.length)return t;if(null===(e=this._arcadeTask)||void 0===e||!e.value){for(const e of null!==(i=this.expressionsUsedInTitle)&&void 0!==i?i:[]){var i;t.push({name:e.name,invalid:!0})}return t}for(const n of this.expressionsUsedInTitle)try{const e=this._arcadeTask.value.arcade.parseScript(n.expression,["$layer","$map","$datastore"]);if(e.isAsync){t.push({name:n.name,invalid:!0});break}t.push({name:n.name,syntax:e,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(e,{vars:{$feature:"any"}})})}catch(r){t.push({name:n.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var e,t,i,r;let n=null!==(e=null===(t=this.effectivePopupTemplate)||void 0===t?void 0:t.title)&&void 0!==e?e:"";return"string"!=typeof n?[]:(n=n.toLowerCase(),null!==(i=null===(r=this.effectivePopupTemplate)||void 0===r||null===(r=r.expressionInfos)||void 0===r?void 0:r.filter((e=>n.includes("{expression/".concat(e.name.toLowerCase(),"}")))))&&void 0!==i?i:[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){var e;const t=new Set;if(null!==(e=this._arcadeTask)&&void 0!==e&&e.value&&!this.hasBadExpressions)for(const l of null!==(i=null===(r=this.calculatedExpressions)||void 0===r?void 0:r.toArray())&&void 0!==i?i:[]){var i,r;try{const e=this._arcadeTask.value.arcade.extractFieldLiterals(l.syntax);for(const i of e){var n;const e=i.split("."),r=this.fieldsIndex.get(null!==(n=e.at(-1))&&void 0!==n?n:"");r&&t.add(r.name)}}catch(s){}}const o=this._extractFieldNames(this.workingTitle);for(const l of o){const e=this.fieldsIndex.get(l);e&&t.add(e.name)}return t}get titleFromDisplayField(){var e,t,i,r;let n="";return this.displayField&&(n=null!==(e=null===(t=this.fieldsIndex.get(this.displayField))||void 0===t?void 0:t.name)&&void 0!==e?e:""),n||(n=null!==(i=null===(r=this.fieldsIndex.get(this.objectIdField))||void 0===r?void 0:r.name)&&void 0!==i?i:""),n?"{".concat(n,"}"):""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,i){try{var r,n;const{attributes:o}=t,s=null!==(r=null===i||void 0===i?void 0:i.timeZone)&&void 0!==r?r:"system",[{substituteFieldsInLinksAndAttributes:l}]=await Promise.all([this.featureUtilsPromise,null===(n=this._arcadeTask)||void 0===n?void 0:n.promise]);if(i.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const i=this._createFormattedAttributes(e,t,s).global;return l({attributes:o,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:i,layer:e,text:this.workingTitle})}return""}catch(o){}return""}async _checkAndReQueryGraphic(e,t){const i=t.getObjectId();if(null==i)return t;if(!(0,d.Kl)(this.requiredFields,t)){const t=e.createQuery();t.where="1=1",t.outFields=[...this.requiredFields],t.objectIds=[i];const r=await e.queryFeatures(t);if(1===(null===r||void 0===r?void 0:r.features.length))return r.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){var i;if(!r.fieldName)continue;const e=this.fieldsIndex.get(r.fieldName),n=null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:r.fieldName;r.fieldName=n,t.set(n.toLowerCase(),r)}return t}_createFormattedAttributes(e,t){var i,n,o;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"system";const l=null!==(i=null===(n=this.effectivePopupTemplate)||void 0===n?void 0:n.fieldInfos)&&void 0!==i?i:[],a={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&null!==(o=this._arcadeTask)&&void 0!==o&&o.value){const i=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{a["expression/".concat(e.name)]=e.func({vars:{$feature:i}})}catch(d){}}const u=(0,r.A)((0,r.A)({},t.attributes),a);return{global:this._featureUtils.formatAttributes({fieldInfos:l,attributes:u,graphic:t,timeZone:s,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,d.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,n._)([(0,a.MZ)({readOnly:!0})],p.prototype,"_arcadeTask",null),(0,n._)([(0,a.MZ)()],p.prototype,"_featureUtils",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],p.prototype,"featureUtilsPromise",null),(0,n._)([(0,a.MZ)({readOnly:!0})],p.prototype,"calculatedExpressions",null),(0,n._)([(0,a.MZ)()],p.prototype,"displayField",void 0),(0,n._)([(0,a.MZ)()],p.prototype,"effectivePopupTemplate",void 0),(0,n._)([(0,a.MZ)()],p.prototype,"expressionsUsedInTitle",null),(0,n._)([(0,a.MZ)()],p.prototype,"fieldsIndex",void 0),(0,n._)([(0,a.MZ)()],p.prototype,"fieldInfoMap",null),(0,n._)([(0,a.MZ)()],p.prototype,"fields",void 0),(0,n._)([(0,a.MZ)()],p.prototype,"objectIdField",void 0),(0,n._)([(0,a.MZ)()],p.prototype,"requiredFields",null),p=(0,n._)([(0,u.$)("esri.layers.support.TitleCreator")],p);const h=p},44460:(e,t,i)=>{i.d(t,{Cb:()=>o,HW:()=>d,JR:()=>n,JZ:()=>a,WR:()=>l,b6:()=>c,fT:()=>r,nC:()=>u,yM:()=>s});const r=[252,146,31,255],n=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},d={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},53521:(e,t,i)=>{i.d(t,{q:()=>n});var r=i(79369);class n{constructor(e,t){this._storage=new r.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},59784:(e,t,i)=>{i.d(t,{$:()=>M,IB:()=>l,Iy:()=>E,N2:()=>_,QP:()=>Z,RH:()=>w,Vl:()=>k,Ws:()=>I,ZD:()=>S,_L:()=>z,bJ:()=>T,e$:()=>x,f6:()=>O,pW:()=>A,pf:()=>L});var r=i(69539),n=i(18690),o=i(53084),s=(i(15941),i(43047),i(55855));function l(e){return"r"in e&&"g"in e&&"b"in e}function a(e){return"h"in e&&"s"in e&&"v"in e}function u(e){return"l"in e&&"a"in e&&"b"in e}function d(e){return"l"in e&&"c"in e&&"h"in e}const c=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],p=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function h(e,t){const i=[];let r,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let l=0;for(r=0;r<o;r++){for(l=0,n=0;n<s;n++)l+=e[r][n]*t[n];i.push(l)}return i}function y(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),i=h(c,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function f(e){const t=h(p,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function m(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function v(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function b(e){return function(e){const t=e.l,i=e.a,r=e.b,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o=o>0?o:o+2*Math.PI,{l:t,c:n,h:o}}(m(y(e)))}function g(e){return f(v(function(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}(e)))}function M(e){return l(e)?e:d(e)?g(e):u(e)?function(e){return f(v(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?f(e):a(e)?function(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,n=r*i,o=n*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:n,g:o,b:0};break;case 1:s={r:o,g:n,b:0};break;case 2:s={r:0,g:n,b:o};break;case 3:s={r:0,g:o,b:n};break;case 4:s={r:o,g:0,b:n};break;case 5:case 6:s={r:n,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+r-n),s.g=Math.round(s.g+r-n),s.b=Math.round(s.b+r-n),s}(e):e}function _(e){return a(e)?e:function(e){const t=e.r,i=e.g,r=e.b,n=Math.max(t,i,r),o=n-Math.min(t,i,r);let s=n,l=0===o?0:n===t?(i-r)/o%6:n===i?(r-t)/o+2:(t-i)/o+4,a=0===o?0:o/s;return l<0&&(l+=6),l*=60,a*=100,s*=100/255,{h:l,s:a,v:s}}(M(e))}function S(e){return u(e)?e:function(e){return m(y(e))}(M(e))}function w(e){return d(e)?e:b(M(e))}function F(e){let{r:t,g:i,b:n,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),i=Math.round(o*i+255*(1-o)),n=Math.round(o*n+255*(1-o))),new r.A({r:t,g:i,b:n})}function I(e,t){const{r:i,g:r,b:n}=null!==t&&void 0!==t&&t.ignoreAlpha?e:F(e);return.2126*i+.7152*r+.0722*n}var A,C;function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.High;return I(e,{ignoreAlpha:!0})>t?new r.A([0,0,0,e.a]):new r.A([255,255,255,e.a])}function x(e,t){const i=S(e);i.l*=1-t;const r=M(i),n=e.clone();return n.setColor(r),n.a=e.a,n}function z(e,t){const i=e.clone();return i.a*=t,i}function k(e,t){const i=_(e);i.s*=t;const r=M(i),n=e.clone();return n.setColor(r),n.a=e.a,n}function Z(e){return r.A.toUnitRGBA(e)}function L(e){return(0,s.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function O(e,t){const i=r.A.toUnitRGBA(e);return i[3]*=t,i}function E(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new r.A(e):e))).length||1===t){const i=[],r=e[0];for(let e=0;e<t;e++)i.push(r.clone());return i}if(i.shuffle&&(e=(0,n.k4)((0,o.o8)(e),i.seed)),e.length>=t){const i=[],r=(e.length-1)/(t-1);for(let n=0;n<t;n++){const t=Math.round(n*r);i.push(e[t].clone())}return i}return function(e,t){var i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=[],s=e.length-1,l=Math.ceil((t-e.length)/s);e:for(let n=0;n<s;n++){const i=e[n],s=e[n+1];for(let n=1;n<=l;n++){const a=n/(l+1);if(o.push(j(i,s,a,r)),o.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,n.k4)(o,null!==(i=r.seed)&&void 0!==i?i:1)]}(e,t,i)}(C=A||(A={}))[C.Low=160]="Low",C[C.High=225]="High";const P=(e,t)=>{const i=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+i))};function j(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.r,l=e.g,a=e.b,u=t.r,d=t.g,c=t.b,p=Math.round(s+(u-s)*i),h=Math.round(l+(d-l)*i),y=Math.round(a+(c-a)*i);if(!o.offset)return new r.A([p,h,y]);const f=(0,n.Mo)(o.seed);return new r.A([P(p,f),P(h,f),P(y,f)])}},61701:(e,t,i)=>{var r;i.d(t,{X:()=>r}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))},64810:(e,t,i)=>{i.d(t,{Ch:()=>a,mW:()=>s,u2:()=>l});var r=i(89379),n=i(15941),o=i(34154);function s(e,t){return(0,r.A)((0,r.A)({},t),{},{filterMode:e.mode})}function l(e,t){var i;return null!==(i=u(e,t).next().value)&&void 0!==i?i:null}function a(e,t,i){const r=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)t[0]=Math.max(t[0],p(i)),t[1]=Math.min(t[1],h(r));return t}(e);if(r&&((0,n.gg)(t,r[0])||(0,n.ZH)(i,r[1])))return"";const s=Array.from(u(e,t,i)),l=function(e,t,i){var r,o;if(0===e.length)return!0;const s=p(null===(r=e.at(0))||void 0===r?void 0:r.minScale),l=h(null===(o=e.at(-1))||void 0===o?void 0:o.maxScale);if((0,n.ZH)(s,t)||(0,n.gg)(l,i))return!0;for(let a=0;a<e.length-1;a++){const t=e[a],i=e[a+1];if((0,n.ZH)(p(i.minScale),h(t.maxScale)))return!0}return!1}(s,t,i)?"1=1":s.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,o.IW)(e,t)),"");return l&&"1=1"!==l?l:""}function*u(e,t,i){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)d(r.minScale,r.maxScale,t,i)&&(yield r)}}function d(e,t,i,r){return e=p(e),i=p(i),t=h(t),!(!(0,n.Sp)(i,e)&&(null!==r&&void 0!==r?r:i)>e)&&!(0,n.Hx)(t,i)&&(void 0===r||!(0,n.Sp)(r,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function p(e){return e||Number.POSITIVE_INFINITY}function h(e){return e||0}},65460:(e,t,i)=>{i.d(t,{BI:()=>m,D3:()=>y,XJ:()=>f,lc:()=>h,mX:()=>b,rU:()=>v,tH:()=>w});var r=i(88685);const n="__begin__",o="__end__",s=new RegExp(n,"ig"),l=new RegExp(o,"ig"),a=new RegExp("^"+n,"i"),u=new RegExp(o+"$","i"),d='"',c=d+" + ",p=" + "+d;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function y(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function m(e){const t=f(e);switch(t.type){case"conventional":return b(t.expression);case"arcade":return t.expression}return null}function v(e){const t=f(e);switch(t.type){case"conventional":return function(e){const t=null===e||void 0===e?void 0:e.match(g);return(null===t||void 0===t?void 0:t[1].trim())||null}(t.expression);case"arcade":return w(t.expression)}return null}function b(e){let t;return e?(t=(0,r.HC)(e,(e=>n+'$feature["'+e+'"]'+o)),t=a.test(t)?t.replace(a,""):d+t,t=u.test(t)?t.replace(u,""):t+d,t=t.replaceAll(s,c).replaceAll(l,p)):t='""',t}const g=/^\s*\{([^}]+)\}\s*$/i;const M=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,_=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,S=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function w(e){if(!e)return null;let t=M.exec(e)||_.exec(e);return t?t[1]||t[3]:(t=S.exec(e),t?t[2]:null)}},79369:(e,t,i)=>{i.d(t,{F:()=>a,Ti:()=>n});var r=i(30015);const n=-3,o=n-1;var s,l;(l=s||(s={}))[l.ALL=0]="ALL",l[l.SOME=1]="SOME";class a{get size(){return this._size}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.A,this._users=new r.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){var i;const r=this._db.get(e.id+t);return null!==(i=null===r||void 0===r?void 0:r.size)&&void 0!==i?i:0}put(e,t,i,r,l){t=e.id+t;const a=this._db.get(t);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(t),a.entry!==i&&this._notifyRemove(t,a.entry,a.size,s.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,r,s.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return console.warn("Refusing to cache entry with size ".concat(r," for key ").concat(t)),void this._notifyRemove(t,i,0,s.ALL);const d=1+Math.max(l,o)-n;this._db.set(t,new u(i,r,d)),this._size+=r,e.size+=r,this._checkSize()}updateSize(e,t,i,r){t=e.id+t;const n=this._db.get(t);if(n&&n.entry===i){for(this._size-=n.size,e.size-=n.size;r>this._maxSize;){const e=this._notifyRemove(t,i,r,s.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);r=e}n.size=r,this._size+=r,e.size+=r,this._checkSize()}}pop(e,t){t=e.id+t;const i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;const i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){const i=this._db.get(e.id+t);return i?++this._hit:++this._miss,null===i||void 0===i?void 0:i.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,r)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const{id:n,name:o}=i;if(r.startsWith(n)){const i=t[o]||0;t[o]=i+e.size}}))}));const r={};this._users.forAll((e=>{const i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const o=Object.keys(t);o.sort(((e,i)=>t[i]-t[e])),o.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+r[i]));for(let s=i.length-1;s>=0;--s){const t=i[s];t&&(e["Priority "+(s+n-1)]=Math.round(t/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,s.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,s.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,r){let n;return this._removeFuncs.some((o=>{if(e.startsWith(o[0])){const e=o[1](t,r,i);return"number"==typeof e&&(n=e),!0}return!1})),n}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=null!==e&&void 0!==e?e:this;if(t.maxSize<0||t.size<=t.maxSize)return;const i=null===e||void 0===e?void 0:e.id;let r=!0;for(;r;){r=!1;for(const[n,o]of this._db)if(0===o.lifetime&&(!i||n.startsWith(i))){if(this._purgeItem(n,o,e),t.size<=.9*t.maxSize)return;r||(r=this._db.has(n))}}for(const[n,o]of this._db)if((!i||n.startsWith(i))&&(this._purgeItem(n,o,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((t=>e.startsWith(t.id)));if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);const r=this._notifyRemove(e,t.entry,t.size,s.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}class u{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}},84202:(e,t,i)=>{i.d(t,{A7:()=>u,Cx:()=>d,Hk:()=>c,JJ:()=>f,SF:()=>p,UK:()=>a,jM:()=>h,x3:()=>y});i(81806);var r=i(86875),n=i(7246),o=i(76940),s=i(86659),l=i(44460);const a=o.A.fromJSON(l.Cb),u=n.A.fromJSON(l.yM),d=r.A.fromJSON(l.WR),c=s.A.fromJSON(l.JZ);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return u;case"polygon":case"extent":return d}return null}const h=o.A.fromJSON(l.nC),y=n.A.fromJSON(l.HW),f=r.A.fromJSON(l.b6)},86061:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ze});var r=i(89379),n=i(35143),o=i(69098),s=i(94643),l=i(50076),a=i(27741),u=i(77717),d=i(50346),c=i(68134),p=i(34154),h=i(90534),y=i(46053),f=(i(81806),i(76460)),m=(i(47249),i(28379)),v=i(85842),b=i(25515),g=i(12406),M=i(19502),_=i(65624),S=i(31362),w=i(30218),F=i(61979),I=i(67187),A=i(11270),C=i(94729),T=i(21617),x=i(5682),z=i(78817),k=i(13096),Z=i(95363),L=i(46326),O=i(76350),E=i(53430),P=i(59784),j=i(7982),N=i(63844),R=i(71832),q=i(5766),D=i(35039),G=i(29632),V=i(94439);const U={key:"type",base:R.A,errorContext:"renderer",typeMap:{simple:q.A,"unique-value":D.A,"class-breaks":N.A}},B=(0,j.C)({types:U});const H=["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"];var $=i(16868),J=i(5632),W=i(53084),Q=i(49304),X=i(30726),K=i(48611),Y=i(17707),ee=i(80979),te=i(75547),ie=i(13312),re=i(15427),ne=i(95114),oe=i(27937),se=i(20665),le=i(97015),ae=i(30973),ue=i(84202),de=i(77685);const ce=(0,O.p)();let pe=0;function he(e,t){let i=e.json.write;return"object"!=typeof i&&(i=e.json.write={}),i.ignoreOrigin=!0,null!==t&&void 0!==t&&t.spatialOnly&&(i.layerContainerTypes=ee.K),e}function ye(e){const t={write:{ignoreOrigin:!0}};return null!==e&&void 0!==e&&e.name&&(t.name=e.name),"object"==typeof t.write&&(null!==e&&void 0!==e&&e.spatialOnly&&(t.write.layerContainerTypes=ee.K),null!==e&&void 0!==e&&e.target&&(t.write.target=e.target)),t}function fe(e){switch(e){case"point":case"multipoint":return ue.UK.clone();case"polyline":return ue.A7.clone();case"polygon":case"multipatch":return ue.Cx.clone();default:return null}}function me(e,t){var i;return null==e?null:null===(i=t.subtypes)||void 0===i?void 0:i.find((t=>t.code===e))}function ve(e,t){let i=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":i="point";break;case"esriGeometryPolyline":i="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":i="polygon";break;default:t.type,i=null}const r={},n=me(e,t);if(null!=n){const{defaultValues:e}=n;for(const t in e)r[t]=e[t]}return r[t.subtypeField]=e,new re.A({name:"New Feature",drawingTool:i,prototype:{attributes:r}})}let be=class extends((0,u.P)(o.A.ClonableMixin(J.A.IdentifiableMixin(Q.A)))){constructor(e){super(e),this.attributeTableTemplate=null,this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id="".concat(Date.now().toString(16),"-subtype-sublayer-").concat(pe++),this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}load(e){return(0,E.yp)(this.renderer,this.fieldsIndex),Promise.resolve(this)}get _titleCreator(){var e,t,i;const r=this._get("_titleCreator");return(0,X.pR)(r),new se.A({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,displayField:null!==(e=null===(t=this.parent)||void 0===t?void 0:t.displayField)&&void 0!==e?e:"",fields:this.fields,effectivePopupTemplate:null!==(i=this.popupTemplate)&&void 0!==i?i:this.defaultPopupTemplate})}get capabilities(){var e;return null===(e=this.parent)||void 0===e?void 0:e.capabilities}get effectiveCapabilities(){var e;return null===(e=this.parent)||void 0===e?void 0:e.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){var e;return null===(e=this.parent)||void 0===e?void 0:e.elevationInfo}get featureTitleFields(){return[...this._titleCreator.requiredFields]}writeFieldOverrides(e,t,i){var r;const{fields:n,parent:o}=this;let s;if(n){s=[];let e=0;n.forEach((t=>{var i;let{name:r,alias:n,editable:l,visible:a}=t;if(!a)return;const u=null===o||void 0===o||null===(i=o.fields)||void 0===i?void 0:i.find((e=>e.name===r));if(!u)return;const d={name:r};let c=!1;n!==u.alias&&(d.alias=n,c=!0),l!==u.editable&&(d.editable=l,c=!0),s.push(d),c&&e++})),0===e&&s.length===n.length&&(s=null)}else s=(0,W.o8)(e);(null===(r=s)||void 0===r?void 0:r.length)&&(0,K.sM)(i,s,t)}get fields(){const{parent:e,fieldOverrides:t,subtypeCode:i}=this,r=null===e||void 0===e?void 0:e.fields;if(!e||null===r||void 0===r||!r.length)return null;const{subtypes:n,subtypeField:o}=e,s=null===n||void 0===n?void 0:n.find((e=>e.code===i)),l=null===s||void 0===s?void 0:s.defaultValues,a=null===s||void 0===s?void 0:s.domains,u=[];for(const p of r){var d,c;const e=p.clone(),{name:r}=e,n=null===t||void 0===t?void 0:t.find((e=>e.name===r));if(e.visible=!(null!==t&&void 0!==t&&t.length)||!!n,n){const{alias:t,editable:i}=n;t&&(e.alias=t),!1===i&&(e.editable=!1)}const s=null!==(d=null===l||void 0===l?void 0:l[r])&&void 0!==d?d:null;e.defaultValue=r===o?i:s;const h=null!==(c=null===a||void 0===a?void 0:a[r])&&void 0!==c?c:null;e.domain=r===o?null:h?"inherited"===h.type?e.domain:h.clone():null,u.push(e)}return u}get floorInfo(){var e;return null===(e=this.parent)||void 0===e?void 0:e.floorInfo}get isTable(){var e;return!(null===(e=this.parent)||void 0===e||!e.isTable)}get geometryType(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryType}get globalIdField(){return this.parent?this.parent.globalIdField:(f.A.getLogger(this).error(_e("globalIdField")),null)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get objectIdField(){var e;return this.parent||f.A.getLogger(this).error(_e("objectIdField")),null===(e=this.parent)||void 0===e?void 0:e.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}get relationships(){var e;return null===(e=this.parent)||void 0===e?void 0:e.relationships}set renderer(e){(0,E.yp)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?function(e){return new q.A({symbol:fe(e)})}(e.geometryType):null}readRendererFromService(e,t,i){var r,n;if("Table"===t.type)return null;const o=null===(r=t.drawingInfo)||void 0===r?void 0:r.renderer,s=B(o,t,i);let l;const{subtypeCode:a}=this;if(null!=a&&function(e,t){return!!t&&"unique-value"===(null===e||void 0===e?void 0:e.type)&&null!=e.field&&e.field.toLowerCase()===t.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression}(s,t.subtypeField)){var u;const e=null===(u=s.uniqueValueInfos)||void 0===u?void 0:u.find((e=>{let{value:t}=e;return(t="number"==typeof t?String(t):t)===String(a)}));e&&(l=new q.A({symbol:e.symbol}))}else"simple"!==(null===s||void 0===s?void 0:s.type)||(null===(n=s.visualVariables)||void 0===n?void 0:n.length)||(l=s);return l}readRenderer(e,t,i){var r,n;const o=null===t||void 0===t||null===(r=t.layerDefinition)||void 0===r||null===(r=r.drawingInfo)||void 0===r?void 0:r.renderer;if(!o)return;const s=null===(n=o.visualVariables)||void 0===n?void 0:n.some((e=>"rotationInfo"!==e.type));return s?void 0:B(o,t,i)||void 0}get spatialReference(){var e,t;return null!==(e=null===(t=this.parent)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:ie.A.WGS84}get subtypeField(){var e;return null===(e=this.parent)||void 0===e?void 0:e.subtypeField}readTemplatesFromService(e,t){return[ve(this.subtypeCode,t)]}readTitleFromService(e,t){const i=me(this.subtypeCode,t);return null!=i?i.name:null}get url(){var e;return null===(e=this.parent)||void 0===e?void 0:e.url}get userHasUpdateItemPrivileges(){var e;return!(null===(e=this.parent)||void 0===e||!e.userHasUpdateItemPrivileges)}async addAttachment(e,t){const{parent:i}=this;if(!i)throw _e("addAttachment");if(e.getAttribute(i.subtypeField)!==this.subtypeCode)throw new l.A("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return i.addAttachment(e,t)}async updateAttachment(e,t,i){const{parent:r}=this;if(!r)throw _e("updateAttachment");if(e.getAttribute(r.subtypeField)!==this.subtypeCode)throw new l.A("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return r.updateAttachment(e,t,i)}async deleteAttachments(e,t){const{parent:i}=this;if(!i)throw _e("deleteAttachments");if(e.getAttribute(i.subtypeField)!==this.subtypeCode)throw new l.A("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return i.deleteAttachments(e,t)}async applyEdits(e,t){if(!this.parent)throw _e("applyEdits");return this.parent.applyEdits(e,t)}createPopupTemplate(e){let t=this;const{parent:i,fields:r,title:n}=this;if(i){const{displayField:e,editFieldsInfo:o,objectIdField:s}=i;t={displayField:e,editFieldsInfo:o,fields:r,objectIdField:s,title:n}}return(0,ae.tn)(t,e)}createQuery(){if(!this.parent)throw _e("createQuery");const e=(0,L.VZ)(this.parent),t="".concat(this.parent.subtypeField,"=").concat(this.subtypeCode);return e.where=(0,p.mA)(t,this.parent.definitionExpression),e}getFeatureTitle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeZone:"system",fetchMissingFields:!1};return this._titleCreator.getTitle(this,e,t)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){if((null===t||void 0===t||!t.excludeImpliedDomains)&&this.parent){const t=(0,L.pc)(this.parent,e);if(t)return t}return this._getLayerDomain(e)}async queryAttachments(e,t){const i=await this.load();if(!i.parent)throw _e("queryAttachments");const r=e.clone();return r.where=Me(r.where,i.parent.subtypeField,i.subtypeCode),i.parent.queryAttachments(e,t)}async queryFeatureCount(e,t){const i=await this.load();if(!i.parent)throw _e("queryFeatureCount");return i.parent.queryFeatureCount(ge(i.parent,i,e),t)}async queryFeatures(e,t){const i=await this.load();if(!i.parent)throw _e("queryFeatures");return i.parent.queryFeatures(ge(i.parent,i,e),t)}async queryObjectIds(e,t){const i=await this.load();if(!i.parent)throw _e("queryObjectIds");return i.parent.queryObjectIds(ge(i.parent,i,e),t)}async queryRelatedFeatures(e,t){const i=await this.load();if(!i.parent)throw _e("queryRelatedFeatures");return i.parent.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){const i=await this.load();if(!i.parent)throw _e("queryRelatedFeaturesCount");return i.parent.queryRelatedFeaturesCount(e,t)}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};(0,n._)([(0,y.MZ)({clonable:!1,readOnly:!0})],be.prototype,"_titleCreator",null),(0,n._)([(0,y.MZ)({type:de.A,json:ye({name:"attributeTableInfo"})})],be.prototype,"attributeTableTemplate",void 0),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"capabilities",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"effectiveCapabilities",null),(0,n._)([(0,y.MZ)({json:ye()})],be.prototype,"charts",void 0),(0,n._)([(0,y.MZ)({type:Boolean,nonNullable:!0,json:ye({name:"enableEditing"})})],be.prototype,"editingEnabled",void 0),(0,n._)([(0,y.MZ)({type:Boolean,readOnly:!0})],be.prototype,"effectiveEditingEnabled",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"elevationInfo",null),(0,n._)([(0,y.MZ)({clonable:!1,readOnly:!0})],be.prototype,"featureTitleFields",null),(0,n._)([(0,y.MZ)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],be.prototype,"fieldOverrides",void 0),(0,n._)([(0,Y.K)("fieldOverrides")],be.prototype,"writeFieldOverrides",null),(0,n._)([(0,y.MZ)((0,r.A)((0,r.A)({},ce.fields),{},{readOnly:!0,json:{read:!1}}))],be.prototype,"fields",null),(0,n._)([(0,y.MZ)(ce.fieldsIndex)],be.prototype,"fieldsIndex",void 0),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"floorInfo",null),(0,n._)([(0,y.MZ)({type:te.A,json:ye({name:"formInfo"})})],be.prototype,"formTemplate",void 0),(0,n._)([(0,y.MZ)({type:String,clonable:!1,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"id",void 0),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"isTable",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"geometryType",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"globalIdField",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"type",void 0),(0,n._)([(0,y.MZ)(he((0,W.o8)(Z.kF)))],be.prototype,"labelsVisible",void 0),(0,n._)([(0,y.MZ)({type:[ne.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:oe.w},write:{ignoreOrigin:!0,layerContainerTypes:ee.K}}})],be.prototype,"labelingInfo",void 0),(0,n._)([(0,y.MZ)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,layerContainerTypes:ee.K}}})],be.prototype,"layerType",void 0),(0,n._)([(0,y.MZ)(he((0,W.o8)(Z.fV)))],be.prototype,"legendEnabled",void 0),(0,n._)([(0,y.MZ)({type:["show","hide"]})],be.prototype,"listMode",void 0),(0,n._)([(0,y.MZ)((()=>{const e=(0,W.o8)(Z.hn);return e.json.origins.service.read=!1,he(e,{spatialOnly:!0})})())],be.prototype,"minScale",void 0),(0,n._)([(0,y.MZ)((()=>{const e=(0,W.o8)(Z.hG);return e.json.origins.service.read=!1,he(e,{spatialOnly:!0})})())],be.prototype,"maxScale",void 0),(0,n._)([(0,y.MZ)({readOnly:!0})],be.prototype,"effectiveScaleRange",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"objectIdField",null),(0,n._)([(0,y.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:ye({spatialOnly:!0})})],be.prototype,"opacity",void 0),(0,n._)([(0,y.MZ)({clonable:!1})],be.prototype,"parent",void 0),(0,n._)([(0,y.MZ)(he((0,W.o8)(Z.M6)))],be.prototype,"popupEnabled",void 0),(0,n._)([(0,y.MZ)({type:$.A,json:ye({name:"popupInfo"})})],be.prototype,"popupTemplate",void 0),(0,n._)([(0,y.MZ)({readOnly:!0})],be.prototype,"defaultPopupTemplate",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"relationships",null),(0,n._)([(0,y.MZ)({types:U,json:ye({target:"layerDefinition.drawingInfo.renderer",spatialOnly:!0})})],be.prototype,"renderer",null),(0,n._)([(0,m.w)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],be.prototype,"readRendererFromService",null),(0,n._)([(0,m.w)("renderer",["layerDefinition.drawingInfo.renderer"])],be.prototype,"readRenderer",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"spatialReference",null),(0,n._)([(0,y.MZ)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"subtypeCode",void 0),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"subtypeField",null),(0,n._)([(0,y.MZ)({type:[re.A],json:ye({name:"layerDefinition.templates"})})],be.prototype,"templates",void 0),(0,n._)([(0,m.w)("service","templates",["geometryType","subtypeField","subtypes","type"])],be.prototype,"readTemplatesFromService",null),(0,n._)([(0,y.MZ)({type:String,json:ye()})],be.prototype,"title",void 0),(0,n._)([(0,m.w)("service","title",["subtypes"])],be.prototype,"readTitleFromService",null),(0,n._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],be.prototype,"url",null),(0,n._)([(0,y.MZ)({readOnly:!0})],be.prototype,"userHasUpdateItemPrivileges",null),(0,n._)([(0,y.MZ)({type:Boolean,nonNullable:!0,json:ye({name:"visibility",spatialOnly:!0})})],be.prototype,"visible",void 0),be=(0,n._)([(0,v.$)("esri.layers.support.SubtypeSublayer")],be);const ge=(e,t,i)=>{if(!i)return t.createQuery();const r=le.A.from(i);return r.where=Me(r.where,e.subtypeField,t.subtypeCode),r},Me=(e,t,i)=>{const r=new RegExp("".concat(t,"\\s*=\\s*\\d+")),n="".concat(t,"=").concat(i),o=null!==e&&void 0!==e?e:"";return r.test(o)?o.replace(r,n):(0,p.mA)(n,o)},_e=e=>new l.A("This sublayer must have a parent SubtypeGroupLayer in order to use ".concat(e)),Se=be;var we=i(83982),Fe=i(38278),Ie=i(85632),Ae=i(61701);const Ce="SubtypeGroupLayer";function Te(e,t){return new l.A("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}function xe(e,t){const i=[];for(const r of e){const e=new Se;e.read(r,t),i.push(e)}return i}const ze=(0,O.p)();let ke=class extends((0,I.j)((0,w.FJ)((0,F.w6)((0,_.dM)((0,z.e)((0,x.j)((0,T.J)((0,M.b)((0,A.q)((0,C.A)((0,u.P)((0,S.d)((0,g.p)(o.A.ClonableMixin(b.A))))))))))))))){constructor(){super(...arguments),this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.sublayers=new(s.A.ofType(Se)),this.useUniqueColorsForSublayers=!0,this.supportedSourceTypes=new Set(["Feature Layer","Table"]),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this._debouncedSaveOperations=(0,d.sg)((async(e,t,r)=>{const{save:n,saveAs:o}=await i.e(3146).then(i.bind(i,10765));switch(e){case Ae.X.SAVE:return n(this,t);case Ae.X.SAVE_AS:return o(this,r,t)}})),this.addHandles((0,c.wB)((()=>this.sublayers),((e,t)=>this._handleSublayersChange(e,t)),c.OH))}destroy(){var e;null===(e=this.source)||void 0===e||e.destroy()}normalizeCtorArgs(e,t){return"string"==typeof e?(0,r.A)({url:e},t):e}load(e){const t=null!=e?e.signal:null,i=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(d.QP).then((async()=>{if(!this.url)throw new l.A("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==this.layerId)throw new l.A("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>(0,L.VA)(this,"load",e)));return this.addResolvingPromise(i),Promise.resolve(this)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,L.C$)(this)}get operationalLayerType(){return this.isTable?"SubtypeGroupTable":"SubtypeGroupLayer"}get parsedUrl(){const e=(0,h.An)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,h.fj)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,t){let{name:i}=t;return this.url?(0,k.yG)(this.url,i):i}async addAttachment(e,t){const i=await(0,L.Xl)(this,e,t,Ce);return this.lastEditsEventDate=new Date,i}async updateAttachment(e,t,i){const r=await(0,L.bt)(this,e,t,i,Ce);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return(0,L.ct)(this,e,t)}on(e,t){return super.on(e,t)}async createGraphicsSource(e){const{default:t}=await(0,d.qr)(Promise.all([i.e(8618),i.e(9122),i.e(7872),i.e(6200),i.e(6680)]).then(i.bind(i,89078)),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=(0,L.VZ)(this),t=this.sublayers.map((e=>e.subtypeCode));return e.where=(0,p.mA)("".concat(this.subtypeField," IN (").concat(t.join(","),")"),this.definitionExpression),e}async deleteAttachments(e,t){const i=await(0,L.mm)(this,e,t,Ce);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(e){return(0,L.WP)(this,e,Ce)}findSublayerForFeature(e){const t=this.fieldsIndex.get(this.subtypeField),i=e.attributes[t.name];return this.findSublayerForSubtypeCode(i)}findSublayerForSubtypeCode(e){return this._sublayerLookup.get(e)}getFieldDomain(e,t){if(null===t||void 0===t||!t.excludeImpliedDomains){const t=(0,L.pc)(this,e);if(t)return t}const i=(0,L.Nv)(this,null===t||void 0===t?void 0:t.feature);if(i){var r;const t=null===(r=i.domains)||void 0===r?void 0:r[e];return"inherited"===(null===t||void 0===t?void 0:t.type)?this._getLayerDomain(e):t}return this._getLayerDomain(e)}loadAll(){return(0,a.g)(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,t){return(0,L.lV)(this,e,t,Ce)}async queryFeatures(e,t){var i,r;const n=await this.load(),o=null!==(i=le.A.from(e))&&void 0!==i?i:n.createQuery(),s=null!==(r=o.outFields)&&void 0!==r?r:[];s.includes(this.subtypeField)||(s.push(this.subtypeField),o.outFields=s);const l=await n.source.queryFeatures(o,t);if(null!==l&&void 0!==l&&l.features)for(const a of l.features)a.layer=a.sourceLayer=this.findSublayerForFeature(a);return l}async queryObjectIds(e,t){return(await(0,L.sg)(this,e,t,Ce)).filter(Ie.Et)}async queryFeatureCount(e,t){return(0,L.Ye)(this,e,t,Ce)}async queryExtent(e,t){return(0,L.B5)(this,e,t,Ce)}async queryRelatedFeatures(e,t){return(0,L.hM)(this,e,t,Ce)}async queryRelatedFeaturesCount(e,t){return(0,L.S2)(this,e,t,Ce)}async save(e){return this._debouncedSaveOperations(Ae.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Ae.X.SAVE_AS,t,e)}write(e,t){var i;const{origin:r,layerContainerType:n,messages:o}=t;if(this.isTable){if("web-scene"===r||"web-map"===r&&"tables"!==n)return null!==o&&void 0!==o&&o.push(Te(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===r&&"tables"===n)return null!==o&&void 0!==o&&o.push(Te(this,"using a non-table source cannot be written to tables in web maps")),null;return null!==(i=this.sublayers)&&void 0!==i&&i.length?super.write(e,t):(null!==o&&void 0!==o&&o.push(new l.A("web-document-write:invalid-property","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer"),{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,Fe.D)(this,e)}async getFeatureTitle(e){var t,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeZone:"system",fetchMissingFields:!1};const n=this.findSublayerForFeature(e);return n?await n.getFeatureTitle(e,r):this.displayField&&this.fieldsIndex.has(this.displayField)?null!==(t=e.attributes[this.fieldsIndex.get(this.displayField).name])&&void 0!==t?t:"":this.objectIdField&&this.fieldsIndex.has(this.objectIdField)&&null!==(i=e.attributes[this.fieldsIndex.get(this.objectIdField).name])&&void 0!==i?i:""}get featureTitleFields(){const e=new Set;for(const t of this.sublayers){const i=t.featureTitleFields;for(const t of i)e.add(t)}return[...e]}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}async _initLayerProperties(e){var t;this._set("source",e);const{sourceJSON:i}=e;if(i&&(this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})),null===(t=this.subtypes)||void 0===t||!t.length)throw new l.A("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");this._verifyFields(),(0,E.sv)(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return(0,L.jp)(this)}_verifyFields(){var e,t,i;const r=null!==(e=null===(t=this.parsedUrl)||void 0===t?void 0:t.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+r+")"),this.isTable||-1!==r.search(/\/FeatureServer\//i)||(null===(i=this.fields)||void 0===i?void 0:i.some((e=>"geometry"===e.type)))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+r+")")}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null})),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this.addHandles([e.on("after-add",(e=>{let{item:t}=e;t.parent=this,this._sublayerLookup.set(t.subtypeCode,t)})),e.on("after-remove",(e=>{let{item:t}=e;t.parent=null,this._sublayerLookup.delete(t.subtypeCode)}))],"sublayers-owner"))}};(0,n._)([(0,y.MZ)({readOnly:!0})],ke.prototype,"createQueryVersion",null),(0,n._)([(0,y.MZ)({readOnly:!0})],ke.prototype,"editingEnabled",null),(0,n._)([(0,y.MZ)({readOnly:!0})],ke.prototype,"effectiveEditingEnabled",null),(0,n._)([(0,y.MZ)((0,r.A)((0,r.A)({},ze.fields),{},{readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}))],ke.prototype,"fields",void 0),(0,n._)([(0,y.MZ)(ze.fieldsIndex)],ke.prototype,"fieldsIndex",void 0),(0,n._)([(0,y.MZ)(Z.id)],ke.prototype,"id",void 0),(0,n._)([(0,y.MZ)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],ke.prototype,"listMode",void 0),(0,n._)([(0,y.MZ)({type:["SubtypeGroupLayer","SubtypeGroupTable"],json:(0,r.A)((0,r.A)({},{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}}),{},{origins:{"web-document":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}},"portal-item":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}}}})})],ke.prototype,"operationalLayerType",null),(0,n._)([(0,y.MZ)(ze.outFields)],ke.prototype,"outFields",void 0),(0,n._)([(0,y.MZ)({readOnly:!0})],ke.prototype,"parsedUrl",null),(0,n._)([(0,y.MZ)({clonable:!1})],ke.prototype,"source",null),(0,n._)([(0,y.MZ)({type:s.A.ofType(Se),json:{origins:{service:{read:{source:"subtypes",reader(e,t,i){let r=null;if(this.useUniqueColorsForSublayers){const n=function(e,t){var i;const r=null===(i=e.drawingInfo)||void 0===i?void 0:i.renderer,n=r?B(r,e,t):null;if("simple"===(null===n||void 0===n?void 0:n.type))return(0,V.Sx)(n.symbol,null)?n.symbol.clone():null}(t,i);r=n?function(e,t){return(0,P.Iy)(H,e,{offset:!0,shuffle:!0}).reverse().map((e=>{const i=t.clone();return"cim"===i.type?(0,G.Fe)(i,e):(0,V.dt)(i,e),new q.A({symbol:i})}))}(e.length,n):null}const n=e.map(((e,n)=>{var o;let{code:s}=e;const l=new Se({subtypeCode:s});l.read(t,i);const a=null===(o=r)||void 0===o?void 0:o[n];return a&&l.read({drawingInfo:{renderer:a.toJSON()}},i),l}));return new(s.A.ofType(Se))(n)}}}},read:{source:["layers","tables"],reader(e,t,i){var r,n;let o;return"SubtypeGroupLayer"===t.layerType&&null!==(r=t.layers)&&void 0!==r&&r.length?o=xe(t.layers,i):"SubtypeGroupTable"===t.layerType&&(null===(n=t.tables)||void 0===n?void 0:n.length)&&(o=xe(t.tables,i)),new(s.A.ofType(Se))(o)}},write:{ignoreOrigin:!0,writer(e,t,i,r){const n=[];for(const o of e){const e=o.write({},r);n.push(e)}this.isTable?t.tables=n:t.layers=n}}}})],ke.prototype,"sublayers",void 0),(0,n._)([(0,y.MZ)()],ke.prototype,"useUniqueColorsForSublayers",void 0),(0,n._)([(0,y.MZ)({type:we.A})],ke.prototype,"timeInfo",void 0),(0,n._)([(0,y.MZ)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],ke.prototype,"title",void 0),(0,n._)([(0,m.w)("service","title",["name"])],ke.prototype,"readTitleFromService",null),(0,n._)([(0,y.MZ)({json:{read:!1}})],ke.prototype,"type",void 0),(0,n._)([(0,y.MZ)({clonable:!1,readOnly:!0})],ke.prototype,"featureTitleFields",null),ke=(0,n._)([(0,v.$)("esri.layers.SubtypeGroupLayer")],ke);const Ze=ke},91524:(e,t,i)=>{i.d(t,{K:()=>p,Q:()=>u});var r=i(35143),n=i(45802),o=i(76460),s=i(46053),l=(i(81806),i(47249),i(6409)),a=i(85842);const u=(0,n.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),d="percent-of-total",c="field",p=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=t&&c||i&&d||null,t&&i&&o.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==c&&e!==d||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,r._)([(0,s.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,r._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,r._)([(0,l.e)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,r._)([(0,a.$)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},97763:(e,t,i)=>{i.d(t,{$w:()=>b,Bu:()=>k,DW:()=>C,FH:()=>D,FM:()=>d,G9:()=>s,GV:()=>M,Go:()=>c,K3:()=>q,Kn:()=>I,MM:()=>y,MO:()=>U,Nl:()=>Z,Ny:()=>_,O2:()=>L,UE:()=>O,YC:()=>V,YF:()=>P,ZO:()=>N,_1:()=>x,_H:()=>w,_W:()=>g,_d:()=>A,bs:()=>G,dI:()=>Q,e6:()=>p,gQ:()=>u,iA:()=>R,jn:()=>m,lW:()=>h,mA:()=>f,n5:()=>E,pM:()=>T,pV:()=>F,pk:()=>B,rB:()=>H,s4:()=>o,xo:()=>z,yH:()=>S,yX:()=>X,zb:()=>j,zr:()=>v});var r=i(89379),n=i(13442);function o(e,t,i,r){return function(e){return"function"==typeof e}(e)?e(t,i,r):e}function s(e){return[e.r,e.g,e.b,e.a]}const l=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!l.includes(e.charAt(t)))return!1;return!0}function u(e,t){const i=[];let r=0,n=-1;do{if(n=e.indexOf("[",r),n>=r){if(n>r){const t=e.slice(r,n);i.push([t,null,a(t)])}if(r=n+1,n=e.indexOf("]",r),n>=r){if(n>r){const o=t[e.slice(r,n)];o&&i.push([null,o,!1])}r=n+1}}}while(-1!==n);if(r<e.length){const t=e.slice(r);i.push([t,null,a(t)])}return i}function d(e,t,i,r){let n="",o=null;for(const s of t){const[t,r,l]=s;if(t)l?o=t:(o&&(n+=o,o=null),n+=t);else{let t=r;null!=i&&(t=U(r,i));const s=e.attributes[t];s&&(o&&(n+=o,o=null),n+=s)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(n,r)}function c(e,t,i,r,n,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const l=t/n,a=i/o,u=Math.ceil(l/2),d=Math.ceil(a/2);for(let c=0;c<o;c++)for(let i=0;i<n;i++){const p=4*(i+(s?o-c-1:c)*n);let h=0,y=0,f=0,m=0,v=0,b=0,g=0;const M=(c+.5)*a;for(let r=Math.floor(c*a);r<(c+1)*a;r++){const n=Math.abs(M-(r+.5))/d,o=(i+.5)*l,s=n*n;for(let a=Math.floor(i*l);a<(i+1)*l;a++){let i=Math.abs(o-(a+.5))/u;const n=Math.sqrt(s+i*i);n>=-1&&n<=1&&(h=2*n*n*n-3*n*n+1,h>0&&(i=4*(a+r*t),g+=h*e[i+3],f+=h,e[i+3]<255&&(h=h*e[i+3]/250),m+=h*e[i],v+=h*e[i+1],b+=h*e[i+2],y+=h))}}r[p]=m/y,r[p+1]=v/y,r[p+2]=b/y,r[p+3]=g/f}}function p(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function h(e){var t,i;return null!==(t=null===(i=e.data)||void 0===i?void 0:i.symbol)&&void 0!==t?t:null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function m(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function v(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},g=(e,t)=>null!=e?e:t,M=(e,t)=>null!==e&&void 0!==e?e:t,_=e=>e.tintColor?p(e.tintColor):[255,255,255,1],S=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function w(){return Promise.all([i.e(2612),i.e(7983)]).then(i.bind(i,1669))}function F(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function I(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function A(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function C(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function T(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=T(t);if(null!=e)return e}break;case"CIMTextSymbol":return T(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=x(e);if(null!=t)return t}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function z(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=z(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return z(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Z(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function L(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const O=e=>e.includes("data:image/svg+xml");function E(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function P(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function j(e,t,i,r,n,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const{infos:l}=o;let a=1,u=0,d=0,c=0,p=1;for(const{absoluteAnchorPoint:f,offsetX:m,offsetY:v,rotation:b,size:g,frameHeight:M,rotateClockWise:_,scaleSymbolsProportionally:S}of l)p=f?1:a,d=J(m,v,u,p,d),c=$(m,v,u,p,c),M&&(S||s)&&(a*=g/M),u=W(b,_,u);const h=J(r,n,u,p,d),y=$(r,n,u,p,c);return{size:e*a,rotation:W(t,i,u),offsetX:h,offsetY:y}}function N(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>N(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function R(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...n.K[t]];const i=n.D[e];if(!i)throw new Error("InternalError: default value for type ".concat(e,"."));return i[t]}function q(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function D(e){return null!==e&&void 0!==e&&e.dashTemplate&&(e.dashTemplate=q(e.dashTemplate)),e}function G(e){var t;if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return null!==(t=e.textCase)&&void 0!==t?t:"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return G(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return G(e.symbol)}}return"Normal"}function V(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let i=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{var t;const e=null!==(t=r.size)&&void 0!==t?t:n.D.CIMVectorMarker.size;e>i&&(i=e);break}}return i}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&v(r.markerPlacement)){var i;const e=null!==(i=r.size)&&void 0!==i?i:n.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=r.height;null!=e&&e>t&&(t=e)}}return t}}}function U(e,t){if(null!==t){const i=t.get(e);return i?i.name:e}return e}function B(e){return e.map((e=>(0,r.A)((0,r.A)({},e),{},{propertyName:P(e.propertyName)})))}function H(e){const t={};for(const i in e){const r=e[i];t[P(i)]=r}return t}function $(e,t,i,r,n){const o=i*Math.PI/180;if(o){const i=Math.cos(o);return(Math.sin(o)*e+i*t)*r+n}return t*r+n}function J(e,t,i,r,n){const o=i*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*r+n:e*r+n}function W(e,t,i){return t?i-e:i+e}function Q(e,t,i){const r="Color"===i||"TintColor"===i||"ToColor"===i,n="Rotation"===i||"Angle"===i||"ToRotation"===i;let o=t[P(i)];if(null!=o&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180)),null==o&&(o=R(t.type,i.toLowerCase()),null!=o&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:n&&(o*=Math.PI/180))),null!=t.primitiveName){const s=e[t.primitiveName];if(null!=s){const e=s[i];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(o=e,null!=o&&(r?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180))):(o={valueExpressionInfo:e,defaultValue:o},null!=o&&(r?o={type:"Process",op:"ArcadeColor",value:o}:n&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(null==o)throw new Error('Failed to derive a value or an expression for "'.concat(i,'".'));return o}function X(e,t){return Math.max(Math.min((null!==e&&void 0!==e?e:t)/100,1),0)}}}]);
//# sourceMappingURL=6783.046fb071.chunk.js.map