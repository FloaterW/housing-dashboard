"use strict";(self.webpackChunkhousing_dashboard=self.webpackChunkhousing_dashboard||[]).push([[9832],{20665:(e,t,i)=>{i.d(t,{A:()=>f});var s=i(89379),r=i(35143),n=i(91967),o=i(98773),l=i(94643),a=i(46053),d=(i(81806),i(76460),i(47249),i(85842)),u=i(53430),p=i(98976);let c=class extends n.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,o.UT)((()=>(0,p.lw)())):null}get featureUtilsPromise(){var e;return null!==(e=this._get("featureUtilsPromise"))&&void 0!==e?e:i.e(9912).then(i.bind(i,9912)).then((e=>this._featureUtils=e))}get calculatedExpressions(){var e;const t=new l.A;if(!this.expressionsUsedInTitle.length)return t;if(null===(e=this._arcadeTask)||void 0===e||!e.value){for(const e of null!==(i=this.expressionsUsedInTitle)&&void 0!==i?i:[]){var i;t.push({name:e.name,invalid:!0})}return t}for(const r of this.expressionsUsedInTitle)try{const e=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(e.isAsync){t.push({name:r.name,invalid:!0});break}t.push({name:r.name,syntax:e,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(e,{vars:{$feature:"any"}})})}catch(s){t.push({name:r.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var e,t,i,s;let r=null!==(e=null===(t=this.effectivePopupTemplate)||void 0===t?void 0:t.title)&&void 0!==e?e:"";return"string"!=typeof r?[]:(r=r.toLowerCase(),null!==(i=null===(s=this.effectivePopupTemplate)||void 0===s||null===(s=s.expressionInfos)||void 0===s?void 0:s.filter((e=>r.includes("{expression/".concat(e.name.toLowerCase(),"}")))))&&void 0!==i?i:[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){var e;const t=new Set;if(null!==(e=this._arcadeTask)&&void 0!==e&&e.value&&!this.hasBadExpressions)for(const l of null!==(i=null===(s=this.calculatedExpressions)||void 0===s?void 0:s.toArray())&&void 0!==i?i:[]){var i,s;try{const e=this._arcadeTask.value.arcade.extractFieldLiterals(l.syntax);for(const i of e){var r;const e=i.split("."),s=this.fieldsIndex.get(null!==(r=e.at(-1))&&void 0!==r?r:"");s&&t.add(s.name)}}catch(o){}}const n=this._extractFieldNames(this.workingTitle);for(const l of n){const e=this.fieldsIndex.get(l);e&&t.add(e.name)}return t}get titleFromDisplayField(){var e,t,i,s;let r="";return this.displayField&&(r=null!==(e=null===(t=this.fieldsIndex.get(this.displayField))||void 0===t?void 0:t.name)&&void 0!==e?e:""),r||(r=null!==(i=null===(s=this.fieldsIndex.get(this.objectIdField))||void 0===s?void 0:s.name)&&void 0!==i?i:""),r?"{".concat(r,"}"):""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,i){try{var s,r;const{attributes:n}=t,o=null!==(s=null===i||void 0===i?void 0:i.timeZone)&&void 0!==s?s:"system",[{substituteFieldsInLinksAndAttributes:l}]=await Promise.all([this.featureUtilsPromise,null===(r=this._arcadeTask)||void 0===r?void 0:r.promise]);if(i.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const i=this._createFormattedAttributes(e,t,o).global;return l({attributes:n,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:i,layer:e,text:this.workingTitle})}return""}catch(n){}return""}async _checkAndReQueryGraphic(e,t){const i=t.getObjectId();if(null==i)return t;if(!(0,u.Kl)(this.requiredFields,t)){const t=e.createQuery();t.where="1=1",t.outFields=[...this.requiredFields],t.objectIds=[i];const s=await e.queryFeatures(t);if(1===(null===s||void 0===s?void 0:s.features.length))return s.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const s of e){var i;if(!s.fieldName)continue;const e=this.fieldsIndex.get(s.fieldName),r=null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:s.fieldName;s.fieldName=r,t.set(r.toLowerCase(),s)}return t}_createFormattedAttributes(e,t){var i,r,n;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"system";const l=null!==(i=null===(r=this.effectivePopupTemplate)||void 0===r?void 0:r.fieldInfos)&&void 0!==i?i:[],a={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&null!==(n=this._arcadeTask)&&void 0!==n&&n.value){const i=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{a["expression/".concat(e.name)]=e.func({vars:{$feature:i}})}catch(u){}}const d=(0,s.A)((0,s.A)({},t.attributes),a);return{global:this._featureUtils.formatAttributes({fieldInfos:l,attributes:d,graphic:t,timeZone:o,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,u.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,r._)([(0,a.MZ)({readOnly:!0})],c.prototype,"_arcadeTask",null),(0,r._)([(0,a.MZ)()],c.prototype,"_featureUtils",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],c.prototype,"featureUtilsPromise",null),(0,r._)([(0,a.MZ)({readOnly:!0})],c.prototype,"calculatedExpressions",null),(0,r._)([(0,a.MZ)()],c.prototype,"displayField",void 0),(0,r._)([(0,a.MZ)()],c.prototype,"effectivePopupTemplate",void 0),(0,r._)([(0,a.MZ)()],c.prototype,"expressionsUsedInTitle",null),(0,r._)([(0,a.MZ)()],c.prototype,"fieldsIndex",void 0),(0,r._)([(0,a.MZ)()],c.prototype,"fieldInfoMap",null),(0,r._)([(0,a.MZ)()],c.prototype,"fields",void 0),(0,r._)([(0,a.MZ)()],c.prototype,"objectIdField",void 0),(0,r._)([(0,a.MZ)()],c.prototype,"requiredFields",null),c=(0,r._)([(0,d.$)("esri.layers.support.TitleCreator")],c);const f=c},37534:(e,t,i)=>{i.d(t,{Rr:()=>a,fY:()=>u,ne:()=>d});var s=i(35143),r=i(48611),n=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),l=i(51162);function a(e,t,i){if(!e)return null;const s=e.find((e=>!!e.field));if(!s)return null;const r=new l.A;return r.read(s,i),[r]}const d={type:[l.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:a},write:{writer:function(e,t,i,s){const n=e.find((e=>!!e.field));n&&(0,r.sM)(i,[n.toJSON()],t)}}}},u=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,s._)([(0,n.MZ)(d)],t.prototype,"orderBy",void 0),t=(0,s._)([(0,o.$)("esri.layers.mixins.OrderedLayer")],t),t}},51162:(e,t,i)=>{i.d(t,{A:()=>p});var s,r=i(35143),n=i(45802),o=i(42553),l=i(46053),a=(i(81806),i(76460),i(47249),i(85842));const d=new n.J({asc:"ascending",desc:"descending"});let u=s=class extends o.A{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new s({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,r._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"field",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],u.prototype,"valueExpression",void 0),(0,r._)([(0,l.MZ)({type:d.apiValues,json:{type:d.jsonValues,read:d.read,write:d.write}})],u.prototype,"order",void 0),u=s=(0,r._)([(0,a.$)("esri.layers.support.OrderByInfo")],u);const p=u},61701:(e,t,i)=>{var s;i.d(t,{X:()=>s}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(s||(s={}))},77725:(e,t,i)=>{i.d(t,{A:()=>_});var s,r=i(35143),n=i(39356),o=i(45802),l=i(42553),a=i(53084),d=i(46053),u=(i(81806),i(76460),i(28379)),p=i(85842),c=i(17707),f=i(13312),h=i(19902),y=i(31608),m=i(44135);const v=new o.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let g=s=class extends l.A{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,n.A)}writeGeometryType(e,t,i,s){if(e)return void v.write(e,t,i,s);const{features:r}=this;if(r)for(const n of r)if(null!=(null===n||void 0===n?void 0:n.geometry))return void v.write(n.geometry.type,t,i,s)}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,s=(0,h.rS)(e);return s&&!i&&t.spatialReference&&(s.spatialReference=f.A.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i)for(const s of i)if(s&&null!=s.geometry&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}clone(){return new s(this.cloneProperties())}cloneProperties(){return(0,a.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const s=t.features[i];if(s.geometry){const t=null===e||void 0===e?void 0:e[i];s.geometry=(null===t||void 0===t?void 0:t.toJSON())||s.geometry}}return t}quantize(e){const{scale:[t,i],translate:[s,r]}=e,n=this.features,o=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-s)/t)),(e=>Math.round((r-e)/i)));for(let l=0,a=n.length;l<a;l++)(null===o||void 0===o?void 0:o(n[l].geometry))||(n.splice(l,1),l--,a--);return this.transform=e,this}unquantize(){var e,t;const{geometryType:i,features:s,transform:r}=this;if(!r)return this;const{translate:[n,o],scale:[l,a]}=r;let d=null,u=null;if(this.hasZ&&null!=(null===r||void 0===r||null===(e=r.scale)||void 0===e?void 0:e[2])){const{translate:[,,e],scale:[,,t]}=r;d=i=>i*t+e}if(this.hasM&&null!=(null===r||void 0===r||null===(t=r.scale)||void 0===t?void 0:t[3])){const{translate:[,,,e],scale:[,,,t]}=r;u=i=>null==i?i:i*t+e}const p=this._getHydrationFunction(i,(e=>e*l+n),(e=>o-e*a),d,u);for(const{geometry:c}of s)null!=c&&p&&p(c);return this.transform=null,this}readFeaturesWithClass(e,t,i){const s=f.A.fromJSON(t.spatialReference),r=[];for(let o=0;o<e.length;o++){var n;const t=e[o],l=i.fromJSON(t),a=null===(n=t.geometry)||void 0===n?void 0:n.spatialReference;null==l.geometry||a||(l.geometry.spatialReference=s);const d=t.aggregateGeometries,u=l.aggregateGeometries;if(d&&null!=u)for(const e in u){const t=u[e],i=d[e],r=null===i||void 0===i?void 0:i.spatialReference;null==t||r||(t.spatialReference=s)}r.push(l)}return r}_quantizePoints(e,t,i){let s,r;const n=[];for(let o=0,l=e.length;o<l;o++){const l=e[o];if(o>0){const e=t(l[0]),o=i(l[1]);e===s&&o===r||(n.push([e-s,o-r]),s=e,r=o)}else s=t(l[0]),r=i(l[1]),n.push([s,r])}return n.length>0?n:null}_getQuantizationFunction(e,t,i){return"point"===e?e=>(e.x=t(e.x),e.y=i(e.y),e):"polyline"===e||"polygon"===e?e=>{const s=(0,h.Bi)(e)?e.rings:e.paths,r=[];for(let n=0,o=s.length;n<o;n++){const e=s[n],o=this._quantizePoints(e,t,i);o&&r.push(o)}return r.length>0?((0,h.Bi)(e)?e.rings=r:e.paths=r,e):null}:"multipoint"===e?e=>{const s=this._quantizePoints(e.points,t,i);return s&&s.length>0?(e.points=s,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,i,s,r){return"point"===e?e=>{e.x=t(e.x),e.y=i(e.y),s&&(e.z=s(e.z))}:"polyline"===e||"polygon"===e?e=>{const n=(0,h.Bi)(e)?e.rings:e.paths;let o,l;for(let s=0,r=n.length;s<r;s++){const e=n[s];for(let s=0,r=e.length;s<r;s++){const r=e[s];s>0?(o+=r[0],l+=r[1]):(o=r[0],l=r[1]),r[0]=t(o),r[1]=i(l)}}if(s&&r)for(let t=0,i=n.length;t<i;t++){const e=n[t];for(let t=0,i=e.length;t<i;t++){const i=e[t];i[2]=s(i[2]),i[3]=r(i[3])}}else if(s)for(let t=0,i=n.length;t<i;t++){const e=n[t];for(let t=0,i=e.length;t<i;t++){const i=e[t];i[2]=s(i[2])}}else if(r)for(let t=0,i=n.length;t<i;t++){const e=n[t];for(let t=0,i=e.length;t<i;t++){const i=e[t];i[2]=r(i[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=i(e.ymin),e.xmax=t(e.xmax),e.ymax=i(e.ymax),s&&null!=e.zmax&&null!=e.zmin&&(e.zmax=s(e.zmax),e.zmin=s(e.zmin)),r&&null!=e.mmax&&null!=e.mmin&&(e.mmax=r(e.mmax),e.mmin=r(e.mmin))}:"multipoint"===e?e=>{const n=e.points;let o,l;for(let s=0,r=n.length;s<r;s++){const e=n[s];s>0?(o+=e[0],l+=e[1]):(o=e[0],l=e[1]),e[0]=t(o),e[1]=i(l)}if(s&&r)for(let t=0,i=n.length;t<i;t++){const e=n[t];e[2]=s(e[2]),e[3]=r(e[3])}else if(s)for(let t=0,i=n.length;t<i;t++){const e=n[t];e[2]=s(e[2])}else if(r)for(let t=0,i=n.length;t<i;t++){const e=n[t];e[2]=r(e[2])}}:null}};(0,r._)([(0,d.MZ)({type:String,json:{write:!0}})],g.prototype,"displayFieldName",void 0),(0,r._)([(0,d.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"exceededTransferLimit",void 0),(0,r._)([(0,d.MZ)({type:[n.A],json:{write:!0}})],g.prototype,"features",void 0),(0,r._)([(0,u.w)("features")],g.prototype,"readFeatures",null),(0,r._)([(0,d.MZ)({type:[m.A],json:{write:!0}})],g.prototype,"fields",void 0),(0,r._)([(0,d.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:v.read}}})],g.prototype,"geometryType",void 0),(0,r._)([(0,c.K)("geometryType")],g.prototype,"writeGeometryType",null),(0,r._)([(0,d.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasM",void 0),(0,r._)([(0,d.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasZ",void 0),(0,r._)([(0,d.MZ)({types:y.yR,json:{write:!0}})],g.prototype,"queryGeometry",void 0),(0,r._)([(0,u.w)("queryGeometry")],g.prototype,"readQueryGeometry",null),(0,r._)([(0,d.MZ)({type:f.A,json:{write:!0}})],g.prototype,"spatialReference",void 0),(0,r._)([(0,c.K)("spatialReference")],g.prototype,"writeSpatialReference",null),(0,r._)([(0,d.MZ)({json:{write:!0}})],g.prototype,"transform",void 0),g=s=(0,r._)([(0,p.$)("esri.rest.support.FeatureSet")],g),g.prototype.toJSON.isDefaultToJSON=!0;const _=g},91485:(e,t,i)=>{i.d(t,{A:()=>f});var s=i(35143),r=i(69098),n=i(42553),o=i(46053),l=(i(81806),i(76460),i(47249),i(28379)),a=i(85842),d=i(17707),u=i(76866),p=i(15427);let c=class extends(r.A.ClonableMixin(n.A)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=(0,u.rS)(e[i]);return t}writeDomains(e,t){const i={};for(const r of Object.keys(e)){var s;e[r]&&(i[r]=null===(s=e[r])||void 0===s?void 0:s.toJSON())}t.domains=i}};(0,s._)([(0,o.MZ)({json:{write:!0}})],c.prototype,"id",void 0),(0,s._)([(0,o.MZ)({json:{write:!0}})],c.prototype,"name",void 0),(0,s._)([(0,o.MZ)({json:{write:!0}})],c.prototype,"domains",void 0),(0,s._)([(0,l.w)("domains")],c.prototype,"readDomains",null),(0,s._)([(0,d.K)("domains")],c.prototype,"writeDomains",null),(0,s._)([(0,o.MZ)({type:[p.A],json:{write:!0}})],c.prototype,"templates",void 0),c=(0,s._)([(0,a.$)("esri.layers.support.FeatureType")],c);const f=c}}]);
//# sourceMappingURL=9832.efb53af4.chunk.js.map