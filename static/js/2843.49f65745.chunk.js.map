{"version":3,"file":"static/js/2843.49f65745.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js","../node_modules/@arcgis/core/layers/support/floorFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONMap as t}from\"../../core/jsonMap.js\";import i from\"../../core/JSONSupport.js\";import{clone as r}from\"../../core/lang.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{geometryTypes as n}from\"../../geometry/support/typeUtils.js\";import l from\"../../rest/support/Query.js\";import a from\"../../time/TimeExtent.js\";var p;const c=new t({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new t({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let m=p=class extends i{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:s,timeExtent:o,objectIds:n,units:a,distance:p}=this;return new l({geometry:r(i),objectIds:r(n),spatialRelationship:s,timeExtent:r(o),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:s,objectIds:o,units:n,distance:l}=this;return new p({geometry:r(t),objectIds:r(o),spatialRelationship:i,timeExtent:r(s),where:e,units:n,distance:l})}};e([s({type:String,json:{write:!0}})],m.prototype,\"where\",void 0),e([s({types:n,json:{write:!0}})],m.prototype,\"geometry\",void 0),e([s({type:c.apiValues,json:{name:\"spatialRel\",read:{reader:c.read},write:{allowNull:!1,writer:c.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],m.prototype,\"spatialRelationship\",void 0),e([s({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],m.prototype,\"distance\",void 0),e([s({type:[Number],json:{write:!0}})],m.prototype,\"objectIds\",void 0),e([s({type:u.apiValues,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],m.prototype,\"units\",void 0),e([s({type:a,json:{write:!0}})],m.prototype,\"timeExtent\",void 0),m=p=e([o(\"esri.layers.support.FeatureFilter\")],m);const d=m;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find((e=>e.layer===this.layer))}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter((e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale))).map((e=>e.layer.subtypeCode));if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",(()=>t.refresh())))}this.loadRules(),this.addHandles([i((()=>t.updating),(e=>t.layerSource.updating=e),l),i((()=>t.availability),(e=>t.layerSource.availability=e),l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find((e=>e.isUtilityLayer(v)))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map((e=>e.load()))??[]);const r=t.map.utilityNetworks?.find((t=>t.isUtilityLayer(e)));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{allSettledValues as n,throwIfAborted as s}from\"../../../core/promiseUtils.js\";import{mapCollectionAsync as i,watch as o,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{s as g,c as h}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,markAsTarget as j,asVec2 as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{SnappingDomain as x}from\"./SnappingDomain.js\";import{sortCandidatesInPlace as C,screenDistance as R}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as E}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I,OtherVertexType as G}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as H}from\"../support/viewUtils.js\";let P=class extends t{get updating(){return this._snappingSources.some((e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating))||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=x.FEATURE,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=i((()=>this.options?._effectiveFeatureSources),((e,t)=>this._createSourceInfo(e,t)));this._snappingSources=e,this.addHandles([a(e),o((()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)})),(({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e}),c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const i=[],o=this._computeScreenSizeDistanceParameters(e,r);for(const n of this._snappingSources){if(!n?.valid||!n.snappingSource?.layerSource?.enabled||n.layerView?.suspended)continue;const t=n.getFetchCandidatesParameters(e,r,o);for(const e of t)i.push(n.snappingSource.fetchCandidates(e,a).then((e=>e.filter((e=>!this._candidateIsExcluded(n.snappingSource,e,r.excludeFeature))))))}const c=(await n(i)).flat();return this._addRightAngleCandidates(c,e,o,r),s(a),C(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightEdge?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftEdge?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:i}=this,o=w(n,i,a),c=w(s,i,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],o,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!A(e))return;const s=e.constraint.closestTo(t),i=(s[0]-r[0])/a.x,o=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(i*i+o*o<=1){const r=m(F(s),F(c))>m(F(s),F(u))?c:u,a=new I({targetPoint:j(s),otherVertex:t,otherVertexType:G.NEXT,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:x.FEATURE});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,D);const s=r.state.camera.computeScreenPixelSizeAt(D),i=s*r.renderCoordsHelper.unitInMeters,o=i/u(n),c=i/l(n),p=t*o,d=t*c,m=H(e,n,_,r),g=m?z(m,e,o,0,0,r,a):0,h=m?z(m,e,0,o,0,r,a):0,S=m?z(m,e,0,0,c,r,a):0;return{x:0===g?0:p/g,y:0===h?0:p/h,z:0===S?0:d/S,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),s(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return s(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function A(e){return(e instanceof M||e instanceof E)&&!U(e)}function U({constraint:{start:e,end:t}}){const r=g(e,t),a=m(F(e),F(t));return r<f()||a/r<T}function z(e,t,r,a,n,s,{spatialReference:i}){const o=h(O,t);o[0]+=r,o[1]+=a,o[2]+=n;const c=H(o,i,_,s);return c?R(c,e):1/0}e([p({constructOnly:!0})],P.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],P.prototype,\"view\",void 0),e([p()],P.prototype,\"options\",void 0),e([p({readOnly:!0})],P.prototype,\"updating\",null),e([p()],P.prototype,\"_snappingSources\",void 0),P=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],P);const D=S(),O=S(),T=1e-4;export{P as FeatureSnappingEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n"],"names":["p","c","t","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","u","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","m","i","constructor","e","super","this","where","geometry","spatialRelationship","distance","objectIds","units","timeExtent","createQuery","arguments","length","undefined","s","o","n","a","l","_objectSpread","r","clone","type","String","json","write","prototype","types","apiValues","name","read","reader","allowNull","writer","overridePolicy","enabled","Number","d","f","attributeRulesEnabled","_set","loadRules","layerView","_this$view","view","allLayerViews","find","layer","valid","_valid","snappingSource","subtypeFilter","_e$subtypes","_e$fieldsIndex$get$na","_e$fieldsIndex$get","subtypes","mode","filter","layerSource","sublayerSources","_this$view2","visible","y","scale","effectiveScaleRange","minScale","maxScale","map","subtypeCode","fieldsIndex","get","subtypeField","concat","getItemAt","join","floorFilter","rulesTable","initialize","addHandles","on","refresh","updating","availability","getFetchCandidatesParameters","_this$view$type","_this$view3","_f$sourceLayer","_this$view4","_this$view$map$utilit","point","coordinateHelper","returnEdge","vertexMode","feature","v","sourceLayer","parent","utilityNetworks","isUtilityLayer","_a$getFeatureSQL","_has","loadStatus","layerId","getFeatureSQL","anyVertex","endVertex","push","has","_t$map$utilityNetwork","_t$map$utilityNetwork2","_t$map$utilityNetwork3","_this$rulesTable","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","destroy","_this$snappingSource","constructOnly","value","P","_snappingSources","some","_e$snappingSource","_updatingHandles","options","_domain","x","FEATURE","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","_this$options","_effectiveFeatureSources","_createSourceInfo","_this$options2","rulesEnabled","sources","_ref","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","_n$snappingSource","_n$layerView","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","C","_a$vertexHandle$right","_a$editGeometryOperat","_a$vertexHandle$leftE","_a$editGeometryOperat2","vertexHandle","rightEdge","rightVertex","pos","editGeometryOperations","data","components","getFirstVertex","leftEdge","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","E","_ref2","constraint","start","end","g","F","T","U","A","closestTo","I","targetPoint","j","otherVertex","otherVertexType","G","NEXT","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","z","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","D","state","camera","computeScreenPixelSizeAt","unitInMeters","H","_","h","S","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","_e$layer$source","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","_e$layer$sublayers$to","_e$layer$sublayers","sublayers","toArray","_loadSourceModule","addPromise","test","_ref3","O","R","readOnly","_n$floorInfo","floorInfo","floorField","floors","_n$floorInfo2"],"sourceRoot":""}